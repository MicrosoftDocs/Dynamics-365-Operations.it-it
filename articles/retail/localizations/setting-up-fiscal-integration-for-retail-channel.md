---
title: Impostare l'integrazione fiscale per canali di vendita al dettaglio
description: In questo argomento vengono fornite indicazioni per l'impostazione della funzionalità di integrazione fiscale per canali di vendita al dettaglio.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2018-11-1
ms.dyn365.ops.version: 8.1.1
ms.openlocfilehash: 685340141ed35f4a2b57742328c69d3bbf9a73d2
ms.sourcegitcommit: 70aeb93612ccd45ee88c605a1a4b87c469e3ff57
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "773329"
---
# <a name="set-up-the-fiscal-integration-for-retail-channels"></a><span data-ttu-id="622ae-103">Impostare l'integrazione fiscale per canali di vendita al dettaglio</span><span class="sxs-lookup"><span data-stu-id="622ae-103">Set up the fiscal integration for Retail channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="622ae-104">Introduzione</span><span class="sxs-lookup"><span data-stu-id="622ae-104">Introduction</span></span>

<span data-ttu-id="622ae-105">In questo argomento vengono fornite indicazioni per l'impostazione della funzionalità di integrazione fiscale per canali di vendita al dettaglio.</span><span class="sxs-lookup"><span data-stu-id="622ae-105">This topic provides guidelines for setting up the fiscal integration functionality for Retail channels.</span></span> <span data-ttu-id="622ae-106">Per ulteriori informazioni sull'integrazione fiscale, vedere [Panoramica dell'integrazione fiscale per i canali di vendita al dettaglio](fiscal-integration-for-retail-channel.md).</span><span class="sxs-lookup"><span data-stu-id="622ae-106">For more information about the fiscal integration, see [Overview of fiscal integration for Retail channels](fiscal-integration-for-retail-channel.md).</span></span>

<span data-ttu-id="622ae-107">Il processo di impostazione dell'integrazione fiscale include le seguenti attività:</span><span class="sxs-lookup"><span data-stu-id="622ae-107">The process of setting up the fiscal integration includes the following tasks:</span></span>

1. <span data-ttu-id="622ae-108">Configurare connettori fiscali che rappresentano dispositivi o servizi fiscali utilizzati a scopo di registrazione fiscale, ad esempio le stampanti fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-108">Configure fiscal connectors that represent fiscal devices or services that are used for fiscal registration purposes, such as fiscal printers.</span></span>
2. <span data-ttu-id="622ae-109">Configurare fornitori di documenti che generano documenti fiscali che verranno registrati nei dispositivi o servizi fiscali mediante connettori fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-109">Configure document providers that generate fiscal documents that will be registered in fiscal devices or services by fiscal connectors.</span></span>
3. <span data-ttu-id="622ae-110">Configurare il processo di registrazione fiscale che definisce una sequenza di fasi di registrazione fiscale nonché i connettori fiscali e i fornitori di documenti fiscali utilizzati per ogni fase.</span><span class="sxs-lookup"><span data-stu-id="622ae-110">Configure the fiscal registration process that defines a sequence of fiscal registration steps and the fiscal connectors and fiscal document providers that are used for each step.</span></span>
4. <span data-ttu-id="622ae-111">Assegnare il processo di registrazione fiscale ai profili funzionalità POS.</span><span class="sxs-lookup"><span data-stu-id="622ae-111">Assign the fiscal registration process to point of sale (POS) functionality profiles.</span></span>
5. <span data-ttu-id="622ae-112">Assegnare profili tecnici di connettore a profili hardware.</span><span class="sxs-lookup"><span data-stu-id="622ae-112">Assign connector technical profiles to hardware profiles.</span></span>

## <a name="set-up-a-fiscal-registration-process"></a><span data-ttu-id="622ae-113">Configurare un processo di registrazione fiscale</span><span class="sxs-lookup"><span data-stu-id="622ae-113">Set up a fiscal registration process</span></span>

<span data-ttu-id="622ae-114">Prima di utilizzare la funzionalità di integrazione fiscale, è necessario configurare le impostazioni descritte di seguito.</span><span class="sxs-lookup"><span data-stu-id="622ae-114">Before you use the fiscal integration functionality, you should configure the following settings.</span></span>

1. <span data-ttu-id="622ae-115">Aggiornare i parametri di vendita al dettaglio.</span><span class="sxs-lookup"><span data-stu-id="622ae-115">Update retail parameters.</span></span>

    1. <span data-ttu-id="622ae-116">Nella pagina **Parametri condivisi di vendita al dettaglio**, nella scheda **Generale**, impostare l'opzione **Abilita integrazione fiscale** su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="622ae-116">On the **Retail shared parameters** page, on the **General** tab, set the **Enable fiscal integration** option to **Yes**.</span></span> <span data-ttu-id="622ae-117">Nella scheda **Sequenze numeriche**, definire le sequenze numeriche per i seguenti riferimenti:</span><span class="sxs-lookup"><span data-stu-id="622ae-117">On the **Number sequences** tab, define the number sequences for the following references:</span></span>

        - <span data-ttu-id="622ae-118">Numero del profilo tecnico fiscale</span><span class="sxs-lookup"><span data-stu-id="622ae-118">Fiscal technical profile number</span></span>
        - <span data-ttu-id="622ae-119">Numero del gruppo di connettori fiscali</span><span class="sxs-lookup"><span data-stu-id="622ae-119">Fiscal connector group number</span></span>
        - <span data-ttu-id="622ae-120">Numero del processo di registrazione</span><span class="sxs-lookup"><span data-stu-id="622ae-120">Registration process number</span></span>

    2. <span data-ttu-id="622ae-121">Nella pagina **Parametri di vendita al dettaglio** definire la sequenza numerica per il numero di profilo funzionale fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-121">On the **Retail parameters** page, define the number sequence for the fiscal functional profile number.</span></span>

    > [!NOTE]
    > <span data-ttu-id="622ae-122">Le sequenze numeriche sono facoltative.</span><span class="sxs-lookup"><span data-stu-id="622ae-122">Number sequences are optional.</span></span> <span data-ttu-id="622ae-123">I numeri per tutte le entità di integrazione fiscale possono essere generati a partire da sequenze numeriche o manualmente.</span><span class="sxs-lookup"><span data-stu-id="622ae-123">Numbers for all fiscal integration entities can be generated either from number sequences or manually.</span></span>

2. <span data-ttu-id="622ae-124">Caricare le configurazioni di connettori fiscali e di fornitori di documenti fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-124">Upload configurations of fiscal connectors and fiscal document providers.</span></span>

    <span data-ttu-id="622ae-125">Un fornitore di documenti fiscali è responsabile della generazione di documenti fiscali che rappresentano eventi e transazioni di vendite al dettaglio registrati nel POS in un formato utilizzato anche per l'interazione con un dispositivo o servizio fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-125">A fiscal document provider is responsible for generating fiscal documents that represent retail transactions and events that are registered on the POS in a format that is also used for the interaction with a fiscal device or service.</span></span> <span data-ttu-id="622ae-126">Ad esempio, un fornitore di documenti fiscali potrebbe generare una rappresentazione di una ricevuta fiscale in un formato XML.</span><span class="sxs-lookup"><span data-stu-id="622ae-126">For example, a fiscal document provider might generate a representation of a fiscal receipt in an XML format.</span></span>
    
    <span data-ttu-id="622ae-127">Un connettore fiscale è responsabile della comunicazione con un dispositivo o servizio fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-127">A fiscal connector is responsible for the communication with a fiscal device or service.</span></span> <span data-ttu-id="622ae-128">Ad esempio, un connettore fiscale potrebbe inviare una ricevuta fiscale che un fornitore di documenti fiscali ha creato in un formato XML per una stampante fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-128">For example, a fiscal connector might send a fiscal receipt that a fiscal document provider created in an XML format to a fiscal printer.</span></span> <span data-ttu-id="622ae-129">Per ulteriori informazioni sui componenti di integrazione fiscale, vedere [Processo di registrazione fiscale ed esempi di integrazione fiscale per dispositivi fiscali](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span><span class="sxs-lookup"><span data-stu-id="622ae-129">For more details about fiscal integration components, see [Fiscal registration process and fiscal integration samples for fiscal devices](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

    1. <span data-ttu-id="622ae-130">Nella pagina **Connettori fiscali** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Connettori fiscali**), caricare una configurazione XML per ogni dispositivo o servizio che si prevede di utilizzare per scopi di integrazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-130">On the **Fiscal connectors** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connectors**), upload an XML configuration for each device or service that you plan to use for fiscal integration purposes.</span></span>

        > [!TIP]
        > <span data-ttu-id="622ae-131">Se si seleziona **Visualizza**, è possibile visualizzare tutti i profili funzionali e tecnici relativi al connettore fiscale corrente.</span><span class="sxs-lookup"><span data-stu-id="622ae-131">By selecting **View**, you can view all functional and technical profiles that are related to the current fiscal connector.</span></span>

    2. <span data-ttu-id="622ae-132">Nella pagina **Fornitori di documenti fiscali** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Fornitori di documenti fiscali**), caricare una configurazione XML per ogni dispositivo o servizio che si prevede di utilizzare.</span><span class="sxs-lookup"><span data-stu-id="622ae-132">On the **Fiscal document providers** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal document providers**), upload an XML configuration for each device or service that you plan to use.</span></span>

        > [!TIP]
        > <span data-ttu-id="622ae-133">Se si seleziona **Visualizza**, è possibile visualizzare tutti i profili funzionali relativi al fornitore di documenti fiscali corrente.</span><span class="sxs-lookup"><span data-stu-id="622ae-133">By selecting **View**, you can view all functional profiles that are related to the current fiscal document provider.</span></span>

    <span data-ttu-id="622ae-134">Per esempi di configurazioni di connettori fiscali e fornitori di documenti fiscali, vedere [Esempi di integrazione fiscale in Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="622ae-134">For examples of configurations of fiscal connectors and fiscal document providers, see [Fiscal integration samples in the Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span></span>

    > [!NOTE]
    > <span data-ttu-id="622ae-135">Il mapping dei dati viene considerato parte di un fornitore di documenti fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-135">Data mapping is considered part of a fiscal document provider.</span></span> <span data-ttu-id="622ae-136">Per impostare mapping di dati differenti per lo stesso connettore (ad esempio le normative specifiche di stato), è necessario creare diversi fornitori di documenti fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-136">To set up different data mappings for the same connector (for example, state-specific regulations), you should create different fiscal document providers.</span></span>

3. <span data-ttu-id="622ae-137">Creare profili funzionali e tecnici di connettore.</span><span class="sxs-lookup"><span data-stu-id="622ae-137">Create connector functional profiles and connector technical profiles.</span></span>

    1. <span data-ttu-id="622ae-138">Nella pagina **Profili funzionali del connettore** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Profili funzionali del connettore**), creare un profilo funzionale di connettore per ogni combinazione di connettore fiscale e di fornitore di documenti fiscali relativo a quel connettore fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-138">On the **Connector functional profiles** page (**Retail \> Channel setup \> Fiscal integration \> Connector functional profiles**), create a connector functional profile for each combination of a fiscal connector and a fiscal document provider that is related to this fiscal connector.</span></span>

        1. <span data-ttu-id="622ae-139">Selezionare un nome di connettore.</span><span class="sxs-lookup"><span data-stu-id="622ae-139">Select a connector name.</span></span>
        2. <span data-ttu-id="622ae-140">Selezionare un fornitore di documenti.</span><span class="sxs-lookup"><span data-stu-id="622ae-140">Select a document provider.</span></span>

        <span data-ttu-id="622ae-141">È possibile modificare i parametri di mapping dei dati in un profilo funzionale di connettore.</span><span class="sxs-lookup"><span data-stu-id="622ae-141">You can change the data mapping parameters in a connector functional profile.</span></span> <span data-ttu-id="622ae-142">Per ripristinare i parametri predefiniti definiti in una configurazione di fornitore di documenti fiscali, selezionare **Aggiorna**.</span><span class="sxs-lookup"><span data-stu-id="622ae-142">To restore the default parameters that are defined in the fiscal document provider configuration, select **Update**.</span></span>

        <span data-ttu-id="622ae-143">**Esempi**</span><span class="sxs-lookup"><span data-stu-id="622ae-143">**Examples**</span></span>
    
        |   | <span data-ttu-id="622ae-144">Formatta</span><span class="sxs-lookup"><span data-stu-id="622ae-144">Format</span></span> | <span data-ttu-id="622ae-145">Esempio</span><span class="sxs-lookup"><span data-stu-id="622ae-145">Example</span></span> |
        |---|--------|---------|
        | <span data-ttu-id="622ae-146">**Impostazioni aliquote IVA**</span><span class="sxs-lookup"><span data-stu-id="622ae-146">**VAT rates settings**</span></span> | <span data-ttu-id="622ae-147">value : VATrate</span><span class="sxs-lookup"><span data-stu-id="622ae-147">value : VATrate</span></span> | <span data-ttu-id="622ae-148">1 : 2000, 2 : 1800</span><span class="sxs-lookup"><span data-stu-id="622ae-148">1 : 2000, 2 : 1800</span></span> |
        | <span data-ttu-id="622ae-149">**Mapping codici IVA**</span><span class="sxs-lookup"><span data-stu-id="622ae-149">**VAT codes mapping**</span></span> | <span data-ttu-id="622ae-150">VATcode : value</span><span class="sxs-lookup"><span data-stu-id="622ae-150">VATcode : value</span></span> | <span data-ttu-id="622ae-151">vat20 : 1, vat18 : 2</span><span class="sxs-lookup"><span data-stu-id="622ae-151">vat20 : 1, vat18 : 2</span></span> |
        | <span data-ttu-id="622ae-152">**Mapping tipi di metodo di pagamento**</span><span class="sxs-lookup"><span data-stu-id="622ae-152">**Tender types mapping**</span></span> | <span data-ttu-id="622ae-153">TenderType : value</span><span class="sxs-lookup"><span data-stu-id="622ae-153">TenderType : value</span></span> | <span data-ttu-id="622ae-154">Cash : 1, Card : 2</span><span class="sxs-lookup"><span data-stu-id="622ae-154">Cash : 1, Card : 2</span></span> |

        > [!NOTE]
        > <span data-ttu-id="622ae-155">I profili funzionali di connettore sono specifici della società.</span><span class="sxs-lookup"><span data-stu-id="622ae-155">Connector functional profiles are company-specific.</span></span> <span data-ttu-id="622ae-156">Se si prevede di utilizzare la stessa combinazione di connettore fiscale e di fornitore di documenti fiscali in differenti società, è necessario creare un profilo funzionale di connettore per ogni società.</span><span class="sxs-lookup"><span data-stu-id="622ae-156">If you plan to use the same combination of a fiscal connector and a fiscal document provider in different companies, you should create a connector functional profile for each company.</span></span>

    2. <span data-ttu-id="622ae-157">Nella pagina **Profili tecnici del connettore** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Profili tecnici del connettore**) creare un profilo tecnico di connettore per ogni connettore fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-157">On the **Connector technical profiles** page (**Retail \> Channel setup \> Fiscal integration \> Connector technical profiles**), create a connector technical profile for each fiscal connector.</span></span>

        1. <span data-ttu-id="622ae-158">Selezionare un nome di connettore.</span><span class="sxs-lookup"><span data-stu-id="622ae-158">Select a connector name.</span></span>
        2. <span data-ttu-id="622ae-159">Selezionare un tipo di connettore.</span><span class="sxs-lookup"><span data-stu-id="622ae-159">Select a connector type.</span></span> <span data-ttu-id="622ae-160">Per i dispositivi collegati a una stazione hardware, selezionare **Locale**.</span><span class="sxs-lookup"><span data-stu-id="622ae-160">For devices that are connected to a Hardware station, select **Local**.</span></span>

            > [!NOTE]
            > <span data-ttu-id="622ae-161">Solo i connettori locali sono attualmente supportati.</span><span class="sxs-lookup"><span data-stu-id="622ae-161">Only local connectors are currently supported.</span></span>

        <span data-ttu-id="622ae-162">I parametri nelle schede **Dispositivo** e **Impostazioni** in un profilo tecnico di connettore possono essere modificati.</span><span class="sxs-lookup"><span data-stu-id="622ae-162">Parameters on the **Device** and **Settings** tabs in a connector technical profile can be changed.</span></span> <span data-ttu-id="622ae-163">Per ripristinare i parametri predefiniti definiti in una configurazione di connettore fiscale, selezionare **Aggiorna**.</span><span class="sxs-lookup"><span data-stu-id="622ae-163">To restore the default parameters that are defined in the fiscal connector configuration, select **Update**.</span></span> <span data-ttu-id="622ae-164">Durante il caricamento di una nuova versione di una configurazione XML, viene visualizzato un messaggio indicante che il connettore fiscale o il fornitore di documenti fiscali corrente è già in uso.</span><span class="sxs-lookup"><span data-stu-id="622ae-164">While a new version of an XML configuration is loaded, you receive a message that states that the current fiscal connector or fiscal document provider is already being used.</span></span> <span data-ttu-id="622ae-165">Questa procedura non sovrascrive le modifiche manuali effettuate precedentemente in profili funzionali di connettore e profili tecnici di connettore.</span><span class="sxs-lookup"><span data-stu-id="622ae-165">This procedure doesn't override manual changes that were previously made in connector functional profiles and connector technical profiles.</span></span> <span data-ttu-id="622ae-166">Per applicare il set di parametri predefinito da una nuova configurazione, nella pagina **Profili funzionali del connettore** o **Profili tecnici del connettore**, selezionare **Aggiorna**.</span><span class="sxs-lookup"><span data-stu-id="622ae-166">To apply the default set of parameters from a new configuration, on the **Connector functional profiles** page or the **Connector technical profiles** page, select **Update**.</span></span>

4. <span data-ttu-id="622ae-167">Creare gruppi di connettori fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-167">Create fiscal connector groups.</span></span>

    <span data-ttu-id="622ae-168">Un gruppo di connettori fiscali combina profili funzionali di connettori fiscali che eseguono funzioni identiche e sono utilizzati nella stessa fase di un processo di registrazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-168">A fiscal connector group combines functional profiles of fiscal connectors that perform identical functions and are used at the same step of a fiscal registration process.</span></span> <span data-ttu-id="622ae-169">Ad esempio, se è possibile utilizzare diversi modelli di stampante fiscale in un punto vendita al dettaglio, i connettori fiscali per quelle stampanti fiscali possono essere combinati in un gruppo di connettori fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-169">For example, if several fiscal printer models can be used in a retail store, fiscal connectors for those fiscal printers can be combined in a fiscal connector group.</span></span>
    
    1. <span data-ttu-id="622ae-170">Nella pagina **Gruppo di connettori fiscali** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Gruppi di connettori fiscali**), creare un nuovo gruppo di connettori fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-170">On the **Fiscal connector group** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connector groups**), create a new fiscal connector group.</span></span>
    2. <span data-ttu-id="622ae-171">Aggiungere profili funzionali al gruppo di connettori.</span><span class="sxs-lookup"><span data-stu-id="622ae-171">Add functional profiles to the connector group.</span></span> <span data-ttu-id="622ae-172">Nella scheda **Profili funzionali**, selezionare **Aggiungi** e selezionare un numero di profilo.</span><span class="sxs-lookup"><span data-stu-id="622ae-172">On the **Functional profiles** tab, select **Add**, and select a profile number.</span></span> <span data-ttu-id="622ae-173">Ogni connettore fiscale In un gruppo di connettori può avere un solo profilo funzionale.</span><span class="sxs-lookup"><span data-stu-id="622ae-173">Each fiscal connector in a connector group can only have one functional profile.</span></span>
    3. <span data-ttu-id="622ae-174">Per sospendere l'utilizzo del profilo funzionale, impostare l'opzione **Disabilita** su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="622ae-174">To suspend use of the functional profile, set the **Disable** option to **Yes**.</span></span> <span data-ttu-id="622ae-175">Questa modifica viene applicata solo al gruppo di connettori corrente.</span><span class="sxs-lookup"><span data-stu-id="622ae-175">This change affects only the current connector group.</span></span> <span data-ttu-id="622ae-176">È possibile continuare a utilizzare lo stesso profilo funzionale in altri gruppi di connettori.</span><span class="sxs-lookup"><span data-stu-id="622ae-176">You can continue to use the same functional profile in other connector groups.</span></span>

5. <span data-ttu-id="622ae-177">Creare un processo di registrazione fiscale</span><span class="sxs-lookup"><span data-stu-id="622ae-177">Create a fiscal registration process.</span></span>

    <span data-ttu-id="622ae-178">Un processo di registrazione fiscale è definito dalla sequenza dei passaggi di registrazione e dal gruppo di connettori utilizzato in ogni passaggio.</span><span class="sxs-lookup"><span data-stu-id="622ae-178">A fiscal registration process is defined by the sequence of registration steps and the connector group that is used for each step.</span></span>
    
    1. <span data-ttu-id="622ae-179">Nella pagina **Processo di registrazione fiscale** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Processi di registrazione fiscale**), creare un nuovo record per ogni processo univoco di registrazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-179">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), create a new record for each unique process of fiscal registration.</span></span>
    2. <span data-ttu-id="622ae-180">Aggiungere i passaggi di registrazione al processo:</span><span class="sxs-lookup"><span data-stu-id="622ae-180">Add registration steps to the process:</span></span>

        1. <span data-ttu-id="622ae-181">Selezionare **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="622ae-181">Select **Add**.</span></span>
        2. <span data-ttu-id="622ae-182">Selezionare un tipo di connettore fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-182">Select a fiscal connector type.</span></span>
        3. <span data-ttu-id="622ae-183">Nel campo **Numero gruppo**, selezionare un gruppo di connettori fiscali appropriato.</span><span class="sxs-lookup"><span data-stu-id="622ae-183">In the **Group number** field, select an appropriate fiscal connector group.</span></span>

6. <span data-ttu-id="622ae-184">Assegnare entità del processo di registrazione fiscale a profili POS.</span><span class="sxs-lookup"><span data-stu-id="622ae-184">Assign entities of the fiscal registration process to POS profiles.</span></span>

    1. <span data-ttu-id="622ae-185">Nella pagina **Profili funzionalità POS** (**Vendita al dettaglio \> Impostazione canale \> Impostazioni POS \> Profili POS \> Profili funzionalità**), assegnare il processo di registrazione fiscale a un profilo funzionalità POS.</span><span class="sxs-lookup"><span data-stu-id="622ae-185">On the **POS functionality profiles** page (**Retail \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**), assign the fiscal registration process to a POS functionality profile.</span></span> <span data-ttu-id="622ae-186">Selezionare **Modifica**, quindi nella scheda **Processo di registrazione fiscale**, nel campo **Numero processo**, selezionare un processo.</span><span class="sxs-lookup"><span data-stu-id="622ae-186">Select **Edit**, and then, on the **Fiscal registration process** tab, in the **Process number** field, select a process.</span></span>
    2. <span data-ttu-id="622ae-187">Nella pagina **Profilo hardware POS** (**Vendita al dettaglio \> Impostazione canale \> Impostazioni POS \> Profili POS \> Profili hardware**), assegnare profili tecnici di connettore a un profilo hardware.</span><span class="sxs-lookup"><span data-stu-id="622ae-187">On the **POS hardware profile** page (**Retail \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**), assign connector technical profiles to a hardware profile.</span></span> <span data-ttu-id="622ae-188">Selezionare **Modifica**, aggiungere una riga nella scheda **Periferiche fiscali**, quindi nel campo **Numero profilo**, selezionare un profilo tecnico di connettore.</span><span class="sxs-lookup"><span data-stu-id="622ae-188">Select **Edit**, add a line on the **Fiscal peripherals** tab, and then, in the **Profile number** field, select a connector technical profile.</span></span>

    > [!NOTE]
    > <span data-ttu-id="622ae-189">È possibile aggiungere più profili tecnici a uno stesso profilo hardware.</span><span class="sxs-lookup"><span data-stu-id="622ae-189">You can add several technical profiles to the same hardware profile.</span></span> <span data-ttu-id="622ae-190">Tuttavia, un profilo hardware o un profilo funzionalità POS deve avere una sola intersezione con qualsiasi gruppo di connettori fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-190">However, a hardware profile or POS functionality profile should have only one intersection with any fiscal connector group.</span></span>

    <span data-ttu-id="622ae-191">Il flusso di registrazione fiscale viene definito dal processo di registrazione fiscale nonché da alcuni parametri dei componenti di integrazione fiscale: l'estensione di Commerce Runtime per il fornitore di documenti fiscali e l'estensione stazione hardware per il connettore fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-191">The fiscal registration flow is defined by the fiscal registration process and also by some parameters of fiscal integration components: the Commerce runtime extension for the fiscal document provider and the Hardware station extension for the fiscal connector.</span></span>

    - <span data-ttu-id="622ae-192">La sottoscrizione di eventi e transazioni alla registrazione fiscale è predefinita nel fornitore di documenti fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-192">The subscription of events and transactions to fiscal registration is predefined in the fiscal document provider.</span></span>
    - <span data-ttu-id="622ae-193">Il fornitore di documenti fiscali è anche responsabile dell'identificazione del connettore fiscale utilizzato per la registrazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-193">The fiscal document provider is also responsible for identifying the fiscal connector that is used for fiscal registration.</span></span> <span data-ttu-id="622ae-194">Il fornitore abbina i profili funzionali di connettore inclusi nel gruppo di connettori fiscali specificato per il passaggio corrente del processo di registrazione fiscale al profilo tecnico di connettore assegnato al profilo hardware della stazione hardware a cui il POS è associato.</span><span class="sxs-lookup"><span data-stu-id="622ae-194">It matches the connector functional profiles that are included in the fiscal connector group that is specified for the current step of the fiscal registration process with the connector technical profile that is assigned to the hardware profile of the Hardware station that the POS is paired to.</span></span>
    - <span data-ttu-id="622ae-195">Il fornitore di documenti fiscali utilizza le impostazioni di mapping dei dati nella configurazione di fornitore di documenti fiscali per trasformare i dati di eventi/transazioni come imposte e pagamenti durante la generazione di un documento fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-195">The fiscal document provider uses the data mapping settings from the fiscal document provider configuration to transform transaction/event data such as taxes and payments while a fiscal document is generated.</span></span>
    - <span data-ttu-id="622ae-196">Quando il fornitore di documenti fiscali genera un documento fiscale, il connettore fiscale può inviarlo al dispositivo fiscale così com'è oppure analizzarlo e trasformarlo in una sequenza di comandi dell'API del dispositivo, a seconda di come la comunicazione viene gestita.</span><span class="sxs-lookup"><span data-stu-id="622ae-196">When the fiscal document provider generates a fiscal document, the fiscal connector can either send it to the fiscal device as is, or parse it and transform it into a sequence of commands of the device application programming interface (API), depending on how the communication is handled.</span></span>

7. <span data-ttu-id="622ae-197">Nella pagina **Processo di registrazione fiscale** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Processi di registrazione fiscale**), selezionare **Convalida** per convalidare il processo di registrazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-197">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), select **Validate** to validate the fiscal registration process.</span></span>

    <span data-ttu-id="622ae-198">Si consiglia di eseguire questo tipo di convalida nei seguenti casi:</span><span class="sxs-lookup"><span data-stu-id="622ae-198">We recommend that you run this type of validation in the following cases:</span></span>
    
    - <span data-ttu-id="622ae-199">Dopo aver completato tutte le impostazioni per un nuovo processo di registrazione, tra cui l'assegnazione di processi di registrazione a profili di funzionalità POS e a profili hardware.</span><span class="sxs-lookup"><span data-stu-id="622ae-199">After you've completed all the settings for a new registration process, including when you assign registration processes to POS functionality profiles and hardware profiles.</span></span>
    - <span data-ttu-id="622ae-200">Dopo aver apportato modifiche a un processo di registrazione fiscale esistente e tali modifiche possono comportare la selezione di un connettore fiscale differente al runtime (ad esempio, se si modifica il gruppo di connettori per un passaggio del processo di registrazione fiscale, si abilita un profilo funzionale di connettore in un gruppo di connettori o si aggiunge un nuovo profilo funzionale di connettore a un gruppo di connettori).</span><span class="sxs-lookup"><span data-stu-id="622ae-200">After you make changes to an existing fiscal registration process, and those changes might cause a different fiscal connector to be selected at runtime (for example, if you change the connector group for a fiscal registration process step, enable a connector functional profile in a connector group, or add a new connector functional profile to a connector group).</span></span>
    - <span data-ttu-id="622ae-201">Dopo aver apportato modifiche all'assegnazione dei profili tecnici di connettore ai profili hardware.</span><span class="sxs-lookup"><span data-stu-id="622ae-201">After you make changes in the assignment of connector technical profiles to hardware profiles.</span></span>

8. <span data-ttu-id="622ae-202">Nella pagina **Programmazione distribuzione**, eseguire i processi **1090** e **1070** per trasferire i dati ai database del canale.</span><span class="sxs-lookup"><span data-stu-id="622ae-202">On the **Distribution scheduler** page, run the **1070** and **1090** jobs to transfer data to the channel database.</span></span>

## <a name="set-up-fiscal-texts-for-discounts"></a><span data-ttu-id="622ae-203">Impostare testi fiscali per sconti</span><span class="sxs-lookup"><span data-stu-id="622ae-203">Set up fiscal texts for discounts</span></span>

<span data-ttu-id="622ae-204">In alcuni casi, è necessario stampare un testo speciale su una ricevuta fiscale se viene applicato uno sconto.</span><span class="sxs-lookup"><span data-stu-id="622ae-204">In some cases, a special text must be printed on a fiscal receipt if a discount is applied.</span></span> <span data-ttu-id="622ae-205">È possibile impostare testi fiscali per sconti nella pagina **Gruppo di connettori fiscali** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Gruppi di connettori fiscali**).</span><span class="sxs-lookup"><span data-stu-id="622ae-205">You can set up fiscal texts for discounts on the **Fiscal connector group** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connector groups**).</span></span>

- <span data-ttu-id="622ae-206">Per gli sconti manuali applicati dal POS, è necessario impostare un testo fiscale per il codice informativo o il gruppo di codici informativi specificato come codice informativo **Sconto prodotti** nel profilo funzionalità POS.</span><span class="sxs-lookup"><span data-stu-id="622ae-206">For manual discounts that are applied at the POS, you should set a fiscal text for the info code or info code group that is specified as the **Product discount** info code in the POS functionality profile.</span></span>

    1. <span data-ttu-id="622ae-207">Nella pagina **Gruppo di connettori fiscali**, selezionare **Testo per ricevuta fiscale**.</span><span class="sxs-lookup"><span data-stu-id="622ae-207">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="622ae-208">Nella scheda **Codici informativi** selezionare **Aggiungi** e quindi un codice informativo o un gruppo di codici informativi.</span><span class="sxs-lookup"><span data-stu-id="622ae-208">On the **Info codes** tab, select **Add**, and select an info code or info code group.</span></span>
    3. <span data-ttu-id="622ae-209">In **Numero codice informativo**, selezionare un valore.</span><span class="sxs-lookup"><span data-stu-id="622ae-209">In the **Info code number**, select a value.</span></span>
    4. <span data-ttu-id="622ae-210">Nel campo **Numero sottocodice**, selezionare un valore se un sottocodice è necessario per il codice informativo selezionato.</span><span class="sxs-lookup"><span data-stu-id="622ae-210">In the **Subcode number** field, select a value if a subcode is required for the selected info code.</span></span>
    5. <span data-ttu-id="622ae-211">Nel campo **Testo per ricevuta fiscale**, specificare un testo fiscale che deve essere stampato su una ricevuta fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-211">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>
    6. <span data-ttu-id="622ae-212">Impostare **Stampa input utente su ricevuta fiscale** su **Sì** per sostituire il testo su una ricevuta fiscale con informazioni che un utente immette manualmente dal POS.</span><span class="sxs-lookup"><span data-stu-id="622ae-212">Set the **Print user input on fiscal receipt** option to **Yes** to override the text on a fiscal receipt with information that a user manually enters at the POS.</span></span> <span data-ttu-id="622ae-213">Questa opzione si applica solo ai codici informativi il cui tipo di input è **Testo**.</span><span class="sxs-lookup"><span data-stu-id="622ae-213">This option applies only to info codes that have an input type of **Text**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="622ae-214">È possibile specificare un testo fiscale per diversi codici informativi per supportare gli scenari in cui sono utilizzati gruppi di codici informativi, codici informativi collegati e codici informativi attivati.</span><span class="sxs-lookup"><span data-stu-id="622ae-214">You can specify a fiscal text for several info codes to support scenarios where info code groups, linked info codes, and triggered info codes are used.</span></span> <span data-ttu-id="622ae-215">In questi scenari, la ricevuta fiscale conterrà i testi fiscali di tutti i codici informativi collegati alla riga di transazione a cui lo sconto è stato applicato.</span><span class="sxs-lookup"><span data-stu-id="622ae-215">In these scenarios, the fiscal receipt will contain the fiscal texts from all info codes that are linked to the transaction line where the discount was applied.</span></span>

- <span data-ttu-id="622ae-216">Per gli sconti specifici del canale, è necessario definire un testo fiscale per l'ID sconto.</span><span class="sxs-lookup"><span data-stu-id="622ae-216">For channel-specific discounts, you should define a fiscal text for the discount ID.</span></span>

    1. <span data-ttu-id="622ae-217">Nella pagina **Gruppo di connettori fiscali**, selezionare **Testo per ricevuta fiscale**.</span><span class="sxs-lookup"><span data-stu-id="622ae-217">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="622ae-218">Nella scheda **Sconti** selezionare **Aggiungi** e un ID sconto.</span><span class="sxs-lookup"><span data-stu-id="622ae-218">On the **Discounts** tab, select **Add**, and select a discount ID.</span></span>
    3. <span data-ttu-id="622ae-219">Nel campo **Testo per ricevuta fiscale**, specificare un testo fiscale che deve essere stampato su una ricevuta fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-219">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>

    > [!NOTE]
    > <span data-ttu-id="622ae-220">Se più sconti sono applicati alla stessa riga di transazione, la ricevuta fiscale conterrà i testi fiscali di tutti gli sconti collegati a tale riga di transazione.</span><span class="sxs-lookup"><span data-stu-id="622ae-220">If several discounts are applied to the same transaction line, the fiscal receipt will contain fiscal texts from all discounts that are linked to those transaction line.</span></span>

## <a name="set-error-handling-settings"></a><span data-ttu-id="622ae-221">Configurare le impostazioni di gestione degli errori</span><span class="sxs-lookup"><span data-stu-id="622ae-221">Set error handling settings</span></span>

<span data-ttu-id="622ae-222">Le opzioni di gestione degli errori disponibili nell'integrazione fiscale sono impostate nel processo di registrazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-222">The error handling options that are available in the fiscal integration are set in the fiscal registration process.</span></span> <span data-ttu-id="622ae-223">Per ulteriori informazioni sulla gestione degli errori nell'integrazione fiscale, vedere [Gestione errori](fiscal-integration-for-retail-channel.md#error-handling).</span><span class="sxs-lookup"><span data-stu-id="622ae-223">For more information about error handling in the fiscal integration, see [Error handling](fiscal-integration-for-retail-channel.md#error-handling).</span></span>

1. <span data-ttu-id="622ae-224">Nella pagina **Processo di registrazione fiscale** (**Vendita al dettaglio \> Impostazione canale \> Integrazione fiscale \> Processi di registrazione fiscale**), è possibile impostare i seguenti parametri per ogni passaggio del processo di registrazione fiscale:</span><span class="sxs-lookup"><span data-stu-id="622ae-224">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), you can set the following parameters for each step of the fiscal registration process:</span></span>

    - <span data-ttu-id="622ae-225">**Consenti di ignorare** - Questo parametro abilita l'opzione **Ignora** nella finestra di dialogo per la gestione degli errori.</span><span class="sxs-lookup"><span data-stu-id="622ae-225">**Allow skip** – This parameter enables the **Skip** option in the error handling dialog box.</span></span>
    - <span data-ttu-id="622ae-226">**Consenti di contrassegnare come registrato** - Questo parametro abilita l'opzione **Contrassegna come registrato** nella finestra di dialogo per la gestione degli errori.</span><span class="sxs-lookup"><span data-stu-id="622ae-226">**Allow mark as registered** – This parameter enables the **Mark as registered** option in the error handling dialog box.</span></span>

2. <span data-ttu-id="622ae-227">Le opzioni **Contrassegna come registrato** e **Ignora** nella finestra di dialogo per la gestione degli errori richiedono l'autorizzazione **Consenti di ignorare o contrassegnare come registrato**.</span><span class="sxs-lookup"><span data-stu-id="622ae-227">The **Skip** and **Mark as registered** options in the error handling dialog box require the **Allow skip or mark as registered** permission.</span></span> <span data-ttu-id="622ae-228">Di conseguenza, nella pagina **Gruppi di autorizzazione** (**Vendita al dettaglio \> Dipendenti \> Gruppi di autorizzazioni**), abilitare l'autorizzazione **Consenti di ignorare o contrassegnare come registrato**.</span><span class="sxs-lookup"><span data-stu-id="622ae-228">Therefore, on the **Permission groups** page (**Retail \> Employees \> Permission groups**), enable the **Allow skip or mark as registered** permission.</span></span>
3. <span data-ttu-id="622ae-229">Le opzioni **Contrassegna come registrato** e **Ignora** consentono agli operatori di immettere informazioni aggiuntive quando la registrazione fiscale ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="622ae-229">The **Skip** and **Mark as registered** options let operators enter additional information when fiscal registration fails.</span></span> <span data-ttu-id="622ae-230">Per rendere questa funzionalità disponibile, è necessario specificare i codici informativi **Contrassegna come registrato** e **Ignora** in un gruppo di connettori fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-230">To make this functionality available, you should specify the **Skip** and **Mark as registered** info codes on a fiscal connector group.</span></span> <span data-ttu-id="622ae-231">Le informazioni immesse dagli operatori sono salvate come transazione codice informativo collegata alla transazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-231">The information that operators enter is then saved as an info code transaction that is linked to the fiscal transaction.</span></span> <span data-ttu-id="622ae-232">Per ulteriori informazioni sui codici informativi, vedere [Codici informativi e gruppi di codici informativi](../info-codes-retail.md).</span><span class="sxs-lookup"><span data-stu-id="622ae-232">For more details about info codes, see [Info codes and info code groups](../info-codes-retail.md).</span></span>

    > [!NOTE]
    > <span data-ttu-id="622ae-233">La funzione di attivazione **Prodotto** non è supportata per i codici informativi utilizzati per **Ignora** e **Contrassegna come registrato** nei gruppi di connettori fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-233">The **Product** trigger function isn't supported for the info codes that are used for **Skip** and **Mark as registered** in fiscal connector groups.</span></span>

    - <span data-ttu-id="622ae-234">Nella pagina **Gruppo di connettori fiscali**, nella scheda **Codici informativi**, selezionare i codici informativi o i gruppi di codici informativi nei campi **Ignora** e **Contrassegna come registrato**.</span><span class="sxs-lookup"><span data-stu-id="622ae-234">On the **Fiscal connector group** page, on the **Info codes** tab, select info codes or info code groups in the **Skip** and **Mark as registered** fields.</span></span>

    > [!NOTE]
    > <span data-ttu-id="622ae-235">Un documento fiscale e un documento non fiscale possono essere generati per qualsiasi passaggio di un processo di registrazione fiscale.</span><span class="sxs-lookup"><span data-stu-id="622ae-235">One fiscal document and one non-fiscal document can be generated on any step of a fiscal registration process.</span></span> <span data-ttu-id="622ae-236">Un'estensione di fornitore di documenti fiscali identifica ogni tipo di transazione o evento come correlato a documenti fiscali o non fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-236">A fiscal document provider extension identifies every type of transaction or event as related to fiscal or non-fiscal documents.</span></span> <span data-ttu-id="622ae-237">La funzionalità di gestione degli errori è utilizzabile solo con documenti fiscali.</span><span class="sxs-lookup"><span data-stu-id="622ae-237">The error handling feature applies only to fiscal documents.</span></span>
    >
    > - <span data-ttu-id="622ae-238">**Documento fiscale** - Un documento obbligatorio che deve essere registrato correttamente (ad esempio, una ricevuta fiscale).</span><span class="sxs-lookup"><span data-stu-id="622ae-238">**Fiscal document** – A mandatory document that should be registered successfully (for example, a fiscal receipt).</span></span>
    > - <span data-ttu-id="622ae-239">**Documento non fiscale** - Un documento supplementare per la transazione o l'evento (ad esempio, una distinta di gift card).</span><span class="sxs-lookup"><span data-stu-id="622ae-239">**Non-fiscal document** – A supplementary document for the transaction or event (for example, a gift card slip).</span></span>

## <a name="set-up-fiscal-xz-reports-from-the-pos"></a><span data-ttu-id="622ae-240">Configurare report X/Z fiscali dal POS</span><span class="sxs-lookup"><span data-stu-id="622ae-240">Set up fiscal X/Z reports from the POS</span></span>

<span data-ttu-id="622ae-241">Per abilitare report X/Z fiscali per l'esecuzione dal POS, è necessario aggiungere nuovi pulsanti a un layout POS.</span><span class="sxs-lookup"><span data-stu-id="622ae-241">To enable fiscal X/Z reports to be run from the POS, you should add new buttons to a POS layout.</span></span>

- <span data-ttu-id="622ae-242">Nella pagina **Griglie dei pulsanti**, seguire le istruzioni in [Aggiungere un pulsante di operazione al layout POS in Retail Headquarters](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) per installare il designer e aggiornare un layout POS.</span><span class="sxs-lookup"><span data-stu-id="622ae-242">On the **Button grids** page, follow the instructions in [Add a custom operation button to the POS layout in Retail headquarters](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) to install the designer and update a POS layout.</span></span>

    1. <span data-ttu-id="622ae-243">Selezionare il layout da aggiornare.</span><span class="sxs-lookup"><span data-stu-id="622ae-243">Select the layout to update.</span></span> 
    2. <span data-ttu-id="622ae-244">Aggiungere un nuovo pulsante e impostare la proprietà del pulsante **Stampa X fiscale**.</span><span class="sxs-lookup"><span data-stu-id="622ae-244">Add a new button, and set the **Print fiscal X** button property.</span></span>
    3. <span data-ttu-id="622ae-245">Aggiungere un nuovo pulsante e impostare la proprietà del pulsante **Stampa Z fiscale**.</span><span class="sxs-lookup"><span data-stu-id="622ae-245">Add a new button, and set the **Print fiscal Z** button property.</span></span>
    4. <span data-ttu-id="622ae-246">Nella pagina **Programmazione della distribuzione**, eseguire il processo **1090** per trasferire le modifiche al database del canale.</span><span class="sxs-lookup"><span data-stu-id="622ae-246">On the **Distribution schedule** page, run the **1090** job to transfer changes to the channel database.</span></span>

