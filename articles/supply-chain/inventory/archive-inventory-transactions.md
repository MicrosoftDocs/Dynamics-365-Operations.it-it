---
title: Archiviare le transazioni di magazzino
description: In questo argomento viene descritto come archiviare i dati delle transazioni di magazzino per migliorare le prestazioni del sistema.
author: sherry-zheng
ms.date: 03/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: InventTransArchiveProcessForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: chuzheng
ms.search.validFrom: 2021-03-01
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: 8b61e65d3a641a1e3d73192853c832d57ed17401
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 05/11/2021
ms.locfileid: "6021273"
---
# <a name="archive-inventory-transactions"></a><span data-ttu-id="eaa70-103">Archiviare le transazioni di magazzino</span><span class="sxs-lookup"><span data-stu-id="eaa70-103">Archive inventory transactions</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="eaa70-104">Nel tempo, la tabella delle transazioni di magazzino (`InventTrans`) continuerà a crescere e a utilizzare più spazio nel database.</span><span class="sxs-lookup"><span data-stu-id="eaa70-104">Over time, the inventory transactions table (`InventTrans`) will continue to grow and consume more database space.</span></span> <span data-ttu-id="eaa70-105">Pertanto, le query eseguite sulla tabella diventeranno gradualmente più lente.</span><span class="sxs-lookup"><span data-stu-id="eaa70-105">Therefore, queries that are made against the table will gradually become slower.</span></span> <span data-ttu-id="eaa70-106">In questo argomento viene descritto come utilizzare la funzionalità *Archivio transazioni di magazzino* per archiviare i dati relativi alle transazioni di magazzino e migliorare le prestazioni del sistema.</span><span class="sxs-lookup"><span data-stu-id="eaa70-106">This topic describes how you can use the *Inventory transactions archive* feature to archive data about inventory transactions to help improve system performance.</span></span>

> [!NOTE]
> <span data-ttu-id="eaa70-107">Solo le transazioni di magazzino aggiornate finanziariamente possono essere archiviate in un periodo contabile chiuso selezionato.</span><span class="sxs-lookup"><span data-stu-id="eaa70-107">Only financially updated inventory transactions can be archived in a selected closed ledger period.</span></span> <span data-ttu-id="eaa70-108">Per essere archiviate, le transazioni di magazzino in uscita aggiornate finanziariamente devono avere lo stato *Venduto* e le transazioni di magazzino in entrata devono avere lo stato *Acquistato*.</span><span class="sxs-lookup"><span data-stu-id="eaa70-108">To be archived, financially updated outbound inventory transactions must have an issue status of *Sold*, and inbound inventory transactions must have a receipt status of *Purchased*.</span></span>

<span data-ttu-id="eaa70-109">Quando si archiviano transazioni di magazzino, tutte le transazioni correlate vengono spostate nella tabella `InventTransArchive`.</span><span class="sxs-lookup"><span data-stu-id="eaa70-109">When you archive inventory transactions, all related transactions are moved to the `InventTransArchive` table.</span></span> <span data-ttu-id="eaa70-110">Le transazioni di magazzino in uscita e quelle in entrata sono archiviate separatamente, in base alla combinazione di ID articolo (`itemId`) e ID dimensione inventario (`inventDimId`) e sono inserite nel riepilogo delle transazioni in uscita e in entrata.</span><span class="sxs-lookup"><span data-stu-id="eaa70-110">Inventory issue transactions and inventory receipt transactions are archived separately, based on the combination of the item ID (`itemId`) and inventory dimension ID (`inventDimId`), and they are put into the summarized issue and summarized receipt transactions.</span></span>

<span data-ttu-id="eaa70-111">Se una combinazione di `itemId` e `inventDimId` contiene solo una transazione in entrata o in uscita, la transazione non verrà archiviata.</span><span class="sxs-lookup"><span data-stu-id="eaa70-111">If an `itemId` and `inventDimId` combination contains only one receipt or issue transaction, the transaction won't be archived.</span></span>

## <a name="turn-on-the-feature-in-your-system"></a><span data-ttu-id="eaa70-112">Attiva la funzionalità nel tuo sistema</span><span class="sxs-lookup"><span data-stu-id="eaa70-112">Turn on the feature in your system</span></span>

<span data-ttu-id="eaa70-113">Se il sistema in uso non include già le funzionalità descritte in questo argomento, vedere [Gestione funzionalità](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) e attivare la funzionalità *Archivio transazioni di magazzino*.</span><span class="sxs-lookup"><span data-stu-id="eaa70-113">If your system doesn't already include the features that is described in this topic, go to [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Inventory transactions archive* feature.</span></span> <span data-ttu-id="eaa70-114">Da notare che questa funzionalità non può essere disabilitata una volta abilitata.</span><span class="sxs-lookup"><span data-stu-id="eaa70-114">Note that this feature cannot be disabled once it has been enabled.</span></span>

## <a name="things-to-consider-before-you-archive-inventory-transactions"></a><span data-ttu-id="eaa70-115">Aspetti da considerare prima di archiviare le transazioni di magazzino</span><span class="sxs-lookup"><span data-stu-id="eaa70-115">Things to consider before you archive inventory transactions</span></span>

<span data-ttu-id="eaa70-116">Prima di archiviare le transazioni di magazzino, è necessario considerare i seguenti scenari aziendali, poiché saranno interessati dall'operazione:</span><span class="sxs-lookup"><span data-stu-id="eaa70-116">Before you archive inventory transactions, you should consider the following business scenarios, because they will be affected by the operation:</span></span>

- <span data-ttu-id="eaa70-117">Quando si controllano le transazioni di magazzino di documenti correlati, come righe di ordine fornitore, queste verranno visualizzate come archiviate.</span><span class="sxs-lookup"><span data-stu-id="eaa70-117">When you audit inventory transactions from related documents, such as purchase order lines, they will be shown as archived.</span></span> <span data-ttu-id="eaa70-118">Per esaminare le transazioni archiviate, selezionare **Gestione articoli \> Attività periodiche \> Pulisci \> Archivio transazioni di magazzino**.</span><span class="sxs-lookup"><span data-stu-id="eaa70-118">To review the archived transactions, you must go to **Inventory management \> Periodic tasks \> Clean up \> Inventory transactions archive**.</span></span>
- <span data-ttu-id="eaa70-119">La chiusura dell'inventario non può essere annullata per periodi archiviati.</span><span class="sxs-lookup"><span data-stu-id="eaa70-119">Inventory closing can't be canceled for archived periods.</span></span> <span data-ttu-id="eaa70-120">Per poter annullare la chiusura di un inventario, è necessario stornare l'archivio delle transazioni di magazzino per il periodo pertinente.</span><span class="sxs-lookup"><span data-stu-id="eaa70-120">Before you can cancel an inventory closing, you must reverse the inventory transaction archive for the relevant period.</span></span>
- <span data-ttu-id="eaa70-121">La conversione in costo standard non può essere eseguita per periodi archiviati.</span><span class="sxs-lookup"><span data-stu-id="eaa70-121">Standard cost conversion can't be done for archived periods.</span></span> <span data-ttu-id="eaa70-122">Per poter eseguire la conversione in costo standard, è necessario stornare l'archivio delle transazioni di magazzino per il periodo pertinente.</span><span class="sxs-lookup"><span data-stu-id="eaa70-122">Before you can do standard cost conversion, you must reverse the inventory transaction archive for the relevant period.</span></span>
- <span data-ttu-id="eaa70-123">I report relativi alle scorte originati da transazioni di magazzino verranno modificati quando si archiviano le transazioni di magazzino.</span><span class="sxs-lookup"><span data-stu-id="eaa70-123">Inventory reports that are sourced from inventory transactions will be affected when you archive inventory transactions.</span></span> <span data-ttu-id="eaa70-124">Questi report includono il report sull'aging delle scorte e i rapporti sui valori di inventario.</span><span class="sxs-lookup"><span data-stu-id="eaa70-124">These reports include the inventory aging report and inventory value reports.</span></span>
- <span data-ttu-id="eaa70-125">Le previsioni di magazzino potrebbero essere alterate se vengono eseguite durante l'orizzonte temporale dei periodi archiviati.</span><span class="sxs-lookup"><span data-stu-id="eaa70-125">Inventory forecasts might be affected if they are run during the time horizon of archived periods.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="eaa70-126">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="eaa70-126">Prerequisites</span></span>

<span data-ttu-id="eaa70-127">Le transazioni di magazzino possono essere archiviate solo durante i periodi in cui vengono soddisfatte le seguenti condizioni:</span><span class="sxs-lookup"><span data-stu-id="eaa70-127">Inventory transactions can be archived only during periods where the following conditions are met:</span></span>

- <span data-ttu-id="eaa70-128">Il periodo contabile deve essere chiuso.</span><span class="sxs-lookup"><span data-stu-id="eaa70-128">The ledger period must be closed.</span></span>
- <span data-ttu-id="eaa70-129">La chiusura dell'inventario deve essere eseguita alla data di fine periodo dell'archivio o successivamente.</span><span class="sxs-lookup"><span data-stu-id="eaa70-129">Inventory closing must be run on or after the to-period date of the archive.</span></span>
- <span data-ttu-id="eaa70-130">Il periodo deve essere almeno un anno prima della data di inizio periodo dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-130">The period must be at least one year before the from-period date of the archive.</span></span>
- <span data-ttu-id="eaa70-131">Non devono esistere ricalcoli di inventario.</span><span class="sxs-lookup"><span data-stu-id="eaa70-131">There must not be any existing inventory recalculations.</span></span>

## <a name="archive-inventory-transactions"></a><span data-ttu-id="eaa70-132">Archiviare transazioni di magazzino</span><span class="sxs-lookup"><span data-stu-id="eaa70-132">Archive inventory transactions</span></span>

<span data-ttu-id="eaa70-133">Per archiviare transazioni di magazzino, attenersi alla seguente procedura.</span><span class="sxs-lookup"><span data-stu-id="eaa70-133">To archive inventory transactions, follow these steps.</span></span>

1. <span data-ttu-id="eaa70-134">Selezionare **Gestione articoli** \> **Attività periodiche** \> **Pulisci** \> **Archivio transazioni di inventario**.</span><span class="sxs-lookup"><span data-stu-id="eaa70-134">Go to **Inventory management** \> **Periodic tasks** \> **Clean up** \> **Inventory transaction archive**.</span></span>

    <span data-ttu-id="eaa70-135">Viene visualizzata la pagina **Archivio transazioni di magazzino** con un elenco dei record di processo archiviati.</span><span class="sxs-lookup"><span data-stu-id="eaa70-135">The **Inventory transactions archive** page appears and shows a list of archived process records.</span></span>

    <span data-ttu-id="eaa70-136">![Pagina Archivio transazioni di magazzino](media/archive-inventory-empty.png "Pagina Archivio transazioni di magazzino")</span><span class="sxs-lookup"><span data-stu-id="eaa70-136">![Inventory transactions archive page](media/archive-inventory-empty.png "Inventory transactions archive page")</span></span>

1. <span data-ttu-id="eaa70-137">Nel riquadro Azioni selezionare **Archivio transazioni di magazzino** per creare un archivio delle transazioni di magazzino.</span><span class="sxs-lookup"><span data-stu-id="eaa70-137">On the Action Pane, select **Inventory transactions archive** to create an inventory transaction archive.</span></span>
1. <span data-ttu-id="eaa70-138">Nella finestra di dialogo **Archivio transazioni di magazzino**, nella scheda dettaglio **Parametri**, impostare i seguenti campi:</span><span class="sxs-lookup"><span data-stu-id="eaa70-138">In the **Inventory transactions archive** dialog box, on the **Parameters** FastTab, set the following fields:</span></span>

    - <span data-ttu-id="eaa70-139">**Data di inizio del periodo contabile chiuso** - Selezionare la data della prima transazione da includere nell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-139">**From date in closed ledger period** – Select the earliest transaction date to include in the archive.</span></span>
    - <span data-ttu-id="eaa70-140">**Data di fine del periodo contabile chiuso** - Selezionare la data dell'ultima transazione da includere nell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-140">**To date in closed ledger period** – Select the latest transaction date to include in the archive.</span></span>

    <span data-ttu-id="eaa70-141">![Finestra di dialogo Archivio transazioni di magazzino](media/archive-inventory-dates.png "Finestra di dialogo Archivio transazioni di magazzino")</span><span class="sxs-lookup"><span data-stu-id="eaa70-141">![Inventory transactions archive dialog box](media/archive-inventory-dates.png "Inventory transactions archive dialog box")</span></span>

    > [!NOTE]
    > <span data-ttu-id="eaa70-142">Solo i periodi che soddisfano i [prerequisiti](#prerequisites) saranno selezionabili.</span><span class="sxs-lookup"><span data-stu-id="eaa70-142">Only periods that meet the [prerequisites](#prerequisites) will be available for selection.</span></span>

1. <span data-ttu-id="eaa70-143">Nella Scheda dettaglio **Esecuzione in background**, impostare i dettagli dell'elaborazione batch come necessario.</span><span class="sxs-lookup"><span data-stu-id="eaa70-143">On the **Run in the background** FastTab, set up batch processing details as you require.</span></span> <span data-ttu-id="eaa70-144">Seguire i passaggi usuali per i processi batch in Microsoft Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="eaa70-144">Follow the usual steps for batch jobs in Microsoft Dynamics 365 Supply Chain Management.</span></span>
1. <span data-ttu-id="eaa70-145">Selezionare **OK**.</span><span class="sxs-lookup"><span data-stu-id="eaa70-145">Select **OK**.</span></span>
1. <span data-ttu-id="eaa70-146">Viene visualizzato un messaggio che richiede di confermare se si desidera continuare.</span><span class="sxs-lookup"><span data-stu-id="eaa70-146">You receive a message that prompts you to confirm that you want to continue.</span></span> <span data-ttu-id="eaa70-147">Leggere attentamente il messaggio, quindi selezionare **Sì** per continuare.</span><span class="sxs-lookup"><span data-stu-id="eaa70-147">Read the message carefully, and then select **Yes** if you want to continue.</span></span>

    <span data-ttu-id="eaa70-148">Viene visualizzato un messaggio che informa che il processo di archiviazione delle transazioni di magazzino è stato aggiunto alla coda batch.</span><span class="sxs-lookup"><span data-stu-id="eaa70-148">You receive a message that states that your inventory transactions archive job has been added to the batch queue.</span></span> <span data-ttu-id="eaa70-149">Il processo inizierà ad archiviare le transazioni di magazzino del periodo selezionato.</span><span class="sxs-lookup"><span data-stu-id="eaa70-149">The job will now start to archive inventory transactions from the selected period.</span></span>

## <a name="view-archived-inventory-transactions"></a><span data-ttu-id="eaa70-150">Visualizza transazioni di magazzino archiviate</span><span class="sxs-lookup"><span data-stu-id="eaa70-150">View archived inventory transactions</span></span>

<span data-ttu-id="eaa70-151">La pagina **Archivio transazioni di magazzino** mostra la cronologia di archiviazione completa.</span><span class="sxs-lookup"><span data-stu-id="eaa70-151">The **Inventory transactions archive** page shows your full archiving history.</span></span> <span data-ttu-id="eaa70-152">Ogni riga della griglia mostra informazioni come la data in cui l'archivio è stato creato, l'utente che lo ha creato e il relativo stato.</span><span class="sxs-lookup"><span data-stu-id="eaa70-152">Each row in the grid shows information such as the date when the archive was created, the user who created it, and its status.</span></span>

<span data-ttu-id="eaa70-153">![Cronologia di archiviazione nella pagina Archivio transazioni di magazzino](media/archive-inventory-full.png "Cronologia di archiviazione nella pagina Archivio transazioni di magazzino")</span><span class="sxs-lookup"><span data-stu-id="eaa70-153">![Archiving history on the Inventory transactions archive page](media/archive-inventory-full.png "Archiving history on the Inventory transactions archive page")</span></span>

<span data-ttu-id="eaa70-154">Nell'elenco a discesa nella parte superiore della pagina selezionare uno dei seguenti valori per filtrare gli archivi visualizzati nella griglia:</span><span class="sxs-lookup"><span data-stu-id="eaa70-154">In the drop-down list at the top of the page select one of the following values to filter the archives that are shown in the grid:</span></span>

- <span data-ttu-id="eaa70-155">**Attivi** - Mostra solo gli archivi attivi, non gli archivi stornati.</span><span class="sxs-lookup"><span data-stu-id="eaa70-155">**Active** – Show only active archives, not reversed archives.</span></span>
- <span data-ttu-id="eaa70-156">**Tutti** - Mostra tutti gli archivi, sia attivi che stornati.</span><span class="sxs-lookup"><span data-stu-id="eaa70-156">**All** – Show all archives, both active and reversed.</span></span>

<span data-ttu-id="eaa70-157">Per ogni archivio nella griglia vengono fornite le seguenti informazioni:</span><span class="sxs-lookup"><span data-stu-id="eaa70-157">For each archive in the grid, the following information is provided:</span></span>

- <span data-ttu-id="eaa70-158">**Attivo** - Un segno di spunta indica che l'archivio è attivo.</span><span class="sxs-lookup"><span data-stu-id="eaa70-158">**Active** – A check mark indicates that the archive is active.</span></span>
- <span data-ttu-id="eaa70-159">**Data iniziale** - La data della transazione più vecchia che può essere inclusa nell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-159">**From date** – The date of the oldest transaction that can be included in the archive.</span></span>
- <span data-ttu-id="eaa70-160">**Data finale** - La data della transazione più recente che può essere inclusa nell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-160">**To date** – The date of the latest transaction that can be included in the archive.</span></span>
- <span data-ttu-id="eaa70-161">**Programmato da** - L'account utente che ha creato l'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-161">**Scheduled by** – The user account that created the archive.</span></span>
- <span data-ttu-id="eaa70-162">**Elaborato** - La data di creazione dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-162">**Executed** – The date when the archive was created.</span></span>
- <span data-ttu-id="eaa70-163">**Storno** - Un segno di spunta indica che l'archivio è stato stornato.</span><span class="sxs-lookup"><span data-stu-id="eaa70-163">**Reverse** – A check mark indicates that the archive has been reversed.</span></span>
- <span data-ttu-id="eaa70-164">**Interrompi aggiornamento corrente** - Un segno di spunta indica che l'archiviazione è in corso, ma che è stata sospesa.</span><span class="sxs-lookup"><span data-stu-id="eaa70-164">**Stop current update** – A check mark indicates that the archive is in progress, but it has been paused.</span></span>
- <span data-ttu-id="eaa70-165">**Stato** - Lo stato di elaborazione dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-165">**State** – The processing status of the archive.</span></span> <span data-ttu-id="eaa70-166">I valori possibili sono *In attesa*, *In corso* e *Finito*.</span><span class="sxs-lookup"><span data-stu-id="eaa70-166">The possible values are *Waiting*, *In progress*, and *Finished*.</span></span>

<span data-ttu-id="eaa70-167">La barra degli strumenti sopra la griglia include i seguenti pulsanti utilizzabili con un archivio selezionato:</span><span class="sxs-lookup"><span data-stu-id="eaa70-167">The toolbar above the grid provides the following buttons that you can use to work with a selected archive:</span></span>

- <span data-ttu-id="eaa70-168">**Transazioni archiviate** - Visualizza i dettagli completi dell'archivio selezionato.</span><span class="sxs-lookup"><span data-stu-id="eaa70-168">**Archived transactions** – View the full details of the selected archive.</span></span> <span data-ttu-id="eaa70-169">La pagina **Transazioni archiviate** visualizzata mostra tutte le transazioni presenti nell'archivio.</span><span class="sxs-lookup"><span data-stu-id="eaa70-169">The **Archived transactions** page that appears shows all the transactions in the archive.</span></span>

    <span data-ttu-id="eaa70-170">![Pagina Transazioni archiviate](media/archive-inventory-transactions.png "Pagina Transazioni archiviate")</span><span class="sxs-lookup"><span data-stu-id="eaa70-170">![Archived transactions page](media/archive-inventory-transactions.png "Archived transactions page")</span></span>

    <span data-ttu-id="eaa70-171">Per visualizzare ulteriori informazioni su una transazione specifica nella pagina **Transazioni archiviate**, selezionarla nella griglia, quindi, nel riquadro azioni, selezionare **Dettagli transazione archiviata**.</span><span class="sxs-lookup"><span data-stu-id="eaa70-171">To view more information about a specific transaction on the **Archived transactions** page, select it in the grid, and then, on the Action Pane, select **Archived transaction details**.</span></span> <span data-ttu-id="eaa70-172">La pagina **Dettagli transazione archiviata** visualizzata mostra informazioni quali la registrazione contabile, i riferimenti della contabilità secondaria correlati e le dimensioni finanziarie.</span><span class="sxs-lookup"><span data-stu-id="eaa70-172">The **Archived transaction details** page that appears shows information such as the ledger posting, related subledger references, and financial dimensions.</span></span>

- <span data-ttu-id="eaa70-173">**Sospendi archiviazione** - Sospende un archivio selezionato che è attualmente in fase di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="eaa70-173">**Pause archiving** – Pause a selected archive that is currently being processed.</span></span> <span data-ttu-id="eaa70-174">La sospensione viene attivata solo dopo la generazione dell'attività di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="eaa70-174">The pause takes effect only after the archiving task has been generated.</span></span> <span data-ttu-id="eaa70-175">Pertanto, potrebbe esserci un breve ritardo prima della sospensione dell'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="eaa70-175">Therefore, there might be a short delay before the pause takes effect.</span></span> <span data-ttu-id="eaa70-176">Se un archivio è stato sospeso, viene visualizzato un segno di spunta nel campo **Interrompi aggiornamento corrente**.</span><span class="sxs-lookup"><span data-stu-id="eaa70-176">If an archive has been paused, a check mark appears in its **Stop current update** field.</span></span>
- <span data-ttu-id="eaa70-177">**Riprendi archiviazione** - Riprende l'elaborazione di un archivio selezionato attualmente sospeso.</span><span class="sxs-lookup"><span data-stu-id="eaa70-177">**Resume archiving** – Resume processing for a selected archive that is currently paused.</span></span>
- <span data-ttu-id="eaa70-178">**Storno** - Esegue lo storno dell'archivio selezionato.</span><span class="sxs-lookup"><span data-stu-id="eaa70-178">**Reverse** – Reverse the selected archive.</span></span> <span data-ttu-id="eaa70-179">È possibile stornare un archivio solo se il campo **Stato** è impostato su *Finito*.</span><span class="sxs-lookup"><span data-stu-id="eaa70-179">You can reverse an archive only if its **State** field is set to *Finished*.</span></span> <span data-ttu-id="eaa70-180">Se un archivio è stato stornato, viene visualizzato un segno di spunta nel campo **Storno**.</span><span class="sxs-lookup"><span data-stu-id="eaa70-180">If an archive has been reversed, a check mark appears in its **Reverse** field.</span></span>
