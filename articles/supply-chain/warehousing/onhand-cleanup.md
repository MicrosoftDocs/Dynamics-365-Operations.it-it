---
title: Processo di pulizia delle voci disponibili per la gestione del magazzino
description: Questo argomento descrive il processo di pulizia delle voci disponibili, che consente di migliorare le prestazioni del sistema identificando ed eliminando record correlati ma non necessari.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 93c77434a912554dab486b42c0c9fffd68cf9435
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 02/15/2021
ms.locfileid: "5226005"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="173de-103">Processo di pulizia delle voci disponibili per la gestione del magazzino</span><span class="sxs-lookup"><span data-stu-id="173de-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="173de-104">Le prestazioni delle query utilizzate per calcolare le scorte disponibili sono influenzate dal numero di record nelle tabelle interessate.</span><span class="sxs-lookup"><span data-stu-id="173de-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="173de-105">Un modo di migliorare le prestazioni è ridurre il numero di record che il database deve considerare.</span><span class="sxs-lookup"><span data-stu-id="173de-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="173de-106">Questo argomento descrive il processo di pulizia delle voci disponibili, che elimina i record non necessari nelle tabelle InventSum e WHSInventReserve.</span><span class="sxs-lookup"><span data-stu-id="173de-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="173de-107">Queste tabelle contengono informazioni sulla disponibilità per gli articoli abilitati per l'elaborazione della gestione del magazzino.</span><span class="sxs-lookup"><span data-stu-id="173de-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="173de-108">(questi articoli sono definiti articoli Gestione magazzino). La cancellazione di questi record può migliorare significativamente le prestazioni dei calcoli sulle disponibilità.</span><span class="sxs-lookup"><span data-stu-id="173de-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="173de-109">Funzione del lavoro di pulizia</span><span class="sxs-lookup"><span data-stu-id="173de-109">What the cleanup job does</span></span>

<span data-ttu-id="173de-110">Il processo di pulizia delle voci disponibili elimina tutti i record nelle tabelle WHSInventReserve e InventSum in cui tutti i valori dei campi sono *0* (zero).</span><span class="sxs-lookup"><span data-stu-id="173de-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="173de-111">Questi record possono essere eliminati perché non contribuiscono alle informazioni sulla disponibilità.</span><span class="sxs-lookup"><span data-stu-id="173de-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="173de-112">Il processo elimina solo i record al di sotto del livello **Ubicazione**.</span><span class="sxs-lookup"><span data-stu-id="173de-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="173de-113">Se un inventario fisico negativo è consentito, il processo di pulizia potrebbe non essere in grado di eliminare tutte le voci pertinenti.</span><span class="sxs-lookup"><span data-stu-id="173de-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="173de-114">Il motivo di questa limitazione è che il processo deve consentire uno scenario speciale in cui una targa ha più numeri di serie e uno di quei numeri di serie è diventato negativo.</span><span class="sxs-lookup"><span data-stu-id="173de-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="173de-115">Ad esempio, il sistema avrà una disponibilità zero a livello di targa quando una targa ha +1 pezzi del numero di serie 1 e -1 pezzi del numero di serie 2.</span><span class="sxs-lookup"><span data-stu-id="173de-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="173de-116">Per questo scenario speciale, il processo esegue dapprima un'eliminazione in profondità tentando di eliminare prima i livelli inferiori.</span><span class="sxs-lookup"><span data-stu-id="173de-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="173de-117">Pianificare e configurare il processo di pulizia</span><span class="sxs-lookup"><span data-stu-id="173de-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="173de-118">Il processo di pulizia delle voci disponibili è disponibile in **Gestione scorte \> Attività periodiche \> Pulizia \> Processo di pulizia delle voci disponibili per la gestione del magazzino**.</span><span class="sxs-lookup"><span data-stu-id="173de-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="173de-119">Utilizzare le impostazioni del processo standard per controllare l'ambito e la pianificazione per l'esecuzione del processo.</span><span class="sxs-lookup"><span data-stu-id="173de-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="173de-120">Inoltre, sono disponibili le seguenti impostazioni:</span><span class="sxs-lookup"><span data-stu-id="173de-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="173de-121">**Elimina se non aggiornato da giorni** - Immettere il numero minimo di giorni che il processo deve attendere prima di eliminare una voce disponibile la cui quantità è scesa a zero.</span><span class="sxs-lookup"><span data-stu-id="173de-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="173de-122">Utilizzare questa impostazione per ridurre il rischio di eliminare le voci disponibili ancora in uso.</span><span class="sxs-lookup"><span data-stu-id="173de-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="173de-123">Se la pulizia deve essere eseguita il più presto possibile, immettere *0* (zero) o lasciare vuoto il campo.</span><span class="sxs-lookup"><span data-stu-id="173de-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="173de-124">**Tempo di esecuzione massimo (ore)** - Immettere il tempo di esecuzione massimo del processo di pulizia, in ore.</span><span class="sxs-lookup"><span data-stu-id="173de-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="173de-125">Se il processo non viene completato prima della scadenza di tale periodo di tempo, salverà il lavoro completato fino a quel momento e quindi si chiuderà automaticamente.</span><span class="sxs-lookup"><span data-stu-id="173de-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="173de-126">Questa funzionalità è particolarmente rilevante per le implementazioni che fanno un utilizzo elevato delle scorte.</span><span class="sxs-lookup"><span data-stu-id="173de-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="173de-127">In questi casi, è necessario pianificare il processo affinché venga eseguito quando il carico del sistema è il più basso possibile.</span><span class="sxs-lookup"><span data-stu-id="173de-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="173de-128">Se il processo batch deve continuare a essere eseguito fino al completamento, immettere *0* (zero) o lasciare il campo vuoto.</span><span class="sxs-lookup"><span data-stu-id="173de-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="173de-129">Questa impostazione è disponibile solo se la relativa funzionalità è stata [attivata nel sistema](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="173de-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="173de-130">Sebbene sia possibile eseguire il processo durante il normale orario lavorativo, si consiglia di eseguirlo in altri periodi della giornata.</span><span class="sxs-lookup"><span data-stu-id="173de-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="173de-131">In questo modo, si prevengono i conflitti che possono verificarsi se un utente sta utilizzando un record che viene anch'esso pulito.</span><span class="sxs-lookup"><span data-stu-id="173de-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="173de-132">Se il processo tenta di eliminare un record di un articolo mentre quel record viene utilizzato da un altro utente, si verifica un errore di deadlock per il processo di pulizia o per l'utente.</span><span class="sxs-lookup"><span data-stu-id="173de-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="173de-133">Quando il processo è in esecuzione, ha una dimensione di commit pari a 100.</span><span class="sxs-lookup"><span data-stu-id="173de-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="173de-134">In altre parole, proverà a eseguire il commit per ogni 100 eliminazioni.</span><span class="sxs-lookup"><span data-stu-id="173de-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="173de-135">Tuttavia, poiché alcune eliminazioni sono basate su set, potrebbero esserci scenari in cui è possibile eliminare più di 100 record nella stessa transazione.</span><span class="sxs-lookup"><span data-stu-id="173de-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="173de-136">Pertanto, a volte possono verificarsi delle escalation di blocchi.</span><span class="sxs-lookup"><span data-stu-id="173de-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="173de-137">Impatto possibile sugli utenti</span><span class="sxs-lookup"><span data-stu-id="173de-137">Possible user impact</span></span>

<span data-ttu-id="173de-138">Gli utenti potrebbero essere interessati se il processo di pulizia delle voci disponibili elimina tutti i record per un determinato livello (come il livello della targa).</span><span class="sxs-lookup"><span data-stu-id="173de-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="173de-139">In questo caso, la funzionalità che consente di determinare che l'inventario era precedentemente disponibile in una targa potrebbe non funzionare come previsto, poiché le voci disponibili pertinenti non sono più disponibili.</span><span class="sxs-lookup"><span data-stu-id="173de-139">In this case, the functionality for seeing that inventory was previously available on-hand at a license plate might not work as expected because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="173de-140">Questa capacità può essere utile nelle seguenti situazioni:</span><span class="sxs-lookup"><span data-stu-id="173de-140">This can, for example, be experienced in the following situations:</span></span>

- <span data-ttu-id="173de-141">In **Scorte disponibili**, quando l'utente deseleziona la condizione **Quantità\<\> 0** o seleziona la condizione **Transazioni chiuse** nelle impostazioni **Visualizzazione delle dimensioni**.</span><span class="sxs-lookup"><span data-stu-id="173de-141">On the **On-hand list**, when the user deselects the condition **Quantity \<\> 0** or selects the condition **Closed transactions** in the **Dimensions display** settings.</span></span>
- <span data-ttu-id="173de-142">In un report **Inventario fisico per dimensione inventariale** per periodi passati, quando l'utente imposta il parametro **In data**.</span><span class="sxs-lookup"><span data-stu-id="173de-142">In a **Physical inventory by inventory dimension** report for past periods, when the user sets the **As of date** parameter.</span></span>

<span data-ttu-id="173de-143">Tuttavia, il miglioramento delle prestazioni fornito dal lavoro di pulizia dovrebbe compensare queste piccole perdite di funzionalità.</span><span class="sxs-lookup"><span data-stu-id="173de-143">However, the performance improvement that the cleanup job provides should make up for these small losses in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="173de-144">Rendere disponibile l'impostazione Tempo di esecuzione massimo</span><span class="sxs-lookup"><span data-stu-id="173de-144">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="173de-145">Per impostazione predefinita, l'impostazione **Tempo di esecuzione massimo** non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="173de-145">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="173de-146">Se si desidera utilizzarla, è necessario utilizzare la pagina [Gestione funzionalità](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) per attivare la funzione correlata nel sistema.</span><span class="sxs-lookup"><span data-stu-id="173de-146">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="173de-147">Nell'area di lavoro **Gestione funzionalità**, la funzione è elencata nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="173de-147">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="173de-148">**Modulo:** *Gestione Magazzino*</span><span class="sxs-lookup"><span data-stu-id="173de-148">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="173de-149">**Nome funzione:** *Tempo di esecuzione massimo per il processo di pulizia delle voci disponibili per la gestione del magazzino*</span><span class="sxs-lookup"><span data-stu-id="173de-149">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]