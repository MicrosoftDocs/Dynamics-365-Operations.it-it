---
title: Sincronizzazione di ordini cliente direttamente tra Sales e Finance and Operations
description: L'argomento descrive i modelli e le attività sottostanti che vengono utilizzati per sincronizzare gli ordini cliente direttamente tra Microsoft Dynamics 365 for Sales e Microsoft Dynamics 365 for Finance and Operations.
author: ChristianRytt
manager: AnnBe
ms.date: 05/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: a427bff3cd07adbf4d3d81f98bdf7f85a194730b
ms.sourcegitcommit: 3f02d8a874d1696cbf21d100f1ad205c57224e4b
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 05/09/2019
ms.locfileid: "1539116"
---
# <a name="synchronization-of-sales-orders-directly-between-sales-and-finance-and-operations"></a><span data-ttu-id="20e42-103">Sincronizzazione degli ordini cliente direttamente tra Sales e Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="20e42-103">Synchronization of sales orders directly between Sales and Finance and Operations</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="20e42-104">L'argomento descrive i modelli e le attività sottostanti che vengono utilizzati per sincronizzare gli ordini cliente direttamente tra Microsoft Dynamics 365 for Sales e Microsoft Dynamics 365 for Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Microsoft Dynamics 365 for Sales and Microsoft Dynamics 365 for Finance and Operations.</span></span>

## <a name="data-flow-in-prospect-to-cash"></a><span data-ttu-id="20e42-105">Flusso di dati in Prospect to cash</span><span class="sxs-lookup"><span data-stu-id="20e42-105">Data flow in Prospect to cash</span></span>

<span data-ttu-id="20e42-106">La soluzione Prospect to cash utilizza la funzionalità Integrazione dati per sincronizzare i dati tra istanze di Finance and Operations e Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-106">The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Finance and Operations and Sales.</span></span> <span data-ttu-id="20e42-107">I modelli Prospect to cash disponibili con la funzionalità Integrazione dati consentono il flusso di dati relativo a conti, contatti, prodotti, offerte di vendita, ordini cliente e fatture di vendita tra Finance and Operations e Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-107">The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Finance and Operations and Sales.</span></span> <span data-ttu-id="20e42-108">La figura seguente mostra il modo in cui i dati vengono sincronizzati tra Finance and Operations e Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-108">The following illustration shows how the data is synchronized between Finance and Operations and Sales.</span></span>

<span data-ttu-id="20e42-109">[![Flusso di dati in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span><span class="sxs-lookup"><span data-stu-id="20e42-109">[![Data flow in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="20e42-110">Modelli e attività</span><span class="sxs-lookup"><span data-stu-id="20e42-110">Templates and tasks</span></span>

<span data-ttu-id="20e42-111">Per accedere ai modelli disponibili, aprire l'[Interfaccia di amministrazione di PowerApps](https://preview.admin.powerapps.com/dataintegration).</span><span class="sxs-lookup"><span data-stu-id="20e42-111">To access the available templates, open [PowerApps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="20e42-112">Selezionare **Progetti**, quindi nell'angolo superiore destro, selezionare **Nuovo progetto** per selezionare i modelli pubblici.</span><span class="sxs-lookup"><span data-stu-id="20e42-112">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="20e42-113">I modelli e le attività sottostanti seguenti vengono utilizzati per sincronizzare le gli ordini cliente direttamente tra Sales e Finance and Operations:</span><span class="sxs-lookup"><span data-stu-id="20e42-113">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Finance and Operations:</span></span>

- <span data-ttu-id="20e42-114">**Nomi dei modelli in Integrazione dati:**</span><span class="sxs-lookup"><span data-stu-id="20e42-114">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="20e42-115">Ordini cliente (da Sales in Fin and Ops) - Diretto</span><span class="sxs-lookup"><span data-stu-id="20e42-115">Sales Orders (Sales to Fin and Ops) - Direct</span></span>
    - <span data-ttu-id="20e42-116">Ordini cliente (da Fin and Ops in Sales) - Diretto</span><span class="sxs-lookup"><span data-stu-id="20e42-116">Sales Orders (Fin and Ops to Sales) - Direct</span></span>

- <span data-ttu-id="20e42-117">**Nomi delle attività nel progetto di Integrazione dati:**</span><span class="sxs-lookup"><span data-stu-id="20e42-117">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="20e42-118">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="20e42-118">OrderHeader</span></span>
    - <span data-ttu-id="20e42-119">OrderLine</span><span class="sxs-lookup"><span data-stu-id="20e42-119">OrderLine</span></span>

<span data-ttu-id="20e42-120">Le attività di sincronizzazione seguenti sono necessarie prima di eseguire la sincronizzazione delle intestazioni e delle righe di fatture di vendita:</span><span class="sxs-lookup"><span data-stu-id="20e42-120">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="20e42-121">Prodotti (da Fin and Ops in Sales) - Diretto</span><span class="sxs-lookup"><span data-stu-id="20e42-121">Products (Fin and Ops to Sales) - Direct</span></span>
- <span data-ttu-id="20e42-122">Conti (da Sales in Fin and Ops) - Diretto (se utilizzata)</span><span class="sxs-lookup"><span data-stu-id="20e42-122">Accounts (Sales to Fin and Ops) - Direct (if used)</span></span>
- <span data-ttu-id="20e42-123">Da Contatti a Clienti (da Sales in Fin and Ops) - Diretto (se utilizzata)</span><span class="sxs-lookup"><span data-stu-id="20e42-123">Contacts to Customers (Sales to Fin and Ops) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="20e42-124">Insieme di entità</span><span class="sxs-lookup"><span data-stu-id="20e42-124">Entity set</span></span>

| <span data-ttu-id="20e42-125">Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="20e42-125">Finance and Operations</span></span>  | <span data-ttu-id="20e42-126">Vendite</span><span class="sxs-lookup"><span data-stu-id="20e42-126">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="20e42-127">Intestazioni ordine cliente CDS</span><span class="sxs-lookup"><span data-stu-id="20e42-127">CDS sales order headers</span></span> | <span data-ttu-id="20e42-128">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="20e42-128">SalesOrders</span></span>       |
| <span data-ttu-id="20e42-129">Righe ordine cliente CDS</span><span class="sxs-lookup"><span data-stu-id="20e42-129">CDS sales order lines</span></span>   | <span data-ttu-id="20e42-130">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="20e42-130">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="20e42-131">Flusso di entità</span><span class="sxs-lookup"><span data-stu-id="20e42-131">Entity flow</span></span>

<span data-ttu-id="20e42-132">Gli ordini cliente vengono creati in Sales e sincronizzati in Finance and Operations quando **Esegui progetto** viene attivato per un progetto basato sul modello **Ordini cliente (da Sales in Fin and Ops) - Diretto**.</span><span class="sxs-lookup"><span data-stu-id="20e42-132">Sales orders are created in Sales and synchronized to Finance and Operations when **Run project** is triggered for a project based on the **Sales Orders (Sales to Fin and Ops) - Direct** template.</span></span> <span data-ttu-id="20e42-133">È possibile attivare e sincronizzare gli ordini da Sales se tutti i **prodotti dell'ordine** sono prodotti gestiti esternamente.</span><span class="sxs-lookup"><span data-stu-id="20e42-133">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="20e42-134">Di conseguenza, non possono includere prodotti fuori catalogo.</span><span class="sxs-lookup"><span data-stu-id="20e42-134">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="20e42-135">Dopo l'attivazione dell'ordine, l'ordine cliente diventa di sola lettura nell'interfaccia utente (UI).</span><span class="sxs-lookup"><span data-stu-id="20e42-135">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="20e42-136">A quel punto, gli aggiornamenti vengono effettuati in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-136">At that point, the updates are made from Finance and Operations.</span></span> <span data-ttu-id="20e42-137">Dopo che lo stato dell'ordine cliente diventa **Confermato**, un progetto basato sul modello **Ordini cliente (da Fin and Ops in Sales) - Diretto** può essere utilizzato per sincronizzare gli aggiornamenti o lo stato dell'evasione da Finance and Operations in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-137">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Fin and Ops to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Finance and Operations to Sales.</span></span>

<span data-ttu-id="20e42-138">Non è necessario creare ordini in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-138">You don't have to create orders in Sales.</span></span> <span data-ttu-id="20e42-139">È invece possibile creare nuovi ordini cliente in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-139">You can create new sales orders in Finance and Operations instead.</span></span> <span data-ttu-id="20e42-140">Dopo che lo stato di un ordine cliente diventa **Confermato**, viene sincronizzato in Sales come descritto nel paragrafo precedente.</span><span class="sxs-lookup"><span data-stu-id="20e42-140">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="20e42-141">In Finance and Operations, i filtri nel modello garantiscono che solo gli ordini cliente pertinenti siano inclusi nella sincronizzazione:</span><span class="sxs-lookup"><span data-stu-id="20e42-141">In Finance and operations, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="20e42-142">Nell'ordine cliente, il cliente che richiede l'ordine e quello che emette la fattura devono essere originati in Sales per essere inclusi nella sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="20e42-142">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="20e42-143">In Finance and Operations, i campi **OrderingCustomerIsExternallyMaintained** e **InvoiceCustomerIsExternallyMaintained** sono utilizzati per filtrare ordini cliente dalle entità di dati.</span><span class="sxs-lookup"><span data-stu-id="20e42-143">In Finance and Operations, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** fields are used to filter sales orders from the data entities.</span></span>
- <span data-ttu-id="20e42-144">L'ordine cliente in Finance and Operations deve essere confermato.</span><span class="sxs-lookup"><span data-stu-id="20e42-144">The sales order in Finance and Operations must be confirmed.</span></span> <span data-ttu-id="20e42-145">Solo gli ordini cliente confermati o gli ordini cliente con stato di elaborazione più elevato, ad esempio **Inviato** o **Fatturato** vengono sincronizzati in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-145">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="20e42-146">Dopo la creazione o la modifica di un ordine cliente, è necessario eseguire il processo batch **Calcola totali vendite** in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-146">After a sales order is created or modified, the **Calculate sales totals** batch job in Finance and Operations must be run.</span></span> <span data-ttu-id="20e42-147">Solo gli ordini cliente in cui vengono calcolati i totali delle vendite saranno sincronizzati in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-147">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="20e42-148">Imposta di trasporto</span><span class="sxs-lookup"><span data-stu-id="20e42-148">Freight tax</span></span>

<span data-ttu-id="20e42-149">Sales non supporta le imposte a livello di intestazione in quanto sono registrate a livello di riga.</span><span class="sxs-lookup"><span data-stu-id="20e42-149">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="20e42-150">Per supportare le imposte a livello di intestazione da Finance and Operations, ad esempio l'imposta di trasporto, il sistema sincronizza l'imposta in Sales come prodotto fuori catalogo denominato **Imposta di trasporto** e con l'importo imposta in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-150">To support tax at the header level from Finance and Operations, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Finance and Operations.</span></span> <span data-ttu-id="20e42-151">In questo modo, il calcolo del prezzo standard in Sales può essere utilizzato per i totali, anche quando vi sono imposte a livello di intestazione in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-151">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Finance and Operations.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="20e42-152">Calcolo e arrotondamento dello sconto</span><span class="sxs-lookup"><span data-stu-id="20e42-152">Discount calculation and rounding</span></span>

<span data-ttu-id="20e42-153">Il modello di calcolo dello sconto in Sales differisce da quello in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-153">The discount calculation model in Sales differs from the discount calculation model in Finance and Operations.</span></span> <span data-ttu-id="20e42-154">In Finance and Operations, l'importo di sconto finale in una riga di vendita può derivare da una combinazione di importi e percentuali di sconto.</span><span class="sxs-lookup"><span data-stu-id="20e42-154">In Finance and Operations, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="20e42-155">Se questo importo di sconto finale viene diviso per la quantità nella riga, è possibile che venga applicato l'arrotondamento.</span><span class="sxs-lookup"><span data-stu-id="20e42-155">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="20e42-156">Tuttavia, questo arrotondamento non viene considerato se un importo di sconto per unità arrotondato viene sincronizzato in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-156">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="20e42-157">Per garantire la corretta sincronizzazione in Sales dell'intero importo di sconto da una riga di vendita in Finance and Operations, l'intero importo deve essere sincronizzato senza essere diviso per la quantità della riga.</span><span class="sxs-lookup"><span data-stu-id="20e42-157">To help guarantee that the full discount amount from a sales line in Finance and Operations is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="20e42-158">Di conseguenza, è necessario definire il **metodo di calcolo sconto** come **Voce** in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-158">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="20e42-159">Quando una riga dell'ordine cliente viene sincronizzata da Sales in Finance and Operations, viene utilizzato l'intero importo di sconto riga.</span><span class="sxs-lookup"><span data-stu-id="20e42-159">When a sales order line is synchronized from Sales to Finance and Operations, the full line discount amount is used.</span></span> <span data-ttu-id="20e42-160">Poiché Finance and Operations non include un campo in cui registrare l'intero importo di sconto per una riga, l'importo viene diviso per la quantità e registrato nel campo **Sconto riga**.</span><span class="sxs-lookup"><span data-stu-id="20e42-160">Because Finance and Operations has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="20e42-161">Qualsiasi arrotondamento in questa divisione viene registrato nel campo **Addebiti vendite** nella riga di vendita.</span><span class="sxs-lookup"><span data-stu-id="20e42-161">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="20e42-162">Esempio</span><span class="sxs-lookup"><span data-stu-id="20e42-162">Example</span></span>

<span data-ttu-id="20e42-163">**Sincronizzazione da Sales in Finance and Operations**</span><span class="sxs-lookup"><span data-stu-id="20e42-163">**Synchronization from Sales to Finance and Operations**</span></span>

- <span data-ttu-id="20e42-164">**Sales:** Quantità = 3, sconto per riga = $ 10,00</span><span class="sxs-lookup"><span data-stu-id="20e42-164">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="20e42-165">**Finance and Operations:** Quantità = 3, importo di sconto riga = $ 3,33, addebito vendita = -$ 0,01</span><span class="sxs-lookup"><span data-stu-id="20e42-165">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="20e42-166">**Sincronizzazione da Finance and Operations in Sales**</span><span class="sxs-lookup"><span data-stu-id="20e42-166">**Synchronization from Finance and Operations to Sales**</span></span>

- <span data-ttu-id="20e42-167">**Finance and Operations:** Quantità = 3, importo di sconto riga = $ 3,33, addebito vendita = -$ 0,01</span><span class="sxs-lookup"><span data-stu-id="20e42-167">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="20e42-168">**Sales:** Quantità = 3, sconto per riga = (3 × $ 3,33) + $ 0,01 = $ 10,00</span><span class="sxs-lookup"><span data-stu-id="20e42-168">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="20e42-169">Soluzione Prospect to cash per Sales</span><span class="sxs-lookup"><span data-stu-id="20e42-169">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="20e42-170">Nuovi campi sono stati aggiunti all'entità **Ordine** e visualizzati nella pagina:</span><span class="sxs-lookup"><span data-stu-id="20e42-170">New fields have been added to the **Order** entity and appear on the page:</span></span>

- <span data-ttu-id="20e42-171">**Gestito esternamente** - Impostare questa opzione su **Sì** se l'ordine proviene da Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-171">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Finance and Operations.</span></span>
- <span data-ttu-id="20e42-172">**Stato elaborazione** - Questo campo mostra lo stato di elaborazione dell'ordine in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-172">**Processing status** – This field shows the processing status of the order in Finance and Operations.</span></span> <span data-ttu-id="20e42-173">Sono disponibili i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="20e42-173">The following values are available:</span></span>

    - <span data-ttu-id="20e42-174">**Bozza** - Lo stato iniziale quando un ordine viene creato in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-174">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="20e42-175">In Sales, solo gli ordini con questo stato di elaborazione possono essere modificati.</span><span class="sxs-lookup"><span data-stu-id="20e42-175">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="20e42-176">**Attivo** - Lo stato dopo che l'ordine viene attivato in Sales utilizzando il pulsante **Attiva**.</span><span class="sxs-lookup"><span data-stu-id="20e42-176">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="20e42-177">**Confermato**</span><span class="sxs-lookup"><span data-stu-id="20e42-177">**Confirmed**</span></span>
    - <span data-ttu-id="20e42-178">**Documento di trasporto**</span><span class="sxs-lookup"><span data-stu-id="20e42-178">**Packing Slip**</span></span>
    - <span data-ttu-id="20e42-179">**Fatturato**</span><span class="sxs-lookup"><span data-stu-id="20e42-179">**Invoiced**</span></span>
    - <span data-ttu-id="20e42-180">**Prelevato**</span><span class="sxs-lookup"><span data-stu-id="20e42-180">**Picked**</span></span>
    - <span data-ttu-id="20e42-181">**Prelevato in parte**</span><span class="sxs-lookup"><span data-stu-id="20e42-181">**Partially Picked**</span></span>
    - <span data-ttu-id="20e42-182">**Parzialmente imballato**</span><span class="sxs-lookup"><span data-stu-id="20e42-182">**Partially Packed**</span></span>
    - <span data-ttu-id="20e42-183">**Spedito**</span><span class="sxs-lookup"><span data-stu-id="20e42-183">**Shipped**</span></span>
    - <span data-ttu-id="20e42-184">**Parzialmente spedito**</span><span class="sxs-lookup"><span data-stu-id="20e42-184">**Partially Shipped**</span></span>
    - <span data-ttu-id="20e42-185">**Parzialmente fatturato**</span><span class="sxs-lookup"><span data-stu-id="20e42-185">**Partially Invoiced**</span></span>
    - <span data-ttu-id="20e42-186">**Operazione annullata**</span><span class="sxs-lookup"><span data-stu-id="20e42-186">**Cancelled**</span></span>

<span data-ttu-id="20e42-187">L'impostazione **Solo prodotti gestiti esternamente** viene utilizzata durante l'attivazione dell'ordine per rilevare in modo coerente se un ordine cliente consiste interamente di prodotti gestiti esternamente.</span><span class="sxs-lookup"><span data-stu-id="20e42-187">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="20e42-188">Se un ordine cliente include solo prodotti gestiti esternamente, i prodotti vengono gestiti in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-188">If a sales order consists entirely of externally maintained products, the products are maintained in Finance and Operations.</span></span> <span data-ttu-id="20e42-189">Questa impostazione impedisce l'attivazione e il tentativo di sincronizzare righe dell'ordine cliente che hanno prodotti sconosciuti in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-189">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Finance and Operations.</span></span>

<span data-ttu-id="20e42-190">I pulsanti **Crea fattura**, **Annulla ordine**, **Ricalcola**, **Ottieni prodotti** e **Cerca indirizzo** della pagina **Ordine cliente** sono nascosti per gli ordini gestiti esternamente poiché le fatture verranno create in Finance and Operations e sincronizzate in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-190">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Finance and Operations and synchronized to Sales.</span></span> <span data-ttu-id="20e42-191">Questi ordini non sono modificabili poiché le relative informazioni verranno sincronizzate da Finance and Operations dopo l'attivazione.</span><span class="sxs-lookup"><span data-stu-id="20e42-191">These orders can't be edited, because sales order information will be synchronized from Finance and Operations after activation.</span></span>

<span data-ttu-id="20e42-192">Lo stato dell'ordine cliente rimarrà **attivo** per garantire che le modifiche da Finance and Operations possano essere applicate all'ordine cliente in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-192">The sales order status will remain **Active** to help guarantee that changes from Finance and Operations can flow to the sales order in Sales.</span></span> <span data-ttu-id="20e42-193">Per controllare questo comportamento, impostare il valore **Codice stato \[Stato\]** su **Attivo** nel progetto di Integrazione dati.</span><span class="sxs-lookup"><span data-stu-id="20e42-193">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="20e42-194">Prerequisiti e impostazioni di mapping</span><span class="sxs-lookup"><span data-stu-id="20e42-194">Preconditions and mapping setup</span></span>

<span data-ttu-id="20e42-195">Prima di sincronizzare gli ordini cliente, è importante aggiornare le impostazioni seguenti nei sistemi.</span><span class="sxs-lookup"><span data-stu-id="20e42-195">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="20e42-196">Impostazione in Sales</span><span class="sxs-lookup"><span data-stu-id="20e42-196">Setup in Sales</span></span>

- <span data-ttu-id="20e42-197">Assicurarsi che le autorizzazioni siano impostate per il team a cui l'utente dal set di connessione in Sales viene assegnato.</span><span class="sxs-lookup"><span data-stu-id="20e42-197">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="20e42-198">Se si utilizzano dati dimostrativi, in genere l'utente ha privilegi di amministratore, ma non il team.</span><span class="sxs-lookup"><span data-stu-id="20e42-198">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="20e42-199">Se il team non dispone di privilegi di amministratore quando si esegue il progetto da Integrazione dati, verrà visualizzato un messaggio di errore in cui viene indicato che il team principale è mancante.</span><span class="sxs-lookup"><span data-stu-id="20e42-199">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="20e42-200">Andare a **Impostazioni** &gt; **Sicurezza** &gt; **Team**, selezionare il team pertinente, selezionare **Gestisci ruoli** e selezionare un ruolo con le autorizzazioni desiderate, ad esempio **Amministratore di sistema**.</span><span class="sxs-lookup"><span data-stu-id="20e42-200">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="20e42-201">Per garantire il calcolo corretto degli sconti in Sales e in Finance and Operations, il campo **Metodo di calcolo sconto** deve essere impostato su **Voce**.</span><span class="sxs-lookup"><span data-stu-id="20e42-201">To ensure correct calculation of discounts in both Sales and Finance and Operations **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="20e42-202">Andare a **Impostazioni** &gt; **Amministrazione** &gt; **Impostazioni di sistema** &gt; **Vendite** e assicurarsi che:</span><span class="sxs-lookup"><span data-stu-id="20e42-202">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="20e42-203">L'opzione **Usa sistema di calcolo prezzi sistema** sia impostata su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="20e42-203">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="20e42-204">Il campo **Metodo di calcolo sconto** sia impostato su **Voce**.</span><span class="sxs-lookup"><span data-stu-id="20e42-204">The **Discount calculation method** field is set to **Line item**.</span></span>

### <a name="setup-in-finance-and-operations"></a><span data-ttu-id="20e42-205">Impostazione in Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="20e42-205">Setup in Finance and Operations</span></span>

- <span data-ttu-id="20e42-206">Andare a **Vendite e marketing** &gt; **Attività periodiche** &gt; **Calcola totali vendite** e impostare il processo da eseguire come processo batch.</span><span class="sxs-lookup"><span data-stu-id="20e42-206">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="20e42-207">Impostare l'opzione **Calcola totali per ordini cliente** su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="20e42-207">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="20e42-208">Questo passaggio è importante perché solo gli ordini cliente con totali vendite calcolati verranno sincronizzati in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-208">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="20e42-209">La frequenza del processo batch deve essere in linea con la frequenza della sincronizzazione dell'ordine cliente.</span><span class="sxs-lookup"><span data-stu-id="20e42-209">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

<span data-ttu-id="20e42-210">Se si utilizza anche l'integrazione dell'ordine di lavoro, è necessario impostare l'origine delle vendite.</span><span class="sxs-lookup"><span data-stu-id="20e42-210">If you also use work order integration, you need to set up the sales origin.</span></span> <span data-ttu-id="20e42-211">L'origine vendite viene utilizzata per distinguere gli ordini cliente in Finance and Operations che sono stati creati da ordini di lavoro in Field Service.</span><span class="sxs-lookup"><span data-stu-id="20e42-211">The sales origin is used to distinguish sales orders in Finance and Operations that were created from work orders in Field Service.</span></span> <span data-ttu-id="20e42-212">Quando un ordine cliente ha un'origine vendite di tipo **Integrazione ordine di lavoro**, il campo **Stato ordine di lavoro esterno** viene visualizzato nell'intestazione dell'ordine cliente.</span><span class="sxs-lookup"><span data-stu-id="20e42-212">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="20e42-213">L'origine vendite inoltre garantisce che gli ordini client creati da ordini di lavoro in Field Service vengano filtrati durante la sincronizzazione degli ordini cliente da Finance and Operations verso Field Service.</span><span class="sxs-lookup"><span data-stu-id="20e42-213">Additionally, the sales origin ensures that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Finance and Operations to Field Service.</span></span>

1. <span data-ttu-id="20e42-214">Passare a **Vendite e marketing** \> **Impostazioni** \> **Ordini cliente** \> **Origine vendite**.</span><span class="sxs-lookup"><span data-stu-id="20e42-214">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="20e42-215">Selezionare **Nuovo** per creare una nuova origine vendite.</span><span class="sxs-lookup"><span data-stu-id="20e42-215">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="20e42-216">Nel campo **Origine vendite** immettere un nome per l'origine, ad esempio **SalesOrder**.</span><span class="sxs-lookup"><span data-stu-id="20e42-216">In the **Sales origin** field, enter a name for the sales origin, such as **SalesOrder**.</span></span>
4. <span data-ttu-id="20e42-217">Nel campo **Descrizione** immettere una descrizione, ad esempio **Ordine cliente di Sales**.</span><span class="sxs-lookup"><span data-stu-id="20e42-217">In the **Description** field, enter a description, such as **Sales Order from Sales**.</span></span>
5. <span data-ttu-id="20e42-218">Selezionare la casella di controllo **Assegnazione tipo di origine**.</span><span class="sxs-lookup"><span data-stu-id="20e42-218">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="20e42-219">Impostare il campo **Tipo di origine vendite** su **Integrazione ordine cliente**.</span><span class="sxs-lookup"><span data-stu-id="20e42-219">Set the **Sales origin type** field to **Sales order integration**.</span></span>
7. <span data-ttu-id="20e42-220">Selezionare **Salva**.</span><span class="sxs-lookup"><span data-stu-id="20e42-220">Select **Save**.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-fin-and-ops---direct-data-integration-project"></a><span data-ttu-id="20e42-221">Impostazione nel progetto di Integrazione dati Ordini cliente (da Sales in Fin and Ops) - Diretto</span><span class="sxs-lookup"><span data-stu-id="20e42-221">Setup in the Sales Orders (Sales to Fin and Ops) - Direct Data integration project</span></span>

- <span data-ttu-id="20e42-222">Assicurarsi che il mapping necessario esista per **Shipto\_country** a **DeliveryAddressCountryRegionISOCode**.</span><span class="sxs-lookup"><span data-stu-id="20e42-222">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="20e42-223">È possibile impostare come vuoto un valore predefinito nella mappa di valori per evitare di immettere il paese per gli ordini nazionali.</span><span class="sxs-lookup"><span data-stu-id="20e42-223">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="20e42-224">Impostare la parte sinistra su Vuoto e la parte destra sul paese desiderato.</span><span class="sxs-lookup"><span data-stu-id="20e42-224">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="20e42-225">Il valore di modello è una mappa di valori dove vari paesi vengono mappati e dove Vuoto = Stati Uniti.</span><span class="sxs-lookup"><span data-stu-id="20e42-225">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-fin-and-ops-to-sales---direct-data-integration-project"></a><span data-ttu-id="20e42-226">Impostazione nel progetto di Integrazione dati Ordini cliente (da Fin and Ops in Sales) - Diretto</span><span class="sxs-lookup"><span data-stu-id="20e42-226">Setup in the Sales Orders (Fin and Ops to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="20e42-227">Attività SalesHeader</span><span class="sxs-lookup"><span data-stu-id="20e42-227">SalesHeader task</span></span>

- <span data-ttu-id="20e42-228">Un listino prezzi è necessario per creare ordini in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-228">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="20e42-229">Aggiornare la mappa di valori per **pricelevelid.name \[nome listino prezzi\]** al listino prezzi utilizzato in Sales per la valuta.</span><span class="sxs-lookup"><span data-stu-id="20e42-229">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="20e42-230">È possibile utilizzare il listino prezzi predefinito per una singola valuta.</span><span class="sxs-lookup"><span data-stu-id="20e42-230">You can use the default price list for a single currency.</span></span> <span data-ttu-id="20e42-231">In alternativa, se si hanno listini prezzi in più valute, è possibile utilizzare una mappa di valori.</span><span class="sxs-lookup"><span data-stu-id="20e42-231">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="20e42-232">Il valore di modello predefinito per **pricelevelid.name \[nome listino prezzi\]** è **Servizio CRM USA (esempio)**.</span><span class="sxs-lookup"><span data-stu-id="20e42-232">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="20e42-233">Attività SalesLine</span><span class="sxs-lookup"><span data-stu-id="20e42-233">SalesLine task</span></span>

- <span data-ttu-id="20e42-234">Assicurarsi che la mappa di valori richiesta esista per **SalesUnitSymbol** in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="20e42-234">Make sure that the required value map for **SalesUnitSymbol** in Finance and Operations exists.</span></span>
- <span data-ttu-id="20e42-235">Assicurarsi che le unità richieste siano definite in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-235">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="20e42-236">Un valore di modello con una mappa di valori viene definito per **SalesUnitSymbol** a **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="20e42-236">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="20e42-237">Mapping dei modelli in Integrazione dati</span><span class="sxs-lookup"><span data-stu-id="20e42-237">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="20e42-238">I campi **Termini di pagamento**, **Termini di trasporto**, **Termini di consegna**, **Metodo di spedizione** e **Modalità di consegna** non sono inclusi nei mapping predefiniti.</span><span class="sxs-lookup"><span data-stu-id="20e42-238">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** fields aren't part of the default mappings.</span></span> <span data-ttu-id="20e42-239">Per mappare questi campi, è necessario impostare un mapping di valori che sia specifico ai dati delle organizzazioni tra cui l'entità viene sincronizzata.</span><span class="sxs-lookup"><span data-stu-id="20e42-239">To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</span></span>

<span data-ttu-id="20e42-240">Nelle figure seguenti viene illustrato un esempio di mapping di modelli in Integrazione dati.</span><span class="sxs-lookup"><span data-stu-id="20e42-240">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="20e42-241">Il mapping mostra quali informazioni dei campi verranno sincronizzate da Sales in Finance and Operations o da Finance and Operations in Sales.</span><span class="sxs-lookup"><span data-stu-id="20e42-241">The mapping shows which field information will be synchronized from Sales to Finance and Operations, or from Finance and Operations to Sales.</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderheader"></a><span data-ttu-id="20e42-242">Ordini cliente (da Fin and Ops in Sales) - Diretto: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="20e42-242">Sales Orders (Fin and Ops to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="20e42-243">[![Mapping dei modelli in Integrazione dati](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="20e42-243">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderline"></a><span data-ttu-id="20e42-244">Ordini cliente (da Fin and Ops in Sales) - Diretto: OrderLine</span><span class="sxs-lookup"><span data-stu-id="20e42-244">Sales Orders (Fin and Ops to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="20e42-245">[![Mapping dei modelli in Integrazione dati](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="20e42-245">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderheader"></a><span data-ttu-id="20e42-246">Ordini cliente (da Sales in Fin and Ops) - Diretto: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="20e42-246">Sales Orders (Sales to Fin and Ops) - Direct: OrderHeader</span></span>

<span data-ttu-id="20e42-247">[![Mapping dei modelli in Integrazione dati](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="20e42-247">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderline"></a><span data-ttu-id="20e42-248">Ordini cliente (da Sales in Fin and Ops) - Diretto: OrderLine</span><span class="sxs-lookup"><span data-stu-id="20e42-248">Sales Orders (Sales to Fin and Ops) - Direct: OrderLine</span></span>

<span data-ttu-id="20e42-249">[![Mapping dei modelli in Integrazione dati](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="20e42-249">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="20e42-250">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="20e42-250">Related topics</span></span>

[<span data-ttu-id="20e42-251">Prospect to cash</span><span class="sxs-lookup"><span data-stu-id="20e42-251">Prospect to cash</span></span>](prospect-to-cash.md)
