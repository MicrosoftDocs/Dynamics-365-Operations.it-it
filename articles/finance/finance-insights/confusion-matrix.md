---
title: Risultati dei modelli di Machine Learning (anteprima)
description: Questo argomento illustra le matrici di confusione, i problemi di classificazione e l'accuratezza nei modelli di apprendimento automatico. Lo scopo è migliorare la tua comprensione dell'accuratezza nei risultati della previsione ML.
author: ShivamPandey-msft
ms.date: 06/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-07-14
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: fe652c32df9417f0f716242a24a26eabd1a16f65
ms.sourcegitcommit: 74e47075eab2b0b28f82b0d57f439719847ecb01
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 06/07/2021
ms.locfileid: "6193542"
---
# <a name="results-of-machine-learning-models-preview"></a><span data-ttu-id="bad60-104">Risultati dei modelli di Machine Learning (anteprima)</span><span class="sxs-lookup"><span data-stu-id="bad60-104">Results of machine learning models (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="bad60-105">Questo argomento illustra le matrici di confusione, i problemi di classificazione e l'accuratezza nei modelli di apprendimento automatico.</span><span class="sxs-lookup"><span data-stu-id="bad60-105">This topic discusses confusion matrices, classification problems, and accuracy in machine learning (ML) models.</span></span> <span data-ttu-id="bad60-106">Lo scopo è migliorare la tua comprensione dell'accuratezza nei risultati della previsione ML.</span><span class="sxs-lookup"><span data-stu-id="bad60-106">The purpose is to enhance your understanding of accuracy in ML prediction results.</span></span> <span data-ttu-id="bad60-107">Il gruppo di destinatari di destinazione comprende tecnici, analisti e responsabili che desiderano sviluppare le proprie conoscenze e competenze nella data science.</span><span class="sxs-lookup"><span data-stu-id="bad60-107">The target audience includes engineers, analysts, and managers who want to build their knowledge and skills in data science.</span></span>

## <a name="confusion-matrix"></a><span data-ttu-id="bad60-108">Matrice di confusione</span><span class="sxs-lookup"><span data-stu-id="bad60-108">Confusion matrix</span></span>
<span data-ttu-id="bad60-109">Dopo il training di un problema ML supervisionato su una serie di dati storici, viene testato utilizzando i dati che vengono conservati dal processo di training.</span><span class="sxs-lookup"><span data-stu-id="bad60-109">After a supervised ML problem is trained on a set of historical data, it's tested by using data that is withheld from the training process.</span></span> <span data-ttu-id="bad60-110">In questo modo, puoi confrontare le previsioni del modello di training con i valori effettivi.</span><span class="sxs-lookup"><span data-stu-id="bad60-110">In this way, you can compare the predictions from the trained model with the actual values.</span></span> <span data-ttu-id="bad60-111">La matrice di confusione fornisce un mezzo per valutare il successo di un problema di classificazione e dove vengono commessi errori (cioè, dove diventa "confuso").</span><span class="sxs-lookup"><span data-stu-id="bad60-111">The confusion matrix provides a means of evaluating how successful a classification problem is and where it makes mistakes (that is, where it becomes "confused").</span></span>

<span data-ttu-id="bad60-112">Ad esempio, il tuo obiettivo è prevedere se un animale domestico è un cane o un gatto, in base ad alcuni attributi fisici e comportamentali.</span><span class="sxs-lookup"><span data-stu-id="bad60-112">For example, your objective is to predict whether a pet is a dog or a cat, based on some physical and behavioral attributes.</span></span> <span data-ttu-id="bad60-113">Se hai un set di dati di prova che contiene 30 cani e 20 gatti, la matrice di confusione potrebbe essere simile alla seguente illustrazione.</span><span class="sxs-lookup"><span data-stu-id="bad60-113">If you have a test dataset that contains 30 dogs and 20 cats, the confusion matrix might resemble the following illustration.</span></span>

![Esempio di previsione delle specie](media/species-prediction-matrix.png)

<span data-ttu-id="bad60-115">I numeri nelle celle verdi rappresentano le previsioni corrette.</span><span class="sxs-lookup"><span data-stu-id="bad60-115">The numbers in the green cells represent correct predictions.</span></span> <span data-ttu-id="bad60-116">Come puoi vedere, il modello ha previsto correttamente una percentuale di gatti.</span><span class="sxs-lookup"><span data-stu-id="bad60-116">As you can see, the model predicted a higher percentage of the actual cats correctly.</span></span> <span data-ttu-id="bad60-117">La precisione complessiva del modello è facile da calcolare.</span><span class="sxs-lookup"><span data-stu-id="bad60-117">The overall accuracy of the model is easy to calculate.</span></span> <span data-ttu-id="bad60-118">In questo caso, è 42 ÷ 50 o 0,84.</span><span class="sxs-lookup"><span data-stu-id="bad60-118">In this case, it's 42 ÷ 50, or 0.84.</span></span>

### <a name="multi-class-classifiers-in-a-confusion-matrix"></a><span data-ttu-id="bad60-119">Classificatori multi-classe in una matrice di confusione</span><span class="sxs-lookup"><span data-stu-id="bad60-119">Multi-class classifiers in a confusion matrix</span></span>

<span data-ttu-id="bad60-120">La maggior parte delle discussioni sulla matrice di confusione si concentra sui classificatori binari, come nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="bad60-120">Most discussions about the confusion matrix are focused on binary classifiers, as in the preceding example.</span></span> <span data-ttu-id="bad60-121">Questo caso è un caso speciale in cui è possibile considerare altre metriche, come sensibilità e richiamo.</span><span class="sxs-lookup"><span data-stu-id="bad60-121">This case is a special case where other metrics can be considered, such as sensitivity and recall.</span></span>

<span data-ttu-id="bad60-122">Successivamente, considereremo un problema di classificazione per uno scenario finanziario che ha tre stati.</span><span class="sxs-lookup"><span data-stu-id="bad60-122">Next, we will consider a classification problem for a finance scenario that has three states.</span></span> <span data-ttu-id="bad60-123">Il modello prevede se una fattura cliente verrà pagata in tempo, in ritardo o molto tardi.</span><span class="sxs-lookup"><span data-stu-id="bad60-123">The model predicts whether a customer invoice will be paid on time, late, or very late.</span></span> <span data-ttu-id="bad60-124">Ad esempio, su 100 fatture di prova, 50 vengono pagate in tempo, 35 vengono pagate in ritardo e 15 vengono pagate molto tardi.</span><span class="sxs-lookup"><span data-stu-id="bad60-124">For example, out of 100 test invoices, 50 are paid on time, 35 are paid late, and 15 are paid very late.</span></span> <span data-ttu-id="bad60-125">In questo caso, un modello potrebbe produrre una matrice di confusione simile alla seguente illustrazione.</span><span class="sxs-lookup"><span data-stu-id="bad60-125">In this case, a model might produce a confusion matrix that resembles the following illustration.</span></span>

![Modello 1](media/payment-prediction-matrix.png)<span data-ttu-id="bad60-127">]</span><span class="sxs-lookup"><span data-stu-id="bad60-127">]</span></span>

<span data-ttu-id="bad60-128">Una matrice di confusione fornisce molte più informazioni rispetto a una semplice metrica di precisione.</span><span class="sxs-lookup"><span data-stu-id="bad60-128">A confusion matrix provides significantly more information than a simple accuracy metric.</span></span> <span data-ttu-id="bad60-129">Tuttavia, è ancora relativamente facile da capire.</span><span class="sxs-lookup"><span data-stu-id="bad60-129">However, it's still relatively easy to understand.</span></span> <span data-ttu-id="bad60-130">Una matrice di confusione indica se disponi di un set di dati bilanciato in cui le classi di output hanno conteggi simili.</span><span class="sxs-lookup"><span data-stu-id="bad60-130">A confusion matrix tells you whether you have a balanced dataset where the output classes have similar counts.</span></span> <span data-ttu-id="bad60-131">Per lo scenario multi-classe, indica quanto potrebbe essere lontana una previsione quando le classi di output sono ordinali, come nell'esempio precedente sui pagamenti dei clienti.</span><span class="sxs-lookup"><span data-stu-id="bad60-131">For the multi-class scenario, it tells you how far off a prediction might be when the output classes are ordinal, as in the preceding example about customer payments.</span></span>

## <a name="model-accuracy"></a><span data-ttu-id="bad60-132">Accuratezza del modello</span><span class="sxs-lookup"><span data-stu-id="bad60-132">Model accuracy</span></span> 
<span data-ttu-id="bad60-133">Diverse metriche di accuratezza hanno il vantaggio di quantificare la qualità del modello.</span><span class="sxs-lookup"><span data-stu-id="bad60-133">Different accuracy metrics have the advantage of quantifying the model quality.</span></span> 

<span data-ttu-id="bad60-134">Poiché l'accuratezza è una metrica facile da capire, è un buon punto di partenza per spiegare un modello ad altre persone, in particolare agli utenti del modello che non sono data scientist.</span><span class="sxs-lookup"><span data-stu-id="bad60-134">Because accuracy is an easy metric to understand, it's a good starting point for explaining a model to other people, especially to users of the model who aren't data scientists.</span></span> <span data-ttu-id="bad60-135">Non è richiesta alcuna comprensione delle statistiche per comprendere l'accuratezza del modello.</span><span class="sxs-lookup"><span data-stu-id="bad60-135">No understanding of statistics is required to understand the model's accuracy.</span></span> <span data-ttu-id="bad60-136">Quando è disponibile una matrice di confusione, fornisce ulteriori informazioni dettagliate sulle prestazioni del modello.</span><span class="sxs-lookup"><span data-stu-id="bad60-136">When a confusion matrix is available, it provides further insight into the model's performance.</span></span>

<span data-ttu-id="bad60-137">Tuttavia, per una comprensione più approfondita, è necessario notare diverse sfide associate alla precisione.</span><span class="sxs-lookup"><span data-stu-id="bad60-137">However, for a more thorough understanding, several challenges that are associated with accuracy should be noted.</span></span> <span data-ttu-id="bad60-138">L'utilità della metrica dipende dal contesto del problema.</span><span class="sxs-lookup"><span data-stu-id="bad60-138">The usefulness of the metric depends on the context of the problem.</span></span> <span data-ttu-id="bad60-139">Una domanda che spesso sorge in relazione alle prestazioni del modello è: "Quanto è buono il modello?"</span><span class="sxs-lookup"><span data-stu-id="bad60-139">A question that often arises in relation to model performance is, "How good is the model?"</span></span> <span data-ttu-id="bad60-140">Tuttavia, la risposta a questa domanda non è necessariamente semplice.</span><span class="sxs-lookup"><span data-stu-id="bad60-140">However, the answer to this question isn't necessarily straightforward.</span></span> <span data-ttu-id="bad60-141">Considera la seguente matrice di confusione (modello 2).</span><span class="sxs-lookup"><span data-stu-id="bad60-141">Consider the following confusion matrix (model 2).</span></span>

![Esempio di previsione del pagamento con un campione più ampio](media/payment-prediction-matrix-2.png)

<span data-ttu-id="bad60-143">Un rapido calcolo mostra che l'accuratezza di questo modello è (70 + 10 + 3) ÷ 100 o 0,83.</span><span class="sxs-lookup"><span data-stu-id="bad60-143">A quick calculation shows that this model's accuracy is (70 + 10 + 3) ÷ 100, or 0.83.</span></span> <span data-ttu-id="bad60-144">Ad un'occhiata superficiale, questo risultato sembra migliore del risultato per il precedente modello multi-classe (modello 1), che ha una precisione di 0,73.</span><span class="sxs-lookup"><span data-stu-id="bad60-144">On the surface, this result seems better than result for the previous multi-class model (model 1), which has an accuracy of 0.73.</span></span> <span data-ttu-id="bad60-145">Ma è migliore?</span><span class="sxs-lookup"><span data-stu-id="bad60-145">But is it better?</span></span>

<span data-ttu-id="bad60-146">Per iniziare ad affrontare questa domanda, considera l'accuratezza di un'ipotesi ingenua.</span><span class="sxs-lookup"><span data-stu-id="bad60-146">To begin to address this question, consider the accuracy of a naïve guess.</span></span> <span data-ttu-id="bad60-147">Per un problema di classificazione, una semplice supposizione predice sempre la classe più comune.</span><span class="sxs-lookup"><span data-stu-id="bad60-147">For a classification problem, a simple guess will always predict the most common class.</span></span> <span data-ttu-id="bad60-148">Per il modello 1, tale ipotesi sarà "puntuale" e produrrà una precisione di 0,50.</span><span class="sxs-lookup"><span data-stu-id="bad60-148">For model 1, that guess will be "on time," and it will produce an accuracy of 0.50.</span></span> <span data-ttu-id="bad60-149">Per il modello 2, tale ipotesi sarà "puntuale" e produrrà una precisione di 0,80.</span><span class="sxs-lookup"><span data-stu-id="bad60-149">The guess for model 2 will also be "on time," and it will produce an accuracy of 0.80.</span></span> <span data-ttu-id="bad60-150">Poiché il modello 1 migliora l'ipotesi ingenua di 0,73 - 0,50 = 0,23, mentre il modello 2 migliora l'ipotesi ingenua di 0,83 - 0,80 = 0,03, il modello 1 è un modello migliore, anche se ha una precisione inferiore.</span><span class="sxs-lookup"><span data-stu-id="bad60-150">Because model 1 improves on the naïve guess by 0.73 – 0.50 = 0.23, whereas model 2 improves on the naïve guess by 0.83 – 0.80 = 0.03, model 1 is a better model, even though it has lower accuracy.</span></span> <span data-ttu-id="bad60-151">Il calcolo rivela che una valutazione efficace della qualità di un modello richiede più contesto rispetto al valore di accuratezza.</span><span class="sxs-lookup"><span data-stu-id="bad60-151">The calculation reveals that effective assessment of a model's quality requires more context than the accuracy value.</span></span>

<span data-ttu-id="bad60-152">Un altro aspetto è degno di nota.</span><span class="sxs-lookup"><span data-stu-id="bad60-152">Another aspect is worth noting.</span></span> <span data-ttu-id="bad60-153">Considera uno scenario in cui viene utilizzato un test medico per individuare una malattia in un paziente.</span><span class="sxs-lookup"><span data-stu-id="bad60-153">Consider a scenario where a medical test is used to detect a disease in a patient.</span></span> <span data-ttu-id="bad60-154">Questo problema è un problema di classificazione binaria in cui un risultato positivo indica che il paziente ha la malattia.</span><span class="sxs-lookup"><span data-stu-id="bad60-154">This problem is a binary classification problem where a positive result indicates that the patient has the disease.</span></span> <span data-ttu-id="bad60-155">In questo scenario, devi pensare all'impatto dei seguenti errori:</span><span class="sxs-lookup"><span data-stu-id="bad60-155">In this scenario, you must think about the impact of the following errors:</span></span>

- <span data-ttu-id="bad60-156">Falsi positivi, dove il test dice che un paziente ha la malattia, ma in realtà non ce l'ha.</span><span class="sxs-lookup"><span data-stu-id="bad60-156">False positives, where the test says that a patient has the disease, but the patient doesn't really have it.</span></span>
- <span data-ttu-id="bad60-157">Falsi negativi, dove il test dice che un paziente non ha la malattia, ma in realtà ce l'ha.</span><span class="sxs-lookup"><span data-stu-id="bad60-157">False negatives, where the test says that a patient doesn't have the disease, but the patient really does have it.</span></span>

<span data-ttu-id="bad60-158">Ovviamente entrambi i tipi di errore non sono auspicabili, ma qual è il peggiore?</span><span class="sxs-lookup"><span data-stu-id="bad60-158">Obviously, both types of error are undesirable, but which is worse?</span></span> <span data-ttu-id="bad60-159">Di nuovo, dipende.</span><span class="sxs-lookup"><span data-stu-id="bad60-159">Again, it depends.</span></span> <span data-ttu-id="bad60-160">Nel caso di una malattia pericolosa per la vita che richiede un trattamento rapido, la riduzione al minimo dei falsi negativi (si spera seguita da test aggiuntivi) ha la priorità.</span><span class="sxs-lookup"><span data-stu-id="bad60-160">In the case of a life-threatening disease that requires fast treatment, minimization of false negatives (hopefully followed by additional tests) takes priority.</span></span> <span data-ttu-id="bad60-161">In altre situazioni meno critiche, i creatori del modello potrebbero invece ridurre al minimo i falsi positivi.</span><span class="sxs-lookup"><span data-stu-id="bad60-161">In other, less critical situations, the model creators might minimize false positives instead.</span></span> <span data-ttu-id="bad60-162">In ogni caso, una conclusione ragionevole è che per determinare in modo efficace la qualità di un modello, è necessario disporre di più informazioni di quelle fornite da una metrica di accuratezza.</span><span class="sxs-lookup"><span data-stu-id="bad60-162">At any rate, a reasonable conclusion is that to effectively determine a model's quality, you must have more information than an accuracy metric provides.</span></span>

### <a name="recommendations"></a><span data-ttu-id="bad60-163">Suggerimenti</span><span class="sxs-lookup"><span data-stu-id="bad60-163">Recommendations</span></span>

<span data-ttu-id="bad60-164">La precisione è uno strumento importante per comunicare con esperti di dominio che non hanno familiarità con le statistiche.</span><span class="sxs-lookup"><span data-stu-id="bad60-164">Accuracy is an important tool for communicating with domain experts who aren't familiar with statistics.</span></span> <span data-ttu-id="bad60-165">Tuttavia, per rendere utili le informazioni, è fondamentale fornire un contesto aggiuntivo insieme al valore di accuratezza.</span><span class="sxs-lookup"><span data-stu-id="bad60-165">However, to make the information useful, it's critical that additional context be provided together with the accuracy value.</span></span>

<span data-ttu-id="bad60-166">Per lo scenario di previsione dei pagamenti, è possibile impostare un obiettivo per il modello ML che includa fattori in diversi comportamenti di pagamento.</span><span class="sxs-lookup"><span data-stu-id="bad60-166">For the payment prediction scenario, you can set a target for the ML model that includes factors in different payment behaviors.</span></span> <span data-ttu-id="bad60-167">L'obiettivo è che il modello dovrebbe migliorare su un'ipotesi ingenua riducendo il numero di risposte errate di almeno il 50 percento.</span><span class="sxs-lookup"><span data-stu-id="bad60-167">The target is that the model should improve upon a naïve guess by reducing the number of incorrect answers by at least 50 percent.</span></span> <span data-ttu-id="bad60-168">In altre parole, vuoi una precisione dell'obiettivo che divida la differenza tra l'accuratezza di un'ipotesi ingenua e il 100 percento.</span><span class="sxs-lookup"><span data-stu-id="bad60-168">In other words, you want a target accuracy that splits the different between the accuracy of a naïve guess and 100 percent.</span></span>

<span data-ttu-id="bad60-169">La tabella seguente riassume questo principio per le matrici di confusione in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="bad60-169">The following table summarizes this principle for the confusion matrices in this topic.</span></span>

| <span data-ttu-id="bad60-170">Modello</span><span class="sxs-lookup"><span data-stu-id="bad60-170">Model</span></span>   | <span data-ttu-id="bad60-171">Ipotesi ingenua</span><span class="sxs-lookup"><span data-stu-id="bad60-171">Naïve guess</span></span> | <span data-ttu-id="bad60-172">Destinatari</span><span class="sxs-lookup"><span data-stu-id="bad60-172">Target</span></span> | <span data-ttu-id="bad60-173">Accuratezza del modello</span><span class="sxs-lookup"><span data-stu-id="bad60-173">Model accuracy</span></span> | <span data-ttu-id="bad60-174">L'obiettivo è stato raggiunto?</span><span class="sxs-lookup"><span data-stu-id="bad60-174">Is the goal met?</span></span>                                          |
|---------|-------------|--------|----------------|-----------------------------------------------------------|
| <span data-ttu-id="bad60-175">Modello 1</span><span class="sxs-lookup"><span data-stu-id="bad60-175">Model 1</span></span> | <span data-ttu-id="bad60-176">0.50</span><span class="sxs-lookup"><span data-stu-id="bad60-176">0.50</span></span>        | <span data-ttu-id="bad60-177">0.75</span><span class="sxs-lookup"><span data-stu-id="bad60-177">0.75</span></span>   | <span data-ttu-id="bad60-178">0.73</span><span class="sxs-lookup"><span data-stu-id="bad60-178">0.73</span></span>           | <span data-ttu-id="bad60-179">Quasi.</span><span class="sxs-lookup"><span data-stu-id="bad60-179">Almost.</span></span> <span data-ttu-id="bad60-180">Questo modello migliora notevolmente l'ipotesi.</span><span class="sxs-lookup"><span data-stu-id="bad60-180">This model significantly improves upon the guess.</span></span> |
| <span data-ttu-id="bad60-181">Modello 2</span><span class="sxs-lookup"><span data-stu-id="bad60-181">Model 2</span></span> | <span data-ttu-id="bad60-182">0.80</span><span class="sxs-lookup"><span data-stu-id="bad60-182">0.80</span></span>        | <span data-ttu-id="bad60-183">0.90</span><span class="sxs-lookup"><span data-stu-id="bad60-183">0.90</span></span>   | <span data-ttu-id="bad60-184">0.83</span><span class="sxs-lookup"><span data-stu-id="bad60-184">0.83</span></span>           | <span data-ttu-id="bad60-185">N.</span><span class="sxs-lookup"><span data-stu-id="bad60-185">No.</span></span> <span data-ttu-id="bad60-186">È necessario un miglioramento.</span><span class="sxs-lookup"><span data-stu-id="bad60-186">Improvement is required.</span></span>                              |

## <a name="classification-f1-accuracy"></a><span data-ttu-id="bad60-187">Accuratezza F1 della classificazione</span><span class="sxs-lookup"><span data-stu-id="bad60-187">Classification F1 accuracy</span></span>

<span data-ttu-id="bad60-188">L'ultima considerazione in questo argomento è una misura più avanzata delle prestazioni di classificazione ML nota come precisione F1.</span><span class="sxs-lookup"><span data-stu-id="bad60-188">The final consideration in this topic is a more advanced measure of classification ML performance that is known as F1 accuracy.</span></span>

<span data-ttu-id="bad60-189">Prima di poter definire l'accuratezza F1, è necessario introdurre due metriche aggiuntive: precisione e richiamo.</span><span class="sxs-lookup"><span data-stu-id="bad60-189">Before F1 accuracy can be defined, two additional metrics must be introduced: precision and recall.</span></span> <span data-ttu-id="bad60-190">La precisione indica quante del numero totale di previsioni specificate come positive sono state assegnate correttamente.</span><span class="sxs-lookup"><span data-stu-id="bad60-190">Precision indicates how many of the total number of predictions that are specified as positive are correctly assigned.</span></span> <span data-ttu-id="bad60-191">Questa metrica è nota anche come valore predittivo positivo.</span><span class="sxs-lookup"><span data-stu-id="bad60-191">This metric is also known as the positive predictive value.</span></span> <span data-ttu-id="bad60-192">Il richiamo è il numero totale di casi positivi effettivi previsti correttamente.</span><span class="sxs-lookup"><span data-stu-id="bad60-192">Recall is the total number of the actual positive cases that were predicted correctly.</span></span> <span data-ttu-id="bad60-193">Questa metrica è nota anche come sensibilità.</span><span class="sxs-lookup"><span data-stu-id="bad60-193">This metric is also known as sensitivity.</span></span>

<span data-ttu-id="bad60-194">[![Risultati veri contro risultati falsi](./media/tn-fn.png)](./media/tn-fn.png)</span><span class="sxs-lookup"><span data-stu-id="bad60-194">[![True results vs. false results](./media/tn-fn.png)](./media/tn-fn.png)</span></span>

<span data-ttu-id="bad60-195">Nella matrice di confusione nell'illustrazione precedente, queste metriche vengono calcolate nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="bad60-195">In the confusion matrix in the preceding illustration, these metrics are calculated in the following way:</span></span>

- <span data-ttu-id="bad60-196">Precisione = TP ÷ (TP + FP)</span><span class="sxs-lookup"><span data-stu-id="bad60-196">Precision = TP ÷ (TP + FP)</span></span>
- <span data-ttu-id="bad60-197">Richiamo = TP ÷ (TP + FN)</span><span class="sxs-lookup"><span data-stu-id="bad60-197">Recall = TP ÷ (TP + FN)</span></span>

<span data-ttu-id="bad60-198">La misura F1 combina precisione e richiamo.</span><span class="sxs-lookup"><span data-stu-id="bad60-198">The F1 measure combines precision and recall.</span></span> <span data-ttu-id="bad60-199">Il risultato è la media armonica dei due valori.</span><span class="sxs-lookup"><span data-stu-id="bad60-199">The result is the harmonic mean of the two values.</span></span> <span data-ttu-id="bad60-200">Viene calcolato nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="bad60-200">It's calculated in the following way:</span></span>

- <span data-ttu-id="bad60-201">F1 = 2 × (Precisione × Richiamo) ÷ (Precisione + Richiamo)</span><span class="sxs-lookup"><span data-stu-id="bad60-201">F1 = 2 × (Precision × Recall) ÷ (Precision + Recall)</span></span>

<span data-ttu-id="bad60-202">Vediamo un esempio concreto.</span><span class="sxs-lookup"><span data-stu-id="bad60-202">Let's look at a concrete example.</span></span> <span data-ttu-id="bad60-203">In precedenza in questo argomento, abbiamo utilizzato un esempio di un modello che prevedeva se un animale era un cane o un gatto.</span><span class="sxs-lookup"><span data-stu-id="bad60-203">Earlier in this topic, there was an example of a model that predicted whether an animal was a dog or a cat.</span></span> <span data-ttu-id="bad60-204">L'illustrazione è ripetuta qui.</span><span class="sxs-lookup"><span data-stu-id="bad60-204">The illustration is repeated here.</span></span>

<span data-ttu-id="bad60-205">[![Esempio di previsione delle specie (ripetuto)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="bad60-205">[![Species prediction example (repeated)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="bad60-206">Ecco i risultati se "Cane" viene utilizzato come risposta positiva.</span><span class="sxs-lookup"><span data-stu-id="bad60-206">Here are the results if "Dog" is used as the positive answer.</span></span>

- <span data-ttu-id="bad60-207">Precisione = 24 ÷ (24 + 2) = 0,9231</span><span class="sxs-lookup"><span data-stu-id="bad60-207">Precision = 24 ÷ (24 + 2) = 0.9231</span></span>
- <span data-ttu-id="bad60-208">Richiamo = 24 ÷ (24 + 6) = 0,8</span><span class="sxs-lookup"><span data-stu-id="bad60-208">Recall = 24 ÷ (24 + 6) = 0.8</span></span>
- <span data-ttu-id="bad60-209">F1 = 2 × (0,9231 × 0,8) ÷ (0,9231 + 0,8) = 0,8572</span><span class="sxs-lookup"><span data-stu-id="bad60-209">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span></span>

<span data-ttu-id="bad60-210">Come puoi vedere, il valore F1 è compreso tra i valori di precisione e richiamo.</span><span class="sxs-lookup"><span data-stu-id="bad60-210">As you can see, the F1 value is between the values for precision and recall.</span></span>

<span data-ttu-id="bad60-211">Sebbene l'accuratezza F1 non sia così facile da capire, aggiunge sfumature al numero di accuratezza di base.</span><span class="sxs-lookup"><span data-stu-id="bad60-211">Although F1 accuracy isn't as easy to understand, it adds nuance to the basic accuracy number.</span></span> <span data-ttu-id="bad60-212">Può anche aiutare con set di dati non bilanciati, come mostrerà la discussione seguente.</span><span class="sxs-lookup"><span data-stu-id="bad60-212">It can also help with unbalanced datasets, as the following discussion will show.</span></span>

<span data-ttu-id="bad60-213">La sezione [Accuratezza del modello](#model-accuracy) di questo argomento ha confrontato le seguenti due matrici di confusione.</span><span class="sxs-lookup"><span data-stu-id="bad60-213">The [Model accuracy](#model-accuracy) section of this topic compared the following two confusion matrices.</span></span> <span data-ttu-id="bad60-214">Anche se il primo modello aveva un'accuratezza inferiore, è stato ritenuto un modello più utile perché mostrava un miglioramento maggiore rispetto all'ipotesi predefinita di un pagamento puntuale.</span><span class="sxs-lookup"><span data-stu-id="bad60-214">Even though the first model had lower accuracy, it was deemed a more useful model because it showed more improvement than the default guess of an on-time payment.</span></span>

![Esempio di previsione di pagamento rispetto ai valori effettivi](media/payment-prediction-matrix.png)

![Esempio di previsione del pagamento con un campione più ampio (ripetuto)](media/payment-prediction-matrix-2.png)

<span data-ttu-id="bad60-217">Vediamo come si confrontano questi due modelli quando viene utilizzato il punteggio F1.</span><span class="sxs-lookup"><span data-stu-id="bad60-217">Let's see how these two models compare when the F1 score is used.</span></span> <span data-ttu-id="bad60-218">Il punteggio F1 tiene conto della precisione e del richiamo per ogni stato, quindi il calcolo macro F1 calcola la media del punteggio F1 negli stati per determinare un punteggio F1 complessivo.</span><span class="sxs-lookup"><span data-stu-id="bad60-218">The F1 score factors in precision and recall for each state, and the F1 macro calculation then averages the F1 score across the states to determine an overall F1 score.</span></span> <span data-ttu-id="bad60-219">Esistono altre varianti F1, ma è di maggior interesse considerare la versione macro, vista la stessa considerazione che viene data a tutti e tre gli stati.</span><span class="sxs-lookup"><span data-stu-id="bad60-219">There are other F1 variants, but it's of greater interest to consider the macro version, given the equal consideration that is given to all three states.</span></span>

<span data-ttu-id="bad60-220">Per semplificare i calcoli, sono stati creati array di esempio per abbinare i valori effettivi e previsti.</span><span class="sxs-lookup"><span data-stu-id="bad60-220">To simplify the calculations, sample arrays were built to match the actual and predicted values.</span></span> <span data-ttu-id="bad60-221">Questi array hanno utilizzato la libreria di metriche di sklearn in Python per calcolare i valori.</span><span class="sxs-lookup"><span data-stu-id="bad60-221">These arrays used sklearn's metrics library in Python to calculate the values.</span></span> <span data-ttu-id="bad60-222">Questo è il risultato.</span><span class="sxs-lookup"><span data-stu-id="bad60-222">Here is the result.</span></span>

| <span data-ttu-id="bad60-223">Modello</span><span class="sxs-lookup"><span data-stu-id="bad60-223">Model</span></span>   | <span data-ttu-id="bad60-224">Ipotesi ingenua</span><span class="sxs-lookup"><span data-stu-id="bad60-224">Naive guess</span></span> | <span data-ttu-id="bad60-225">Precisione</span><span class="sxs-lookup"><span data-stu-id="bad60-225">Accuracy</span></span> | <span data-ttu-id="bad60-226">Macro F1</span><span class="sxs-lookup"><span data-stu-id="bad60-226">F1 macro</span></span> |
|---------|-------------|----------|----------|
| <span data-ttu-id="bad60-227">Modello 1</span><span class="sxs-lookup"><span data-stu-id="bad60-227">Model 1</span></span> | <span data-ttu-id="bad60-228">0.5</span><span class="sxs-lookup"><span data-stu-id="bad60-228">0.5</span></span>         | <span data-ttu-id="bad60-229">0.73</span><span class="sxs-lookup"><span data-stu-id="bad60-229">0.73</span></span>     | <span data-ttu-id="bad60-230">0.67</span><span class="sxs-lookup"><span data-stu-id="bad60-230">0.67</span></span>     |
| <span data-ttu-id="bad60-231">Modello 2</span><span class="sxs-lookup"><span data-stu-id="bad60-231">Model 2</span></span> | <span data-ttu-id="bad60-232">0.80</span><span class="sxs-lookup"><span data-stu-id="bad60-232">0.80</span></span>        | <span data-ttu-id="bad60-233">0.83</span><span class="sxs-lookup"><span data-stu-id="bad60-233">0.83</span></span>     | <span data-ttu-id="bad60-234">0.66</span><span class="sxs-lookup"><span data-stu-id="bad60-234">0.66</span></span>     |

<span data-ttu-id="bad60-235">Per maggiori dettagli su come funziona questo calcolo, ecco il report di classificazione sklearn.metrics per il modello 1.</span><span class="sxs-lookup"><span data-stu-id="bad60-235">For more detail about how this calculation works, here is the sklearn.metrics classification report for model 1.</span></span> <span data-ttu-id="bad60-236">I tre stati, "Puntuale", "In ritardo" e "Molto tardi", sono rappresentati dalle righe contrassegnate rispettivamente con 1, 2 e 3.</span><span class="sxs-lookup"><span data-stu-id="bad60-236">The three states, "On time," "Late," and "Very late," are represented by the rows that are labeled 1, 2, and 3, respectively.</span></span> <span data-ttu-id="bad60-237">La media macro è solo la media della colonna "f1-score".</span><span class="sxs-lookup"><span data-stu-id="bad60-237">The macro average is just the average of the "f1-score" column.</span></span>

| &nbsp;    | <span data-ttu-id="bad60-238">precisione</span><span class="sxs-lookup"><span data-stu-id="bad60-238">precision</span></span> | <span data-ttu-id="bad60-239">richiamo</span><span class="sxs-lookup"><span data-stu-id="bad60-239">recall</span></span>   | <span data-ttu-id="bad60-240">f1-score</span><span class="sxs-lookup"><span data-stu-id="bad60-240">f1-score</span></span> |
|-----------|-----------|----------|----------|
| <span data-ttu-id="bad60-241">**1**</span><span class="sxs-lookup"><span data-stu-id="bad60-241">**1**</span></span>     | <span data-ttu-id="bad60-242">0.83</span><span class="sxs-lookup"><span data-stu-id="bad60-242">0.83</span></span>      | <span data-ttu-id="bad60-243">0.80</span><span class="sxs-lookup"><span data-stu-id="bad60-243">0.80</span></span>     | <span data-ttu-id="bad60-244">0.82</span><span class="sxs-lookup"><span data-stu-id="bad60-244">0.82</span></span>     |
| <span data-ttu-id="bad60-245">**2**</span><span class="sxs-lookup"><span data-stu-id="bad60-245">**2**</span></span>     | <span data-ttu-id="bad60-246">0.68</span><span class="sxs-lookup"><span data-stu-id="bad60-246">0.68</span></span>      | <span data-ttu-id="bad60-247">0.71</span><span class="sxs-lookup"><span data-stu-id="bad60-247">0.71</span></span>     | <span data-ttu-id="bad60-248">0.69</span><span class="sxs-lookup"><span data-stu-id="bad60-248">0.69</span></span>     |
| <span data-ttu-id="bad60-249">**3**</span><span class="sxs-lookup"><span data-stu-id="bad60-249">**3**</span></span>     | <span data-ttu-id="bad60-250">0.50</span><span class="sxs-lookup"><span data-stu-id="bad60-250">0.50</span></span>      | <span data-ttu-id="bad60-251">0.50</span><span class="sxs-lookup"><span data-stu-id="bad60-251">0.50</span></span>     | <span data-ttu-id="bad60-252">0.50</span><span class="sxs-lookup"><span data-stu-id="bad60-252">0.50</span></span>     |

<span data-ttu-id="bad60-253">Come mostrano questi risultati, i due modelli hanno punteggi di accuratezza macro F1 quasi identici.</span><span class="sxs-lookup"><span data-stu-id="bad60-253">As these results show, the two models have nearly identical F1 macro accuracy scores.</span></span> <span data-ttu-id="bad60-254">In questo e in molti altri casi, l'accuratezza F1 fornisce un migliore indicatore delle capacità di un modello.</span><span class="sxs-lookup"><span data-stu-id="bad60-254">In this and many other cases, F1 accuracy provides a better indicator of a model's capability.</span></span> <span data-ttu-id="bad60-255">Per quanto riguarda l'accuratezza, l'interpretazione dei risultati richiede la comprensione di ciò che è più importante considerare nel modello.</span><span class="sxs-lookup"><span data-stu-id="bad60-255">As for accuracy, interpretation of the results requires that you understand what is most important to consider in the model.</span></span>

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
