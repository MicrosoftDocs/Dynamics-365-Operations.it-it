---
title: Creare un account di Archiviazione di Azure e un Azure Key Vault
description: Questo argomento spiega come creare un account di Archiviazione di Azure e Azure Key Vault.
author: gionoder
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5a883011bbff6d82504497d739c07f1ada9e5f69
ms.sourcegitcommit: f860ac2b18f6bbbfc4a46b497baec2477105b116
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/19/2020
ms.locfileid: "4444961"
---
# <a name="create-an-azure-storage-account-and-a-key-vault"></a><span data-ttu-id="60c84-103">Creare un account di Archiviazione di Azure e un Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="60c84-103">Create an Azure storage account and a key vault</span></span>

[!include [banner](../includes/banner.md)]



<span data-ttu-id="60c84-104">Il servizio del componente aggiuntivo per la fatturazione elettronica si assume la responsabilità di archiviare tutti i dati aziendali nelle risorse di Microsoft Azure di proprietà della tua azienda.</span><span class="sxs-lookup"><span data-stu-id="60c84-104">The Electronic invoicing add-on service takes responsibility for storing all your business data in the Microsoft Azure resources that are owned by your company.</span></span> <span data-ttu-id="60c84-105">Per garantire che il servizio funzioni correttamente e che tutti i dati aziendali necessari e generati dal componente aggiuntivo per la fatturazione elettronica siano accessibili solo dal componente aggiuntivo, è necessario creare due risorse principali di Azure:</span><span class="sxs-lookup"><span data-stu-id="60c84-105">To ensure that the service works correctly, and that all the business data that is needed for and generated by the Electronic invoicing add-on is accessed only by the add-on, you must create two main Azure resources:</span></span>

- <span data-ttu-id="60c84-106">Un account di Archiviazione di Azure (Archiviazione BLOB) per archiviare le fatture elettroniche</span><span class="sxs-lookup"><span data-stu-id="60c84-106">An Azure storage account (Blob storage) to store electronic invoices</span></span>
- <span data-ttu-id="60c84-107">Un Azure Key Vault per archiviare i certificati e l'URI (Uniform Resource Identifier) dell'account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="60c84-107">An Azure key vault to store certificates and the Uniform Resource Identifier (URI) of the storage account</span></span>

> [!NOTE]
> <span data-ttu-id="60c84-108">Una risorsa per l'insieme di credenziali delle chiavi dedicata e Archiviazione BLOB del cliente devono essere allocati specificamente per l'utilizzo con il componente aggiuntivo per la fatturazione elettronica.</span><span class="sxs-lookup"><span data-stu-id="60c84-108">A dedicated key vault resource and customer Blob storage must be allocated specifically for use with the Electronic invoicing add-on.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="60c84-109">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="60c84-109">Prerequisites</span></span>

<span data-ttu-id="60c84-110">Prima di poter completare i passaggi in questo argomento, è necessario accertarsi che le seguenti attività siano state completate:</span><span class="sxs-lookup"><span data-stu-id="60c84-110">Before you can complete the steps in this topic, you must make sure that the following tasks have been completed:</span></span>

- <span data-ttu-id="60c84-111">Crea una risorsa Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="60c84-111">Create a key vault resource in Azure.</span></span> <span data-ttu-id="60c84-112">Per ulteriori informazioni sulle misure, vedi [Informazioni su Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span><span class="sxs-lookup"><span data-stu-id="60c84-112">For more information, see [About Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span></span>
- <span data-ttu-id="60c84-113">Creare un account di Archiviazione di Azure (archiviazione BLOB).</span><span class="sxs-lookup"><span data-stu-id="60c84-113">Create an Azure storage account (Blob storage).</span></span> <span data-ttu-id="60c84-114">Per ulteriori informazioni, vedi [Gestione dell'account di Archiviazione di Azure](https://docs.microsoft.com/azure/storage/blobs/).</span><span class="sxs-lookup"><span data-stu-id="60c84-114">For more information, see [Maintaining Azure Storage Account](https://docs.microsoft.com/azure/storage/blobs/).</span></span>

## <a name="overview"></a><span data-ttu-id="60c84-115">Panoramica</span><span class="sxs-lookup"><span data-stu-id="60c84-115">Overview</span></span>

<span data-ttu-id="60c84-116">In questo argomento, completerai due passaggi principali:</span><span class="sxs-lookup"><span data-stu-id="60c84-116">In this topic, you will complete two main steps:</span></span>

- <span data-ttu-id="60c84-117">Configura l'account di Archiviazione di Azure per ottenere l'URI dell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="60c84-117">Set up the Azure storage account to get the storage account URI.</span></span>
- <span data-ttu-id="60c84-118">Configura Azure Key Vault per archiviare l'URI dell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="60c84-118">Set up the key vault to store the storage account URI.</span></span>

## <a name="set-up-the-azure-storage-account-to-get-the-storage-account-uri"></a><span data-ttu-id="60c84-119">Configurare l'account di Archiviazione di Azure per ottenere l'URI dell'account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="60c84-119">Set up the Azure storage account to get the storage account URI</span></span>

1. <span data-ttu-id="60c84-120">Apri l'account di archiviazione che intendi utilizzare con il componente aggiuntivo per la fatturazione elettronica.</span><span class="sxs-lookup"><span data-stu-id="60c84-120">Open the storage account that you plan to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="60c84-121">Vai a **Servizio BLOB** \> **Contenitori** e crea un nuovo contenitore.</span><span class="sxs-lookup"><span data-stu-id="60c84-121">Go to **Blob service** \> **Containers**, and create a new container.</span></span>
3. <span data-ttu-id="60c84-122">Immetti un nome per il contenitore e imposta il campo **Livello di accesso pubblico** su **Privato (nessun accesso anonimo)**.</span><span class="sxs-lookup"><span data-stu-id="60c84-122">Enter a name for the container, and set the **Public access level** field to **Private (no anonymous access)**.</span></span>
4. <span data-ttu-id="60c84-123">Apri il contenitore e vai a **Impostazioni \> Criteri di accesso**.</span><span class="sxs-lookup"><span data-stu-id="60c84-123">Open the container, and go to **Settings \> Access policy**.</span></span>
5. <span data-ttu-id="60c84-124">Seleziona **Aggiungi criteri** per aggiungere un criterio di accesso archiviato.</span><span class="sxs-lookup"><span data-stu-id="60c84-124">Select **Add policy** to add a stored access policy.</span></span>
6. <span data-ttu-id="60c84-125">Imposta i campi **Identificatore** e **Autorizzazioni** in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="60c84-125">Set the **Identifier** and **Permissions** fields as appropriate.</span></span> <span data-ttu-id="60c84-126">Nel campo **Autorizzazioni**, è consigliabile selezionare tutte le autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="60c84-126">In the **Permissions** field, you should select all permissions.</span></span>

    ![Concessione dell'autorizzazione per l'archiviazione BLOB](media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png)

7. <span data-ttu-id="60c84-128">Immetti le date di inizio e di scadenza.</span><span class="sxs-lookup"><span data-stu-id="60c84-128">Enter the start and expiry dates.</span></span> <span data-ttu-id="60c84-129">La data di scadenza dovrebbe essere nel futuro.</span><span class="sxs-lookup"><span data-stu-id="60c84-129">The expiry date should be in future.</span></span>
8. <span data-ttu-id="60c84-130">Seleziona **OK** per salvare i criteri, quindi salva le modifiche nel contenitore.</span><span class="sxs-lookup"><span data-stu-id="60c84-130">Select **OK** to save the policy, and then save your changes to the container.</span></span>
9. <span data-ttu-id="60c84-131">Torna all'account di archiviazione e apri **Storage Explorer (anteprima)**.</span><span class="sxs-lookup"><span data-stu-id="60c84-131">Return to the storage account, and open **Storage Explorer (preview)**.</span></span>
10. <span data-ttu-id="60c84-132">Fai clic con il pulsante destro del mouse sul contenitore e quindi seleziona **Ottieni firma di accesso condiviso**.</span><span class="sxs-lookup"><span data-stu-id="60c84-132">Right-click the container, and then select **Get Shared Access Signature**.</span></span>
11. <span data-ttu-id="60c84-133">Nella finestra di dialogo **Firma di accesso condiviso**, copiare e archivia il valore nel campo **URI**.</span><span class="sxs-lookup"><span data-stu-id="60c84-133">In the **Shared Access Signature** dialog box, copy and store the value in the **URI** field.</span></span> <span data-ttu-id="60c84-134">Questo valore verrà utilizzato nella procedura successiva e verrà indicato come *URI della firma di accesso condiviso*.</span><span class="sxs-lookup"><span data-stu-id="60c84-134">This value will be used in the next procedure and will be referred to as the *shared access signature URI*.</span></span>

    ![Selezione e copia del valore URI](media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png)

## <a name="set-up-the-key-vault-to-store-the-storage-account-uri"></a><span data-ttu-id="60c84-136">Configurare Azure Key Vault per archiviare l'URI dell'account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="60c84-136">Set up the key vault to store the storage account URI</span></span>

1. <span data-ttu-id="60c84-137">Apri l'Azure Key Vault che intendi utilizzare con il componente aggiuntivo per la fatturazione elettronica.</span><span class="sxs-lookup"><span data-stu-id="60c84-137">Open the key vault that you intend to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="60c84-138">Vai a **Impostazioni** \> **Segreti**, quindi seleziona **Genera/Importa** per creare un nuovo segreto.</span><span class="sxs-lookup"><span data-stu-id="60c84-138">Go to **Settings** \> **Secrets**, and then select **Generate/Import** to create a new secret.</span></span>
3. <span data-ttu-id="60c84-139">Nella pagina **Crea un segreto**, nel campo **Opzioni di caricamento**, seleziona **Manuale**.</span><span class="sxs-lookup"><span data-stu-id="60c84-139">On the **Create a secret** page, in the **Upload options** field, select **Manual**.</span></span>
4. <span data-ttu-id="60c84-140">Immettere il nome del segreto.</span><span class="sxs-lookup"><span data-stu-id="60c84-140">Enter the name of the secret.</span></span> <span data-ttu-id="60c84-141">Questo nome verrà utilizzato durante la configurazione del servizio in Regulatory Configuration Service (RCS) e verrà indicato come *nome segreto di Azure Key Vault*.</span><span class="sxs-lookup"><span data-stu-id="60c84-141">This name will be used during setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the *key vault secret name*.</span></span>
5. <span data-ttu-id="60c84-142">Nel campo **Valore**, seleziona **URI della firma di accesso condiviso** e quindi seleziona **Crea**.</span><span class="sxs-lookup"><span data-stu-id="60c84-142">In the **Value** field, select **Shared Access Signature URI**, and then select **Create**.</span></span>
6. <span data-ttu-id="60c84-143">Configura i criteri di accesso per concedere al componente aggiuntivo per la fatturazione elettronica il livello corretto di accesso protetto al segreto creato.</span><span class="sxs-lookup"><span data-stu-id="60c84-143">Set up the access policy to grant the Electronic invoicing add-on the correct level of secure access to the secret you created.</span></span> <span data-ttu-id="60c84-144">Vai a **Impostazioni \> Criteri di accesso** e seleziona **Aggiungi criteri di accesso**.</span><span class="sxs-lookup"><span data-stu-id="60c84-144">Go to **Settings \> Access policy**, and select **Add Access Policy**.</span></span>
7. <span data-ttu-id="60c84-145">Imposta le autorizzazioni segrete per le operazioni **Ottieni** ed **Elenco**.</span><span class="sxs-lookup"><span data-stu-id="60c84-145">Set the secret permissions for the **Get** and **List** operations.</span></span>

    ![Concessione dell'accesso al servizio](media/e-Invoicing-services-create-azure-resources-grant-service-access.png)

8. <span data-ttu-id="60c84-147">Imposta le autorizzazioni del certificato per le operazioni **Ottieni** ed **Elenco**.</span><span class="sxs-lookup"><span data-stu-id="60c84-147">Set the certificate permissions for **Get** and **List** operations.</span></span>

    ![Concessione dell'autorizzazione al certificato](media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png)

9. <span data-ttu-id="60c84-149">Nella finestra di dialogo **Entità di sicurezza**, seleziona l'entità di sicurezza aggiungendo **Componente aggiuntivo per la fatturazione elettronica**.</span><span class="sxs-lookup"><span data-stu-id="60c84-149">In the **Principal** dialog box, select the principal by adding **Electronic invoicing add-on**.</span></span>
10. <span data-ttu-id="60c84-150">Seleziona **Aggiungi** e quindi seleziona **Salva le modifiche di Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="60c84-150">Select **Add**, and then select **Save Key Vault changes**.</span></span>
11. <span data-ttu-id="60c84-151">Nella pagina **Panoramica**, copia il valore **Nome DNS** valore per il Key Vault.</span><span class="sxs-lookup"><span data-stu-id="60c84-151">On the **Overview** page, copy the **DNS name** value for the key vault.</span></span> <span data-ttu-id="60c84-152">Questo valore verrà utilizzato durante la configurazione del servizio in RCS e verrà indicato come *URI di Key Vault*.</span><span class="sxs-lookup"><span data-stu-id="60c84-152">This value will be used during setup of the service in RCS and will be referred as the *key vault URI*.</span></span>
