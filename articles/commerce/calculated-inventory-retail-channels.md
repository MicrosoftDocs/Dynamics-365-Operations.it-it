---
title: Calcolare la disponibilità scorte per i canali di vendita al dettaglio
description: In questo argomento vengono descritte le opzioni disponibili per mostrare le scorte disponibili per il punto vendita e i canali online.
author: hhainesms
manager: annbe
ms.date: 02/25/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhainesms
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: 8bef8edb46a1942d3efc325e2c437a138ad44839
ms.sourcegitcommit: e1a55b4dc43abedf523c33ba9a8abe7b073f2ec6
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 02/26/2020
ms.locfileid: "3083020"
---
# <a name="calculate-inventory-availability-for-retail-channels"></a><span data-ttu-id="80a09-103">Calcolare la disponibilità scorte per i canali di vendita al dettaglio</span><span class="sxs-lookup"><span data-stu-id="80a09-103">Calculate inventory availability for retail channels</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="80a09-104">Questo argomento descrive come un'azienda può utilizzare Microsoft Dynamics 365 Commerce per visualizzare la disponibilità scorte stimata per i prodotti nei canali online e dei punti vendita.</span><span class="sxs-lookup"><span data-stu-id="80a09-104">This topic describes how a company can use Microsoft Dynamics 365 Commerce to view estimated on-hand availability for products in the online and store channels.</span></span>

## <a name="accuracy-of-calculation"></a><span data-ttu-id="80a09-105">Precisione del calcolo</span><span class="sxs-lookup"><span data-stu-id="80a09-105">Accuracy of calculation</span></span>

<span data-ttu-id="80a09-106">Commerce utilizza più server e database per garantire scalabilità e prestazioni.</span><span class="sxs-lookup"><span data-stu-id="80a09-106">Commerce uses multiple servers and databases to ensure scalability and performance.</span></span> <span data-ttu-id="80a09-107">Pertanto, è importante comprendere che i valori delle scorte disponibili forniti tramite l'applicazione del punto vendita (POS), le API per la disponibilità delle scorte e-commerce e le pagine di scorte disponibili nella sede centrale di Commerce potrebbero non essere accurati al 100% in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="80a09-107">Therefore, it's important that you understand that the available inventory values that are provided through the point of sale (POS) application, the e-Commerce inventory availability application programming interfaces (APIs), and the on-hand inventory pages in Commerce Headquarters might not be 100-percent accurate in real time.</span></span> <span data-ttu-id="80a09-108">Se le transazioni create per i prodotti nel canale online o del punto vendita non sono ancora state sincronizzate con il server e il database di Commerce Headquarters, le pagine delle scorte disponibili in Commerce Headquarters potrebbero non mostrare un valore di scorte in tempo reale accurato per tali prodotti.</span><span class="sxs-lookup"><span data-stu-id="80a09-108">If transactions that are created for products in the online or store channel haven't yet been synced to the Commerce Headquarters server and database, the on-hand inventory pages in Commerce Headquarters might not show an accurate real-time inventory value for those products.</span></span> <span data-ttu-id="80a09-109">Al contrario, se l'azienda è stata configurata in modo che gli utenti di Commerce Headquarters o di altre applicazioni integrate possano vendere, ricevere, restituire o altrimenti modificare le scorte da un punto vendita o un magazzino online, il POS o il canale online potrebbero non avere tutte le informazioni richieste per mostrare un valore accurato per le scorte disponibili in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="80a09-109">Conversely, if you configured your company so that users in Commerce Headquarters or other integrated applications can sell, receive, return, or otherwise adjust inventory out of a store or online warehouse, the POS or online channel might not have all the information that is required to show an accurate real-time on-hand value for items.</span></span>

<span data-ttu-id="80a09-110">Questo argomento spiega i processi di sincronizzazione dei dati che possono essere eseguiti frequentemente per aiutare a limitare la latenza dei dati tra applicazioni o canali.</span><span class="sxs-lookup"><span data-stu-id="80a09-110">This topic explains the data synchronization processes that can be run frequently to help limit the latency of data between applications or channels.</span></span> <span data-ttu-id="80a09-111">Tuttavia, è fondamentale comprendere che tutti i dati sulle scorte disponibili forniti durante la giornata operativa sono considerati un valore stimato.</span><span class="sxs-lookup"><span data-stu-id="80a09-111">However, it's critical that you understand that all on-hand availability data that is provided during the operational day is considered an estimated value.</span></span> <span data-ttu-id="80a09-112">Pertanto, se si tenta di confrontare le informazioni delle scorte disponibili fornite dall'applicazione con l'inventario fisico effettivo sugli scaffali o se si tenta di confrontare i valori delle scorte disponibili mostrati in POS con i dati delle scorte disponibili che si trovano nello stesso magazzino di Commerce Headquarters, i valori potrebbero differire.</span><span class="sxs-lookup"><span data-stu-id="80a09-112">Therefore, if you try to compare the on-hand inventory information that the application provides with actual physical inventory on the shelves, or if you try to compare the on-hand values that are shown in POS with the on-hand data that you find for the same warehouse in Commerce Headquarters, the values might differ.</span></span> <span data-ttu-id="80a09-113">Questa differenza durante la giornata operativa è prevista e non deve essere considerata un problema.</span><span class="sxs-lookup"><span data-stu-id="80a09-113">This difference during the operational day is expected and should not be considered an issue.</span></span> <span data-ttu-id="80a09-114">Se si desidera controllare i dati e assicurarsi che i valori forniti nelle API di disponibilità scorte e in Commerce Headquarters corrispondano alle unità fisiche effettive che trovi sugli scaffali del tuo punto vendita o magazzino, il momento migliore per farlo è dopo che le operazioni del canale sono state arrestate per quel giorno e tutte le transazioni sono state correttamente sincronizzate tra Commerce Headquarters e il canale.</span><span class="sxs-lookup"><span data-stu-id="80a09-114">If you want to audit data and make sure that the values that are provided in the inventory availability APIs and Commerce Headquarters match the actual physical units that you find on your store or warehouse shelves, the best time to do it is after channel operations have stopped for the day and all transactions have been correctly synced between Commerce Headquarters and the channel.</span></span>

## <a name="use-inventory-lookup-apis-for-e-commerce-inventory-availability-requests"></a><span data-ttu-id="80a09-115">Utilizzare le API di ricerca delle scorte per le richieste di disponibilità scorte e-Commerce</span><span class="sxs-lookup"><span data-stu-id="80a09-115">Use inventory lookup APIs for e-Commerce inventory availability requests</span></span>

<span data-ttu-id="80a09-116">È possibile utilizzare le seguenti API per mostrare la disponibilità scorte per un prodotto quando i clienti effettuano acquisti su un sito di e-commerce.</span><span class="sxs-lookup"><span data-stu-id="80a09-116">You can use the following APIs to show inventory availability for a product when your customers are shopping on an e-Commerce site.</span></span>

- <span data-ttu-id="80a09-117">**GetEstimatedAvailability** - Utilizzare questa API per ottenere la disponibilità scorte per l'articolo nel magazzino del canale e-Commerce o in tutti i magazzini collegati alla configurazione del gruppo di evasione ordini per il canale e-Commerce.</span><span class="sxs-lookup"><span data-stu-id="80a09-117">**GetEstimatedAvailabilty** – Use this API to get inventory availability for the item in the e-Commerce channel warehouse or all warehouses that are linked to the configuration of the fulfillment group for the e-Commerce channel.</span></span> <span data-ttu-id="80a09-118">Questa API può essere utilizzata anche per i magazzini in un'area o un raggio di ricerca specifici, in base ai dati di longitudine e latitudine.</span><span class="sxs-lookup"><span data-stu-id="80a09-118">This API can also be used for warehouses in a specific search area or radius, based on longitude and latitude data.</span></span>
- <span data-ttu-id="80a09-119">**ProductWarehouseInventoryAvailabilities** - Utilizzare questa API per richiedere le scorte per un articolo di un magazzino specifico.</span><span class="sxs-lookup"><span data-stu-id="80a09-119">**ProductWarehouseInventoryAvailabilities** – Use this API to request inventory for an item from a specific warehouse.</span></span> <span data-ttu-id="80a09-120">Ad esempio, è possibile utilizzarla per mostrare la disponibilità scorte in scenari che prevedono il prelievo ordine.</span><span class="sxs-lookup"><span data-stu-id="80a09-120">For example, you can use it to show inventory availability in scenarios that involve order pickup.</span></span>

> [!NOTE]
> <span data-ttu-id="80a09-121">Queste API sostituiscono le API **GetProductAvailabilities** e **GetAvailableInventoryNearby** in Dynamics 365 Retail versione 10.0.7 e precedenti.</span><span class="sxs-lookup"><span data-stu-id="80a09-121">These APIs replace the **GetProductAvailabilities** and **GetAvailableInventoryNearby** APIs in Dynamics 365 Retail version 10.0.7 and earlier.</span></span>

<span data-ttu-id="80a09-122">Entrambe le API recuperano i dati dal server Commerce e forniscono una stima delle scorte disponibili per una combinazione specifica di prodotto o variante di prodotto e magazzino.</span><span class="sxs-lookup"><span data-stu-id="80a09-122">Both APIs fetch data from the Commerce server and provide an estimate of on-hand inventory for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="80a09-123">Sebbene altre API disponibili sul server Commerce possano accedere direttamente a Commerce Headquarters per recuperare le quantità di scorte disponibili per i prodotti, non è consigliabile utilizzarle in un ambiente di e-commerce a causa di potenziali problemi di prestazioni e del relativo impatto che queste frequenti richieste possono avere sui server Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-123">Although other APIs that are available on the Commerce server can go directly to Commerce Headquarters to fetch on-hand quantities for products, we don't recommend that they be used in an e-Commerce environment because of potential performance issues and the related impact that these frequent requests can have on your Commerce Headquarters servers.</span></span> <span data-ttu-id="80a09-124">Inoltre, se le scorte disponibili vengono calcolate tramite il server Commerce, è più probabile che il calcolo includa le scorte vendute nelle recenti transazioni e-Commerce che non sono ancora state sincronizzate con Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-124">Additionally, if the on-hand inventory is calculated through the Commerce server, the calculation is more likely to include inventory that was sold in recent e-Commerce transactions that haven't yet been synced to Commerce Headquarters.</span></span> <span data-ttu-id="80a09-125">Sebbene Commerce Headquarters potrebbe non disporre delle informazioni su queste transazioni, il server Commerce e il database del canale dispongono dei dati.</span><span class="sxs-lookup"><span data-stu-id="80a09-125">Although Commerce Headquarters might not have information about these transactions, the Commerce server and channel database have the data.</span></span> <span data-ttu-id="80a09-126">Pertanto, i dati verranno presi in considerazione e possono aiutare a fornire una stima più accurata delle scorte disponibili di un prodotto.</span><span class="sxs-lookup"><span data-stu-id="80a09-126">Therefore, the data will be factored in and can help provide a more accurate estimate of a product's available inventory.</span></span>

### <a name="get-started-with-e-commerce-calculated-inventory-availability"></a><span data-ttu-id="80a09-127">Introduzione alla disponibilità scorte calcolata di e-Commerce</span><span class="sxs-lookup"><span data-stu-id="80a09-127">Get started with e-Commerce calculated inventory availability</span></span>

<span data-ttu-id="80a09-128">Prima di utilizzare le due API menzionate in precedenza, è necessario apportare una modifica a un parametro in Commerce Headquarters per assicurarsi che lo snapshot dei valori delle scorte calcolato da Commerce Headquarters utilizzando il processo **Disponibilità prodotto** inserisca i dati nelle tabelle corrette.</span><span class="sxs-lookup"><span data-stu-id="80a09-128">Before you use the two APIs that were mentioned earlier, you must make a parameter change in Commerce Headquarters to ensure that the snapshot of inventory values that Commerce Headquarters calculates by using the **Product Availability** job enters data in the correct tables.</span></span>

<span data-ttu-id="80a09-129">Seguire questi passaggi per impostare il parametro.</span><span class="sxs-lookup"><span data-stu-id="80a09-129">To set the parameter, follow these steps.</span></span>

1. <span data-ttu-id="80a09-130">Accedere a **Retail e Commerce \> Impostazione sedi centrali \> Parametri \> Parametri condivisi di commercio**.</span><span class="sxs-lookup"><span data-stu-id="80a09-130">Go to **Retail and Commerce \> Headquarters Setup \> Parameters \> Commerce shared parameters**.</span></span>
1. <span data-ttu-id="80a09-131">Nella scheda **Inventario** nella sezione **Processo disponibilità prodotto**, selezionare **Utilizza processo ottimizzato per processo disponibilità prodotto**.</span><span class="sxs-lookup"><span data-stu-id="80a09-131">On the **Inventory** tab, in the **Product availability job** section, select **Use optimized process for Product Availability job**.</span></span> <span data-ttu-id="80a09-132">Questa impostazione garantisce che venga utilizzato il set di funzionalità ottimale per calcolare le scorte disponibili del canale tramite il server Commerce.</span><span class="sxs-lookup"><span data-stu-id="80a09-132">This setting ensures that the optimal feature set is used to calculate the channel's available inventory through the Commerce server.</span></span>

<span data-ttu-id="80a09-133">Prima che le API possano calcolare la migliore stima della disponibilità scorte per un articolo, è necessario elaborare uno snapshot periodico della disponibilità scorte da Commerce Headquarters e inviarla al database del canale utilizzato da e-Commerce Commerce Scale Unit.</span><span class="sxs-lookup"><span data-stu-id="80a09-133">Before the APIs can calculate the best estimate of inventory availability for an item, a periodic snapshot of inventory availability from Commerce Headquarters must be processed and sent to the channel database that the e-Commerce Commerce Scale Unit uses.</span></span> <span data-ttu-id="80a09-134">Lo snapshot rappresenta le informazioni presenti in Commerce Headquarters in merito alla disponibilità scorte per una combinazione specifica di prodotto o variante di prodotto e magazzino.</span><span class="sxs-lookup"><span data-stu-id="80a09-134">The snapshot represents the information that Commerce Headquarters has about inventory availability for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="80a09-135">Può includere rettifiche o movimenti di inventario causati dalle entrate in magazzino, spedizioni o altri processi eseguiti in Commerce Headquarters e di cui il canale e-commerce ha informazioni solo a causa del processo di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="80a09-135">It can include inventory adjustments or movements that are caused by inventory receipts, or by shipments or other processes that are performed in Commerce Headquarters and that the e-Commerce channel has information about only because of the synchronization process.</span></span>

<span data-ttu-id="80a09-136">Lo snapshot del database creato dal processo **Disponibilità prodotto** calcola solo le transazioni di inventario che sono state elaborate e registrate in Commerce Headquarters al momento in cui è stato acquisito lo snapshot.</span><span class="sxs-lookup"><span data-stu-id="80a09-136">The database snapshot that the **Product availability** job creates calculates only the inventory transactions that were processed and posted in Commerce Headquarters at the time when the snapshot was taken.</span></span> <span data-ttu-id="80a09-137">Se le scorte sono state vendute per un prodotto in un magazzino del punto vendita tramite una vendita ordine cliente in contanti o asincrono nell'applicazione POS, Commerce Headquarters non avrà immediatamente le informazioni sulla relativa transazione di uscita dal magazzino per la vendita.</span><span class="sxs-lookup"><span data-stu-id="80a09-137">If inventory was sold for a product in a store warehouse through a cash-and-carry or asynchronous customer order sale in the POS application, Commerce Headquarters won't immediately have information about the related inventory issue transaction for the sale.</span></span> <span data-ttu-id="80a09-138">Conterrà le informazioni sulle scorte vendute per questi tipi di vendite del punto vendita solo dopo che il processo P ha caricato la relativa transazione dal database del canale del punto vendita in Commerce Headquarters e il relativo ordine di vendita è stato creato mediante la registrazione degli estratti conto o i processi di registrazione su inserimento continuo.</span><span class="sxs-lookup"><span data-stu-id="80a09-138">It will have information about the inventory that is sold for these types of store sales only after the P-job uploads the related transaction from the store's channel database into Commerce Headquarters and the related sales order is created through statement posting or the trickle feed posting processes.</span></span> <span data-ttu-id="80a09-139">Il processo di creazione dell'ordine in Commerce Headquarters crea le relative transazioni di inventario.</span><span class="sxs-lookup"><span data-stu-id="80a09-139">The process of creating the order in Commerce Headquarters creates the related inventory transactions.</span></span> <span data-ttu-id="80a09-140">Per gli ordini di canale e-Commerce, Commerce Headquarters ha le informazioni sulle transazioni di inventario solo dopo che le transazioni sono state inviate a in Commerce Headquarters tramite il processo P e dopo che il processo di sincronizzazione degli ordini è stato completato.</span><span class="sxs-lookup"><span data-stu-id="80a09-140">For e-Commerce channel orders, Commerce Headquarters has information about the inventory transactions only after the transactions are sent to Commerce Headquarters through the P-job and the order synchronization process is completed.</span></span> <span data-ttu-id="80a09-141">Pertanto, è importante comprendere che il valore dello snapshot di magazzino fornito nel processo **Disponibilità prodotto** potrebbe non essere accurato al 100% in tempo reale a causa della costante elaborazione delle vendite che si verifica sui server distribuiti.</span><span class="sxs-lookup"><span data-stu-id="80a09-141">Therefore, it's important that you understand that the inventory snapshot value that is provided in the **Product availability** job might not be 100-percent accurate in real time because of the constant sales processing that occurs across distributed servers.</span></span>

<span data-ttu-id="80a09-142">Per creare uno snapshot di magazzino in Commerce Headquarters, attenersi alla seguente procedura.</span><span class="sxs-lookup"><span data-stu-id="80a09-142">To take a snapshot of inventory in Commerce Headquarters, follow these steps.</span></span>

1. <span data-ttu-id="80a09-143">Andare a **Retail e Commerce \> Vendita al dettaglio e commercio IT \> Prodotti e inventario \> Disponibilità prodotto**.</span><span class="sxs-lookup"><span data-stu-id="80a09-143">Go to **Retail and Commerce \> Retail and Commerce IT \> Products and inventory \> Product availability**.</span></span>
1. <span data-ttu-id="80a09-144">Selezionare **OK** per eseguire il processo **Disponibilità prodotto**.</span><span class="sxs-lookup"><span data-stu-id="80a09-144">Select **OK** to run the **Product availability** job.</span></span> <span data-ttu-id="80a09-145">È inoltre possibile pianificare questo processo in modo che venga eseguito in un batch.</span><span class="sxs-lookup"><span data-stu-id="80a09-145">You can also schedule this job so that it's run in a batch.</span></span>

<span data-ttu-id="80a09-146">Una volta terminata l'esecuzione del processo **Disponibilità prodotto**, i dati acquisiti devono essere inviati ai database del canale e-Commerce, in modo che lo snapshot più recente di magazzino di Commerce Headquarters possa essere considerato nel calcolo delle scorte disponibili stimato.</span><span class="sxs-lookup"><span data-stu-id="80a09-146">After the **Product availability** job has finished running, the data that was captured must be pushed to the e-Commerce channel databases, so that the latest Commerce Headquarters inventory snapshot can be considered in the calculation of estimated on-hand inventory.</span></span>

1. <span data-ttu-id="80a09-147">Selezionare **Retail e Commerce \> Vendita al dettaglio e commercio IT \> Programmazione della distribuzione**.</span><span class="sxs-lookup"><span data-stu-id="80a09-147">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="80a09-148">Eseguire il processo **1130** (**Disponibilità prodotto**) per sincronizzare i dati dello snapshot che il processo **Disponibilità prodotto** ha creato da Commerce Headquarters ai database del canale.</span><span class="sxs-lookup"><span data-stu-id="80a09-148">Run the **1130** (**Product availability**) job to sync the snapshot data that the **Product availability** job created from Commerce Headquarters to your channel databases.</span></span>

<span data-ttu-id="80a09-149">Quando la disponibilità delle scorte è richiesta dalle API **GetEstimatedAvailability** o **ProductWarehouseInventoryAvailabilities** viene eseguito un calcolo per cercare di ottenere la migliore stima possibile dell'inventario per il prodotto.</span><span class="sxs-lookup"><span data-stu-id="80a09-149">When inventory availability is requested from the **GetEstimatedAvailabilty** or **ProductWarehouseInventoryAvailabilities** API, a calculation is run to try to get the best possible estimate of inventory for the product.</span></span> <span data-ttu-id="80a09-150">Il calcolo fa riferimento a tutti gli ordini dei clienti e-Commerce presenti nel database del canale che non erano inclusi nei dati dello snapshot forniti dal processo 1130.</span><span class="sxs-lookup"><span data-stu-id="80a09-150">The calculation references any e-Commerce customer orders that are in the channel database but that weren't included in the snapshot data that the 1130 job provided.</span></span> <span data-ttu-id="80a09-151">Questa logica viene eseguita monitorando l'ultima transazione di inventario elaborata da Commerce Headquarters e confrontandola con le transazioni nel database del canale.</span><span class="sxs-lookup"><span data-stu-id="80a09-151">This logic is performed by tracking the last processed inventory transaction from Commerce Headquarters and comparing it with the transactions in the channel database.</span></span> <span data-ttu-id="80a09-152">Fornisce una base per la logica di calcolo sul lato canale, in modo che i movimenti di magazzino aggiuntivi che si sono verificati per le transazioni di vendita degli ordini dei clienti nel database del canale e-Commerce possano essere presi in considerazione nel valore di inventario stimato fornito dall'API.</span><span class="sxs-lookup"><span data-stu-id="80a09-152">It provides a baseline for the channel-side calculation logic, so that the additional inventory movements that occurred for customer order sales transactions in the e-Commerce channel database can be factored into the estimated inventory value that the API provides.</span></span>

<span data-ttu-id="80a09-153">La logica di calcolo sul lato canale restituisce un valore fisicamente disponibile stimato e un valore disponibile totale per il prodotto e il magazzino richiesti.</span><span class="sxs-lookup"><span data-stu-id="80a09-153">The channel-side calculation logic returns an estimated physically available value and a total available value for the requested product and warehouse.</span></span> <span data-ttu-id="80a09-154">Se desiderato, i valori possono essere visualizzati sul sito e-Commerce oppure possono essere utilizzati per attivare altre logiche aziendali sul sito e-Commerce.</span><span class="sxs-lookup"><span data-stu-id="80a09-154">The values can be shown on your e-Commerce site if you want, or they can be used to trigger other business logic on your e-Commerce site.</span></span> <span data-ttu-id="80a09-155">Ad esempio, è possibile mostrare un messaggio "esaurito" invece della quantità effettiva disponibile che l'API ha passato.</span><span class="sxs-lookup"><span data-stu-id="80a09-155">For example, you can show an "out of stock" message instead of the actual on-hand quantity that the API passed.</span></span>

<span data-ttu-id="80a09-156">La logica di calcolo che le API di e-commerce lato canale utilizzano per il valore di magazzino stimato può valutare le scorte solo in base agli ordini dei clienti che sono stati creati nel database del canale e che non sono ancora stati sincronizzati e registrati in Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-156">The calculation logic that the channel-side e-Commerce APIs use for the estimated inventory value can evaluate inventory based only on customer orders that have been created in the channel database but that haven't yet been synced and posted in Commerce Headquarters.</span></span> <span data-ttu-id="80a09-157">Se il database del canale contiene anche dati transazionali per le vendite cash-and-carry per i magazzini specifici del negozio, le vendite cash-and-carry non vengono prese in considerazione nel calcolo e-Commerce sul lato canale per tali magazzini.</span><span class="sxs-lookup"><span data-stu-id="80a09-157">If your channel database also contains transactional data for cash-and-carry sales for store-specific warehouses, the cash-and-carry sales aren't factored into the channel-side e-Commerce calculation for those warehouses.</span></span>

## <a name="configure-the-inventory-lookup-operation-in-the-pos-channel"></a><span data-ttu-id="80a09-158">Configurare l'operazione di ricerca dell'inventario nel canale POS</span><span class="sxs-lookup"><span data-stu-id="80a09-158">Configure the inventory lookup operation in the POS channel</span></span>

<span data-ttu-id="80a09-159">In Retail versione 10.0.9 e precedenti, l'operazione **Ricerca in magazzino** dal POS ha utilizzato una chiamata di servizio in tempo reale a Commerce Headquarters per ottenere informazioni di inventario per il prodotto selezionato, sia per il negozio corrente dell'utente sia per tutti gli altri negozi configurati per il gruppo di evasione come parte della configurazione del canale per il negozio.</span><span class="sxs-lookup"><span data-stu-id="80a09-159">In Retail version 10.0.9 and earlier, the **Inventory lookup** operation from POS used a real-time service call to Commerce Headquarters to get inventory information for the selected product, for both the user's current store and any other stores that are configured for the fulfillment group as part of the channel configuration for the store.</span></span> <span data-ttu-id="80a09-160">In Commerce versione 10.0.10 e successive, è possibile disattivare le chiamate di servizio in tempo reale a Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-160">In Commerce version 10.0.10 and later, you can turn off real-time service calls to Commerce Headquarters.</span></span> <span data-ttu-id="80a09-161">Al contrario, è possibile utilizzare il calcolo sul lato canale sul server Commerce per determinare le scorte disponibili fisicamente per il negozio e qualsiasi altra ubicazione definita nel gruppo di evasione ordini.</span><span class="sxs-lookup"><span data-stu-id="80a09-161">Instead, you can use channel-side calculation on the Commerce server to determine the on-hand inventory that is physically available for the store and any other locations that are defined in the fulfillment group.</span></span> <span data-ttu-id="80a09-162">Questa configurazione di inventario calcolata dal canale è utile anche per le ubicazioni in cui la connettività Internet non è affidabile, poiché non è necessario essere online per ottenere ricerche di inventario da Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-162">This channel-calculated inventory configuration is also useful for locations where internet connectivity is unreliable, because you don't have to be online to get inventory lookups from Commerce Headquarters.</span></span>

<span data-ttu-id="80a09-163">Quando il calcolo sul lato canale è configurato e gestito correttamente, può fornire una stima più affidabile dell'inventario del negozio corrente, poiché utilizza i dati transazionali presenti nel database del canale Commerce, ma che Commerce Headquarters potrebbe non disporre ancora delle relative informazioni.</span><span class="sxs-lookup"><span data-stu-id="80a09-163">When channel-side calculation is correctly configured and managed, it can provide a more reliable estimate of the current store inventory, because it uses the transactional data that is in the Commerce channel database but that Commerce Headquarters might not yet have information about.</span></span> <span data-ttu-id="80a09-164">Ad esempio, se si utilizza la chiamata di servizio in tempo reale esistente per le ricerche di inventario in POS, probabilmente Commerce Headquarters non avrà ancora le informazioni su una vendita cash-and-carry appena avvenuta per un prodotto.</span><span class="sxs-lookup"><span data-stu-id="80a09-164">For example, if you use the existing real-time service call for inventory lookups in POS, Commerce Headquarters probably won't yet have information about a cash-and-carry sale that just occurred for a product.</span></span> <span data-ttu-id="80a09-165">Pertanto, il valore dell'inventario disponibile restituito da Commerce Headquarters per quel prodotto supererà probabilmente le scorte disponibili effettive del negozio di un'unità.</span><span class="sxs-lookup"><span data-stu-id="80a09-165">Therefore, the on-hand inventory value that Commerce Headquarters returns for that product will probably exceed the store's actual on-hand inventory by one unit.</span></span> <span data-ttu-id="80a09-166">Tuttavia, se si utilizza il calcolo sul lato canale, la vendita cash-and-carry può essere presa in considerazione nel calcolo e detratta dal valore di scorte disponibili che viene mostrato.</span><span class="sxs-lookup"><span data-stu-id="80a09-166">However, if you use channel-side calculation, the cash-and-carry sale can be factored into the calculation and deducted from the on-hand value that is shown.</span></span> <span data-ttu-id="80a09-167">Sebbene i valori forniti sia dal calcolo lato canale sia dalla chiamata di servizio in tempo reale siano solo stime delle scorte disponibili, il valore fornito dal calcolo lato canale è molto più probabile che sia accurato per il punto vendita corrente.</span><span class="sxs-lookup"><span data-stu-id="80a09-167">Although the values that both the channel-side calculation and the real-time service call provide are only estimates of on-hand inventory, the value that the channel-side calculation provides is much more likely to be accurate for the current store.</span></span>

### <a name="get-started-with-pos-channel-side-calculated-inventory-availability"></a><span data-ttu-id="80a09-168">Introduzione alla disponibilità scorte calcolata lato canale POS</span><span class="sxs-lookup"><span data-stu-id="80a09-168">Get started with POS channel-side calculated inventory availability</span></span>

<span data-ttu-id="80a09-169">Per utilizzare la logica di calcolo sul lato canale e disattivare le chiamate di servizio in tempo reale per le ricerche di magazzino dall'applicazione POS, è necessario innanzitutto apportare due modifiche ai parametri.</span><span class="sxs-lookup"><span data-stu-id="80a09-169">To use the channel-side calculation logic and turn off real-time service calls for inventory lookups from the POS application, you must first make two parameter changes.</span></span> <span data-ttu-id="80a09-170">È quindi necessario sincronizzare le modifiche al canale attraverso il processo di pianificazione della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="80a09-170">You must then sync the changes to the channel through the distribution schedule process.</span></span>

<span data-ttu-id="80a09-171">Seguire questi passaggi per impostare il primo parametro.</span><span class="sxs-lookup"><span data-stu-id="80a09-171">To set the first parameter, follow these steps.</span></span>

1. <span data-ttu-id="80a09-172">Accedere a **Retail e Commerce \> Impostazione sedi centrali \> Parametri \> Parametri condivisi di commercio**.</span><span class="sxs-lookup"><span data-stu-id="80a09-172">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span>
1. <span data-ttu-id="80a09-173">Nella scheda **Inventario** nella sezione **Processo disponibilità prodotto**, selezionare **Utilizza processo ottimizzato per processo disponibilità prodotto**.</span><span class="sxs-lookup"><span data-stu-id="80a09-173">On the **Inventory** tab, in the **Product availability job** section, select **Use optimized process for Product Availability job**.</span></span> <span data-ttu-id="80a09-174">Questa impostazione garantisce che venga utilizzato il set di funzionalità ottimale per calcolare le scorte disponibili del canale tramite il server Commerce.</span><span class="sxs-lookup"><span data-stu-id="80a09-174">This setting ensures that the optimal feature set is used to calculate the channel's available inventory through the Commerce server.</span></span>

<span data-ttu-id="80a09-175">Seguire questi passaggi per impostare il secondo parametro.</span><span class="sxs-lookup"><span data-stu-id="80a09-175">To set the second parameter, follow these steps.</span></span>

1. <span data-ttu-id="80a09-176">Passare a **Retail e Commerce \> Impostazione canale \> Impostazione POS \> Profili POS \> Profili funzionalità**.</span><span class="sxs-lookup"><span data-stu-id="80a09-176">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="80a09-177">Selezionare un profilo funzionalità.</span><span class="sxs-lookup"><span data-stu-id="80a09-177">Select a functionality profile.</span></span>
1. <span data-ttu-id="80a09-178">Nella scheda dettaglio **Funzioni**, nella sezione **Calcolo disponibilità scorte**, cambiare il valore del campo **Modalità di calcolo disponibilità scorte** da **Servizio in tempo reale** a **Canale**.</span><span class="sxs-lookup"><span data-stu-id="80a09-178">On the **Functions** FastTab, in the **Invent availability calculation** section, change the value of the **Invent availability calculation mode** field from **Real time service** to **Channel**.</span></span> <span data-ttu-id="80a09-179">Per impostazione predefinita, tutti i profili di funzionalità utilizzano chiamate di servizio in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="80a09-179">By default, all functionality profiles use real-time service calls.</span></span> <span data-ttu-id="80a09-180">Pertanto, è necessario modificare il valore di questo campo se si desidera utilizzare la logica di calcolo sul lato canale.</span><span class="sxs-lookup"><span data-stu-id="80a09-180">Therefore, you must change the value of this field if you want to use channel-side calculation logic.</span></span> <span data-ttu-id="80a09-181">Ogni punto vendita al dettaglio collegato al profilo di funzionalità selezionato sarà interessato da questa modifica.</span><span class="sxs-lookup"><span data-stu-id="80a09-181">Every retail store that is linked to the selected functionality profile will be affected by this change.</span></span>

<span data-ttu-id="80a09-182">Seguire questi passaggi per aggiornare i server.</span><span class="sxs-lookup"><span data-stu-id="80a09-182">To update the servers, follow these steps.</span></span>

1. <span data-ttu-id="80a09-183">Selezionare **Retail e Commerce \> Vendita al dettaglio e commercio IT \> Programmazione della distribuzione**.</span><span class="sxs-lookup"><span data-stu-id="80a09-183">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="80a09-184">Eseguire il processo **1070** (**Configurazione canale**).</span><span class="sxs-lookup"><span data-stu-id="80a09-184">Run the **1070** (**Channel configuration**) job.</span></span>

<span data-ttu-id="80a09-185">Al termine della configurazione, le informazioni fornite sulle scorte fisicamente disponibili non utilizzano più una chiamata di servizio in tempo reale quando un utente nell'applicazione POS utilizza l'operazione **Ricerca in magazzino** (visualizzazioni standard e matrice).</span><span class="sxs-lookup"><span data-stu-id="80a09-185">After the configuration is completed, the information that is provided about physically available inventory no longer uses a real-time service call when a user in the POS application uses the **Inventory lookup** operation (standard and matrix views).</span></span> <span data-ttu-id="80a09-186">I dati sulle scorte fisicamente disponibili per il negozio corrente e tutti i negozi nel gruppo di evasione ordini vengono calcolati in base all'ultimo snapshot noto che è stata consegnata al database del canale da Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-186">Instead, data about physically available inventory for the current store and all the stores in the fulfillment group is calculated based on the last-known snapshot that was delivered to the channel database from Commerce Headquarters.</span></span> <span data-ttu-id="80a09-187">Il valore dello snapshot viene ulteriormente perfezionato dal calcolo sul lato canale per regolare il valore delle scorte fisicamente disponibili, in base alle vendite aggiuntive o alle transazioni di reso esistenti per il prodotto selezionato nel database del canale che non sono state incluse nell'ultimo snapshot sincronizzato dal processo 1130.</span><span class="sxs-lookup"><span data-stu-id="80a09-187">The snapshot value is further refined by the channel-side calculation to adjust the physically available value, based on additional sales or return transactions that exist for the selected product in the channel database that were not included in the last synchronized snapshot from the 1130 job.</span></span> <span data-ttu-id="80a09-188">Se il database del canale non contiene dati transazionali per nessuno dei magazzini o negozi nel gruppo di evasione ordini, non contiene le transazioni aggiuntive che possono essere prese in considerazione in un ricalcolo del valore.</span><span class="sxs-lookup"><span data-stu-id="80a09-188">If the channel database doesn't contain transactional data for any of the warehouses or stores in the fulfillment group, it contains no additional transactions that can be factored into a recalculation of the value.</span></span> <span data-ttu-id="80a09-189">Pertanto, la migliore stima delle scorte disponibili che può essere mostrata per quei magazzini o negozi è costituita dai dati dell'ultimo snapshot di Commerce Headquarters noto.</span><span class="sxs-lookup"><span data-stu-id="80a09-189">Therefore, the best estimate of on-hand inventory that can be shown for those warehouses or stores is the data from the last-known Commerce Headquarters snapshot.</span></span>

<span data-ttu-id="80a09-190">Le schermate **Evasione ordine** del POS sfruttano anche il calcolo lato canale per mostrare le scorte disponibili per gli articoli quando viene selezionata una riga di evasione dell'ordine e un utente visualizza il pannello **Dettagli** per le scorte disponibili dell'articolo selezionato.</span><span class="sxs-lookup"><span data-stu-id="80a09-190">The **Order fulfillment** screens of POS also leverage the channel side calculation to show on-hand inventory for items when an order fulfillment line is selected and a user views the **Details** panel for on-hand inventory for the selected item.</span></span>

## <a name="optimize-your-inventory-data"></a><span data-ttu-id="80a09-191">Ottimizzare i dati di magazzino</span><span class="sxs-lookup"><span data-stu-id="80a09-191">Optimize your inventory data</span></span>

<span data-ttu-id="80a09-192">Per garantire la migliore stima possibile dell'inventario, è fondamentale utilizzare i seguenti processi batch Commerce ed eseguirli frequentemente:</span><span class="sxs-lookup"><span data-stu-id="80a09-192">To ensure the best possible estimate of inventory, it's critical that you use the following Commerce batch jobs and run them frequently:</span></span>

- <span data-ttu-id="80a09-193">**Processo P** - Il processo P è disponibile nella pagina **Programmazioni della distribuzione** e deve essere eseguito frequentemente.</span><span class="sxs-lookup"><span data-stu-id="80a09-193">**P-job** – The P-job is found on the **Distribution schedules** page and should be run frequently.</span></span> <span data-ttu-id="80a09-194">Questo processo porta gli ordini e-Commerce, gli ordini asincroni dei clienti creati dal POS e gli ordini cash-and-carry creati dal POS dai database del canale in Commerce Headquarters in modo che possano essere elaborati ulteriormente.</span><span class="sxs-lookup"><span data-stu-id="80a09-194">This job brings e-Commerce orders, asynchronous customer orders that POS created, and cash-and-carry orders that POS created from the channel databases into Commerce Headquarters, so that they can be processed further.</span></span> <span data-ttu-id="80a09-195">Fino a quando questi dati non vengono sincronizzati dal canale in Commerce Headquarters, Commerce Headquarters non ha informazioni sulle rettifiche delle scorte dei prodotti nei magazzini risultanti da tali transazioni.</span><span class="sxs-lookup"><span data-stu-id="80a09-195">Until this data is synced from the channel to Commerce Headquarters, Commerce Headquarters has no information about inventory adjustments to products in the warehouses that result from those transactions.</span></span>
- <span data-ttu-id="80a09-196">**Sincronizza ordini** - Questo processo elabora i dati transazionali non elaborati in Commerce Headquarters forniti dal processo P e converte le transazioni e-commerce e degli ordini asincroni dei clienti in ordini di vendita in Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-196">**Synchronize orders** – This job processes the raw transactional data in Commerce Headquarters that the P-job provides and converts e-Commerce and asynchronous customer order transactions into sales orders in Commerce Headquarters.</span></span> <span data-ttu-id="80a09-197">Fino a quando questo processo non viene elaborato e non vengono creati gli ordini cliente, non vengono create le transazioni di inventario.</span><span class="sxs-lookup"><span data-stu-id="80a09-197">Until this job is processed and the sales orders are created, no inventory transactions are created.</span></span> <span data-ttu-id="80a09-198">Pertanto, le scorte disponibili in Commerce Headquarters non prendono in considerazione le transazioni.</span><span class="sxs-lookup"><span data-stu-id="80a09-198">Therefore, on-hand inventory in Commerce Headquarters won't consider the transactions.</span></span>
- <span data-ttu-id="80a09-199">**Calcola rendiconti transazionali in batch** - Per le transazioni cash-and-carry create nel punto vendita, il processo di registrazione dell'alimentazione su inserimento continuo assicura che l'inventario correlato alle vendite venga aggiornato in modo efficiente.</span><span class="sxs-lookup"><span data-stu-id="80a09-199">**Calculate transactional statements in batch** – For cash-and-carry transactions that are created in the store, the trickle feed posting process ensures that inventory that is related to the sales is updated efficiently.</span></span> <span data-ttu-id="80a09-200">Per ottenere l'elaborazione più efficiente delle transazioni di inventario per gli ordini cash-and-carry, assicurarsi di configurare il sistema per l'uso della [registrazione su inserimento continuo](https://docs.microsoft.com/dynamics365/commerce/trickle-feed).</span><span class="sxs-lookup"><span data-stu-id="80a09-200">To get the most efficient processing of inventory transactions for cash-and-carry orders, make sure that you configure your system to use [trickle feed posting](https://docs.microsoft.com/dynamics365/commerce/trickle-feed).</span></span>
- <span data-ttu-id="80a09-201">**Registra rendiconti transazionali in batch** - Questo processo è richiesto anche per la registrazione su inserimento continuo.</span><span class="sxs-lookup"><span data-stu-id="80a09-201">**Post transactional statements in batch** – This job is also required for trickle feed posting.</span></span> <span data-ttu-id="80a09-202">Segue il processo **Calcola rendiconti transazionali in batch**.</span><span class="sxs-lookup"><span data-stu-id="80a09-202">It follows the **Calculate transactional statements in batch** job.</span></span> <span data-ttu-id="80a09-203">Questo processo registra sistematicamente gli estratti conto calcolati, in modo che gli ordini di vendita per le vendite cash-and-carry vengano creati in Commerce Headquarters che riflette in modo più accurato l'inventario del punto vendita.</span><span class="sxs-lookup"><span data-stu-id="80a09-203">This job systematically posts the calculated statements, so that sales orders for cash-and-carry sales are created in Commerce Headquarters and Commerce Headquarters more accurately reflects your store's inventory.</span></span>
- <span data-ttu-id="80a09-204">**Disponibilità prodotto** - Questo processo crea lo snapshot dell'inventario da Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="80a09-204">**Product availability** – This job creates the snapshot of inventory from Commerce Headquarters.</span></span>
- <span data-ttu-id="80a09-205">**1130 (disponibilità prodotto)** - Questo processo si trova nella pagina **Programmazioni della distribuzione** e deve essere eseguito immediatamente dopo il processo **Disponibilità prodotto**.</span><span class="sxs-lookup"><span data-stu-id="80a09-205">**1130 (Product availability)** – This job is found on the **Distribution schedules** page and should be run immediately after the **Product availability** job.</span></span> <span data-ttu-id="80a09-206">Questo processo trasporta i dati dello snapshot dell'inventario da Commerce Headquarters ai database del canale.</span><span class="sxs-lookup"><span data-stu-id="80a09-206">This job transports the inventory snapshot data from Commerce Headquarters to the channel databases.</span></span>

> [!NOTE]
> <span data-ttu-id="80a09-207">Per motivi di prestazioni, quando vengono utilizzati i calcoli delle scorte disponibili sul lato canale per effettuare una richiesta di disponibilità scorte utilizzando l'API e-Commerce o la nuova logica di inventario sul canale POS, il calcolo utilizza una cache per determinare se è trascorso abbastanza tempo per giustificare la nuova esecuzione della logica di calcolo.</span><span class="sxs-lookup"><span data-stu-id="80a09-207">For performance reasons, when channel-side inventory availability calculations are used to make an inventory availability request using the e-Commerce API's or the new POS channel-side inventory logic, the calculation uses a cache to determine whether enough time has passed to justify running the calculation logic again.</span></span> <span data-ttu-id="80a09-208">La cache predefinita è impostata su 60 secondi.</span><span class="sxs-lookup"><span data-stu-id="80a09-208">The default cache is set to 60 seconds.</span></span> <span data-ttu-id="80a09-209">Ad esempio, hai attivato il calcolo lato canale per il tuo negozio e hai visualizzato le scorte disponibili per un prodotto nella pagina **Ricerca in magazzino**.</span><span class="sxs-lookup"><span data-stu-id="80a09-209">For example, you turned on channel-side calculation for your store and viewed the on-hand inventory for a product on the **Inventory lookup** page.</span></span> <span data-ttu-id="80a09-210">Se viene venduta un'unità del prodotto, la pagina **Ricerca in magazzino** non mostrerà l'inventario ridotto fino a quando la cache non sarà stata cancellata.</span><span class="sxs-lookup"><span data-stu-id="80a09-210">If one unit of the product is then sold, the **Inventory lookup** page won't show the reduced inventory until the cache has been cleared.</span></span> <span data-ttu-id="80a09-211">Dopo che gli utenti registrano le transazioni nel POS, devono attendere 60 secondi prima di verificare che l'inventario disponibile sia stato ridotto.</span><span class="sxs-lookup"><span data-stu-id="80a09-211">After users post transactions in POS, they should wait 60 seconds before they verify that the on-hand inventory has been reduced.</span></span>

<span data-ttu-id="80a09-212">Se lo scenario aziendale richiede un tempo di cache inferiore, contattare il rappresentante dell'assistenza tecnica per assistenza.</span><span class="sxs-lookup"><span data-stu-id="80a09-212">If your business scenario requires a smaller cache time, contact your product support representative for help.</span></span>
