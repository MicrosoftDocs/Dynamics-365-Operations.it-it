---
title: Panoramica sui pagamenti omnicanale
description: In questo argomento viene fornita una panoramica dei pagamenti omnicanale in Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 80eaf36fb382e0ebe0a66383ea17ab76faa07dfa
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/13/2020
ms.locfileid: "4413577"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="9980c-103">Panoramica sui pagamenti omnicanale</span><span class="sxs-lookup"><span data-stu-id="9980c-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="9980c-104">In questo argomento viene fornita una panoramica dei pagamenti omnicanale in Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="9980c-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="9980c-105">Include un elenco completo degli scenari supportati, informazioni su funzionalità, impostazione e risoluzione dei problemi nonché descrizioni di problemi tipici.</span><span class="sxs-lookup"><span data-stu-id="9980c-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="9980c-106">Termini importanti</span><span class="sxs-lookup"><span data-stu-id="9980c-106">Key terms</span></span>

| <span data-ttu-id="9980c-107">Termine</span><span class="sxs-lookup"><span data-stu-id="9980c-107">Term</span></span> | <span data-ttu-id="9980c-108">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9980c-108">Description</span></span> |
|---|---|
| <span data-ttu-id="9980c-109">Token </span><span class="sxs-lookup"><span data-stu-id="9980c-109">Token</span></span> | <span data-ttu-id="9980c-110">Una stringa di dati che un sistema di elaborazione dei pagamenti fornisce come riferimento.</span><span class="sxs-lookup"><span data-stu-id="9980c-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="9980c-111">I token possono rappresentare numeri di carte di pagamento, autorizzazioni di pagamento e acquisizioni di pagamento precedenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="9980c-112">I token sono importanti in quanto consentono di mantenere dati riservati al di fuori del sistema POS.</span><span class="sxs-lookup"><span data-stu-id="9980c-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="9980c-113">Talvolta sono denominati *riferimenti*.</span><span class="sxs-lookup"><span data-stu-id="9980c-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="9980c-114">Token carta di credito</span><span class="sxs-lookup"><span data-stu-id="9980c-114">Card token</span></span> | <span data-ttu-id="9980c-115">Un token che un sistema di elaborazione dei pagamenti fornisce per l'archiviazione nel sistema POS.</span><span class="sxs-lookup"><span data-stu-id="9980c-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="9980c-116">Un token carta di credito può essere utilizzato solo dall'esercente che lo riceve.</span><span class="sxs-lookup"><span data-stu-id="9980c-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="9980c-117">I token carta di credito sono a volte denominati *riferimenti di carte di credito*.</span><span class="sxs-lookup"><span data-stu-id="9980c-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="9980c-118">Token di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="9980c-118">Authorization (auth) token</span></span> | <span data-ttu-id="9980c-119">Un ID univoco che un sistema di elaborazione dei pagamenti fornisce come parte della risposta che invia a un sistema POS dopo questo esegue una richiesta di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="9980c-120">Un token di autorizzazione può essere utilizzato successivamente se al sistema di elaborazione viene richiesto di eseguire azioni come lo storno o l'annullamento dell'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="9980c-121">Tuttavia, è utilizzato soprattutto per acquisire fondi quando un ordine viene evaso o una transazione viene finalizzata.</span><span class="sxs-lookup"><span data-stu-id="9980c-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="9980c-122">I token di autorizzazione sono a volte denominati *riferimenti di autorizzazione*.</span><span class="sxs-lookup"><span data-stu-id="9980c-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="9980c-123">Token di acquisizione</span><span class="sxs-lookup"><span data-stu-id="9980c-123">Capture token</span></span> | <span data-ttu-id="9980c-124">Un riferimento che un sistema di elaborazione dei pagamenti fornisce a un sistema POS quando un pagamento viene finalizzato o acquisito.</span><span class="sxs-lookup"><span data-stu-id="9980c-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="9980c-125">Il token di acquisizione può quindi essere utilizzato per fare riferimento all'acquisizione di pagamento nelle operazioni successive, ad esempio richieste di rimborso.</span><span class="sxs-lookup"><span data-stu-id="9980c-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="9980c-126">Carta non assente</span><span class="sxs-lookup"><span data-stu-id="9980c-126">Card not present</span></span> | <span data-ttu-id="9980c-127">Un termine che fa riferimento alle transazioni di pagamento dove una carta fisica non viene presentata.</span><span class="sxs-lookup"><span data-stu-id="9980c-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="9980c-128">Ad esempio, queste transazioni possono verificarsi in scenari di e-commerce o servizio clienti.</span><span class="sxs-lookup"><span data-stu-id="9980c-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="9980c-129">Per queste transazioni, le informazioni correlate al pagamento vengono immesse manualmente su un sito Web di e-commerce, in un flusso di servizio clienti, nel POS o nel terminale di pagamento.</span><span class="sxs-lookup"><span data-stu-id="9980c-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="9980c-130">Carta presente</span><span class="sxs-lookup"><span data-stu-id="9980c-130">Card present</span></span> | <span data-ttu-id="9980c-131">Un termine che fa riferimento alle transazioni di pagamento in cui una carta fisica viene presentata e utilizzata in un terminale di pagamento connesso al sistema POS di Microsoft Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="9980c-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="9980c-132">Panoramica</span><span class="sxs-lookup"><span data-stu-id="9980c-132">Overview</span></span>

<span data-ttu-id="9980c-133">In genere, il termine *pagamenti omnicanale* descrive la possibilità di creare un ordine in un canale e di evaderlo in un altro canale.</span><span class="sxs-lookup"><span data-stu-id="9980c-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="9980c-134">La chiave al supporto del pagamento omnicanale è mantenere i dettagli del pagamento insieme agli altri dettagli dell'ordine e quindi utilizzare tali dettagli quando l'ordine viene richiamato o elaborato in un altro canale.</span><span class="sxs-lookup"><span data-stu-id="9980c-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="9980c-135">Un esempio classico è lo scenario "Acquista online, preleva nel punto vendita".</span><span class="sxs-lookup"><span data-stu-id="9980c-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="9980c-136">In questo scenario, i dettagli di pagamento vengono aggiunti quando l'ordine viene creato online.</span><span class="sxs-lookup"><span data-stu-id="9980c-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="9980c-137">Vengono quindi richiamati nel POS per addebitare la carta di pagamento del cliente al momento del ritiro.</span><span class="sxs-lookup"><span data-stu-id="9980c-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="9980c-138">Tutti gli scenari descritti in questo argomento possono essere implementati mediante il kit SDK Pagamenti standard fornito con Commerce.</span><span class="sxs-lookup"><span data-stu-id="9980c-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="9980c-139">Il [connettore pagamenti di Dynamics 365 per Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) fornisce un'implementazione predefinita di ogni scenario descritto qui.</span><span class="sxs-lookup"><span data-stu-id="9980c-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="9980c-140">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="9980c-140">Prerequisites</span></span>

<span data-ttu-id="9980c-141">Ogni scenario descritto in questo argomento richiede un connettore pagamenti che supporta i pagamenti omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="9980c-142">Anche il connettore Adyen predefinito può essere utilizzato in quanto supporta gli scenari resi disponibili mediante il kit SDK Pagamenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="9980c-143">Per ulteriori informazioni sull'implementazione di connettori pagamenti e su Retail SDK in generale, visitare l'[home page di vendita al dettaglio per professionisti IT e sviluppatori](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="9980c-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="9980c-144">Versioni supportate</span><span class="sxs-lookup"><span data-stu-id="9980c-144">Supported versions</span></span>

<span data-ttu-id="9980c-145">Le funzionalità di pagamento omnicanale descritte in questo argomento sono state rilasciate nella versione 8.1.3 di Microsoft Dynamics 365 for Retail.</span><span class="sxs-lookup"><span data-stu-id="9980c-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="9980c-146">Connettori "Carta presente" e "Carta non presente"</span><span class="sxs-lookup"><span data-stu-id="9980c-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="9980c-147">Il kit SDK di pagamenti utilizza due set di API per i pagamenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="9980c-148">Il primo set di API è denominato **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="9980c-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="9980c-149">È utilizzato per implementare i connettori pagamenti "Carta non presente" che possono essere utilizzati in servizi clienti e con la piattaforma di e-commerce di Microsoft Dynamics.</span><span class="sxs-lookup"><span data-stu-id="9980c-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="9980c-150">Per ulteriori informazioni sull'interfaccia **iPaymentProcessor**, vedere il white paper [Implementazione di un connettore pagamenti e un dispositivo di pagamento](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) relativo ai pagamenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="9980c-151">Il secondo set di API è denominato **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="9980c-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="9980c-152">Supporta l'implementazione delle Integrazioni di pagamento "carta esistente" che utilizzano un terminale di pagamento.</span><span class="sxs-lookup"><span data-stu-id="9980c-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="9980c-153">Per ulteriori informazioni sull'interfaccia **iNamedRequestHandler**, vedere [Creare un'integrazione di pagamento per un terminale di pagamento](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="9980c-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="9980c-154">Impostazione e configurazione</span><span class="sxs-lookup"><span data-stu-id="9980c-154">Setup and configuration</span></span>

<span data-ttu-id="9980c-155">I seguenti componenti e passaggi di impostazione sono necessari:</span><span class="sxs-lookup"><span data-stu-id="9980c-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="9980c-156">**integrazione e-commerce :** un'integrazione con Commerce è necessaria per supportare gli scenari in cui un ordine ha origine da una vetrina virtuale online.</span><span class="sxs-lookup"><span data-stu-id="9980c-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="9980c-157">Per ulteriori informazioni sul kit SDK Retail e-commerce, vedere [Kit SDK della piattaforma e-commerce](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="9980c-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="9980c-158">In un ambiente dimostrativo, la vetrina virtuale di riferimento supporta scenari di pagamento omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="9980c-159">**Configurazione pagamenti online:** l'impostazione del canale online deve includere un connettore pagamenti che è stato aggiornato per supportare i pagamenti omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="9980c-160">In alternativa, è possibile utilizzare il connettore pagamenti predefinito.</span><span class="sxs-lookup"><span data-stu-id="9980c-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="9980c-161">Per informazioni su come configurare il connettore pagamenti Adyen per punti vendita online, vedere [Connector pagamenti Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="9980c-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="9980c-162">Oltre alla procedura di impostazione e-commerce descritta in quell'argomento, il parametro **Consenti salvataggio informazioni di pagamento in e-commerce** deve essere impostato su **True** nelle impostazioni per il connettore Adyen.</span><span class="sxs-lookup"><span data-stu-id="9980c-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="9980c-163">**Configurazione pagamenti omnicanale:** nel back office, andare a **Retail e Commerce \> Impostazione sedi centrali \> Parametri \> Parametri condivisi di commercio**.</span><span class="sxs-lookup"><span data-stu-id="9980c-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="9980c-164">Quindi, nella scheda **Pagamenti omnicanale**, impostare l'opzione **Usa pagamenti omnicanale** su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="9980c-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="9980c-165">Nelle versioni Commerce 10.0.12 e successive, questa impostazione si trova nell'area di lavoro **Gestione funzionalità**.</span><span class="sxs-lookup"><span data-stu-id="9980c-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="9980c-166">Selezionare la funzionalità **Pagamenti omnicanale** e fare clic su **Abilita ora**.</span><span class="sxs-lookup"><span data-stu-id="9980c-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="9980c-167">**Servizi di pagamento:** il servizio clienti utilizza il connettore pagamenti predefinito nella pagina **Servizi di pagamento** per elaborare i pagamenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="9980c-168">Per supportare gli scenari, ad esempio "Acquista nel servizio clienti, preleva nel punto vendita", questo connettore pagamenti predefinito deve essere un connettore pagamenti Adyen o un connettore pagamenti che soddisfa i requisiti di implementazione dei pagamenti omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="9980c-169">**Servizio EFT:** i pagamenti mediante un terminale di pagamento devono essere impostati nella Scheda dettaglio **Servizio EFT** del profilo hardware.</span><span class="sxs-lookup"><span data-stu-id="9980c-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="9980c-170">Il connettore Adyen supporta gli scenari di pagamenti omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="9980c-171">Anche altri connettori pagamenti che supportano l'interfaccia **iNamedRequestHandler** possono essere utilizzati se supportano i pagamenti omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="9980c-172">**Disponibilità connettori pagamenti:** quando un ordine viene richiamato, le righe del metodo di pagamento richiamate insieme all'ordine includono il nome del connettore pagamenti utilizzato per creare le autorizzazioni associate a tale ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="9980c-173">Quando l'ordine viene evaso, il kit SDK di pagamenti tenta di utilizzare lo stesso connettore utilizzato per creare l'autorizzazione originale.</span><span class="sxs-lookup"><span data-stu-id="9980c-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="9980c-174">Di conseguenza, un connettore pagamenti con le stesse proprietà esercente deve essere disponibile per l'acquisizione.</span><span class="sxs-lookup"><span data-stu-id="9980c-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="9980c-175">**Tipi di carta:** per un corretto funzionamento degli scenari omnicanale, ogni canale deve avere la stessa impostazione per i tipi di metodi di pagamento utilizzabile per l'omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="9980c-176">Questa impostazione include gli ID metodo di pagamento e gli ID tipo di carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="9980c-177">Ad esempio, se l'ID del tipo di metodo di pagamento **Carte** è **2** nell'impostazione del punto vendita online, deve avere lo stesso ID nell'impostazione del punto vendita al dettaglio.</span><span class="sxs-lookup"><span data-stu-id="9980c-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="9980c-178">Lo stesso requisito si applica agli ID tipi di carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="9980c-179">Se il numero di carta **12** è impostato su **VISA** nel punto vendita online, lo stesso ID deve essere impostato per il punto vendita al dettaglio.</span><span class="sxs-lookup"><span data-stu-id="9980c-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="9980c-180">Retail Modern POS per Windows o Android con una stazione hardware integrata oppure</span><span class="sxs-lookup"><span data-stu-id="9980c-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="9980c-181">Modern POS per iOS o Cloud POS con stazione hardware condivisa collegata.</span><span class="sxs-lookup"><span data-stu-id="9980c-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="9980c-182">Principio di base per il supporto di pagamenti omnicanale</span><span class="sxs-lookup"><span data-stu-id="9980c-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="9980c-183">I connettori pagamenti e i sistemi di elaborazione dei pagamenti utilizzano token, o riferimenti, per fare riferimento alle interazioni correlate ai pagamenti con carta di credito.</span><span class="sxs-lookup"><span data-stu-id="9980c-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="9980c-184">Ad esempio, quando viene richiesta un'autorizzazione di pagamento, viene fornito un riferimento a tale autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="9980c-185">Di conseguenza, è possibile fare riferimento all'autorizzazione in seguito, quando i fondi vengono acquisiti al momento dell'evasione.</span><span class="sxs-lookup"><span data-stu-id="9980c-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="9980c-186">Questa autorizzazione è specifica all'esercente, al connettore pagamenti e al sistema di elaborazione dei pagamenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="9980c-187">Se un ordine creato online viene prelevato presso il punto vendita, gli stessi dettagli relativi al pagamento di quell'ordine devono essere richiamati e utilizzati.</span><span class="sxs-lookup"><span data-stu-id="9980c-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="9980c-188">Quando vengono forniti i dettagli originali nell'ambito della richiesta di acquisizione di un pagamento a fronte dell'autorizzazione originale, il sistema di elaborazione dei pagamenti sarà in grado di gestire la richiesta e acquisire il pagamento.</span><span class="sxs-lookup"><span data-stu-id="9980c-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="9980c-189">Per fare riferimento correttamente all'ordine online, deve essere disponibile anche un connettore pagamenti "carta non presente" che supporta lo stesso sistema di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="9980c-190">In questo caso, il sistema POS può avere un sistema di elaborazione per pagamenti "carta presente", ma anche accedere ad altri connettori pagamenti in modo da evadere ordini creati in altri canali utilizzando differenti sistemi di elaborazione dei pagamenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="9980c-191">Scenari supportati</span><span class="sxs-lookup"><span data-stu-id="9980c-191">Supported scenarios</span></span>

<span data-ttu-id="9980c-192">I seguenti scenari di pagamento omnicanale sono supportati:</span><span class="sxs-lookup"><span data-stu-id="9980c-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="9980c-193">Acquista online, preleva nel punto vendita</span><span class="sxs-lookup"><span data-stu-id="9980c-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="9980c-194">Acquista nel servizio clienti, preleva nel punto vendita</span><span class="sxs-lookup"><span data-stu-id="9980c-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="9980c-195">Acquista nel punto vendita A, preleva nel punto vendita B</span><span class="sxs-lookup"><span data-stu-id="9980c-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="9980c-196">Acquista nel punto vendita A, spedisci a cliente</span><span class="sxs-lookup"><span data-stu-id="9980c-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="9980c-197">I pagamenti effettuati nel call center che effettuano il mapping alla funzione di pagamento "Normale" devono essere contrassegnati come **Pagamento anticipato** = **Sì** in modo da riflettersi nell'importo dovuto al momento del richiamo dell'ordine nel POS.</span><span class="sxs-lookup"><span data-stu-id="9980c-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="9980c-198">I pagamenti senza pagamento anticipato di tipo "Normale" non vengono riconosciuti quando l'ordine viene richiamato in POS.</span><span class="sxs-lookup"><span data-stu-id="9980c-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="9980c-199">Sono supportate anche variazioni di questi scenari.</span><span class="sxs-lookup"><span data-stu-id="9980c-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="9980c-200">Ad esempio, un ordine online può includere le righe che verranno spedite al cliente e quelle che saranno prelevate in un punto vendita.</span><span class="sxs-lookup"><span data-stu-id="9980c-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="9980c-201">Tutte le opzioni di evasione degli ordini sono supportate tramite pagamenti omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="9980c-202">Nelle sezioni seguenti vengono descritte le procedure per ogni scenario e viene indicato come eseguire lo scenario utilizzando dati dimostrativi.</span><span class="sxs-lookup"><span data-stu-id="9980c-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="9980c-203">Acquista online, preleva nel punto vendita</span><span class="sxs-lookup"><span data-stu-id="9980c-203">Buy online, pick up in store</span></span>

<span data-ttu-id="9980c-204">Prima di iniziare, assicurarsi che i seguenti prerequisiti siano soddisfatti:</span><span class="sxs-lookup"><span data-stu-id="9980c-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="9980c-205">Si dispone di una vetrina virtuale di riferimento in cui il connettore pagamenti Adyen viene configurato.</span><span class="sxs-lookup"><span data-stu-id="9980c-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="9980c-206">L'opzione **Pagamenti omnicanale** nella pagina **Parametri condivisi di commercio** è impostata su **True**.</span><span class="sxs-lookup"><span data-stu-id="9980c-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="9980c-207">Nelle versioni successive questa impostazione è stata spostata nell'area di lavoro **Gestione funzionalità** in cui è possibile selezionare la funzionalità **Pagamenti multicanale** e fare clic su **Abilita ora**.</span><span class="sxs-lookup"><span data-stu-id="9980c-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="9980c-208">Il connettore pagamenti Adyen è configurato per il registratore di cassa POS di Houston.</span><span class="sxs-lookup"><span data-stu-id="9980c-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="9980c-209">Retail Modern POS per Windows o Android con una stazione hardware integrata oppure</span><span class="sxs-lookup"><span data-stu-id="9980c-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="9980c-210">Modern POS per iOS o Cloud POS con stazione hardware condivisa collegata.</span><span class="sxs-lookup"><span data-stu-id="9980c-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="9980c-211">Attenersi alla seguente procedura per eseguire lo scenario.</span><span class="sxs-lookup"><span data-stu-id="9980c-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="9980c-212">Nella vetrina virtuale di riferimento, creare un ordine per il prelievo nel punto vendita.</span><span class="sxs-lookup"><span data-stu-id="9980c-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="9980c-213">Assicurarsi di selezionare il punto vendita **Houston**.</span><span class="sxs-lookup"><span data-stu-id="9980c-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="9980c-214">Eseguire la procedura di check out e pagare utilizzando un numero di carta di credito di prova.</span><span class="sxs-lookup"><span data-stu-id="9980c-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="9980c-215">È possibile trovare numeri di carta di credito di prova nella [pagina dei numeri di carta di credito di prova Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="9980c-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="9980c-216">In Commerce, utilizzare il processo batch **Sincronizza ordini** e la programmazione distribuzione **P-001** per creare gli ordini nel back office.</span><span class="sxs-lookup"><span data-stu-id="9980c-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="9980c-217">Nel POS, nella pagina di benvenuto, selezionare l'operazione **Ordini da prelevare** per visualizzare gli ordini per il prelievo nel punto vendita.</span><span class="sxs-lookup"><span data-stu-id="9980c-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="9980c-218">Selezionare una o più righe dall'ordine creato nella vetrina virtuale di riferimento, quindi selezionare **Preleva**.</span><span class="sxs-lookup"><span data-stu-id="9980c-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="9980c-219">L'ordine viene recuperato dal back office.</span><span class="sxs-lookup"><span data-stu-id="9980c-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="9980c-220">Quando i dettagli della riga ordine vengono recuperati dal back office e viene rilevato un pagamento con carta che può essere utilizzato per l'omnicanale, viene segnalato che un metodo di pagamento è disponibile.</span><span class="sxs-lookup"><span data-stu-id="9980c-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="9980c-221">Selezionare **Usa metodo di pagamento disponibile** per completare la transazione utilizzando i dettagli della scheda immessi nella vetrina virtuale di riferimento.</span><span class="sxs-lookup"><span data-stu-id="9980c-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="9980c-222">Le righe ordine vengono caricate nella pagina delle transazioni e il saldo esigibile è 0 (zero).</span><span class="sxs-lookup"><span data-stu-id="9980c-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="9980c-223">Selezionare la scheda **Pagamenti** per visualizzare la riga del metodo di pagamento acquisita dall'ordine online.</span><span class="sxs-lookup"><span data-stu-id="9980c-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="9980c-224">Selezionare qualsiasi metodo di pagamento per completare la transazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="9980c-225">Acquista nel servizio clienti, preleva nel punto vendita</span><span class="sxs-lookup"><span data-stu-id="9980c-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="9980c-226">In Commerce, nella pagina **Servizio clienti**, immettere **Karen Berg** nella barra di ricerca, quindi selezionare **Cerca**.</span><span class="sxs-lookup"><span data-stu-id="9980c-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="9980c-227">Selezionare **Karen Berg** nei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="9980c-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="9980c-228">Dopo il caricamento di Karen nella pagina **Servizio clienti**, selezionare **Nuovo ordine cliente**.</span><span class="sxs-lookup"><span data-stu-id="9980c-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="9980c-229">Nella nuova pagina degli ordini cliente, selezionare **Intestazione** per visualizzare l'intestazione dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="9980c-230">Nella pagina **Intestazione ordine**, impostare il sito su **Centrale** e il magazzino su **Houston**.</span><span class="sxs-lookup"><span data-stu-id="9980c-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="9980c-231">Nella scheda **Fornisci**, impostare il campo **Modalità di consegna** su **60** per il prelievo cliente.</span><span class="sxs-lookup"><span data-stu-id="9980c-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="9980c-232">Selezionare **Righe** e quindi aggiungere una o più righe all'ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="9980c-233">Selezionare **Completa** per immettere il flusso di completamento dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="9980c-234">Scorrere fino alla sezione dei pagamenti, selezionare **Aggiungi**, quindi selezionare una riga in cui il tipo di metodo di pagamento è impostato su **Carte**.</span><span class="sxs-lookup"><span data-stu-id="9980c-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="9980c-235">Selezionare il segno più (**+**) per aggiungere un pagamento con carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="9980c-236">Immettere i dettagli di un numero di carta di credito di prova trovato nella [pagina dei numeri di carta di credito di prova Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), quindi selezionare **OK**.</span><span class="sxs-lookup"><span data-stu-id="9980c-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="9980c-237">Se la marca della carta immessa differisce da quella selezionata all'inizio del pagamento, il pagamento verrà comunque effettuato.</span><span class="sxs-lookup"><span data-stu-id="9980c-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="9980c-238">Tuttavia, verrà registrato nei conti che vengono mappati alla marca della carta selezionata nel passaggio 10.</span><span class="sxs-lookup"><span data-stu-id="9980c-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="9980c-239">Scegliere di nuovo **OK** per chiudere la finestra di dialogo **Pagamenti completamento ordine**.</span><span class="sxs-lookup"><span data-stu-id="9980c-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="9980c-240">Nella pagina **Riepilogo ordine cliente**, seleziona **Invia**.</span><span class="sxs-lookup"><span data-stu-id="9980c-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="9980c-241">Nel POS, nella pagina di benvenuto, selezionare l'operazione **Ordini da prelevare** per visualizzare gli ordini per il prelievo nel punto vendita.</span><span class="sxs-lookup"><span data-stu-id="9980c-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="9980c-242">Selezionare una o più righe dall'ordine creato nella vetrina virtuale di riferimento, quindi selezionare **Preleva**.</span><span class="sxs-lookup"><span data-stu-id="9980c-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="9980c-243">L'ordine viene recuperato dal back office.</span><span class="sxs-lookup"><span data-stu-id="9980c-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="9980c-244">Quando i dettagli della riga ordine vengono recuperati dal back office e viene rilevato un pagamento con carta che può essere utilizzato per l'omnicanale, viene segnalato che un metodo di pagamento è disponibile.</span><span class="sxs-lookup"><span data-stu-id="9980c-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="9980c-245">Selezionare **Usa metodo di pagamento disponibile** per completare la transazione utilizzando i dettagli della scheda immessi nella vetrina virtuale di riferimento.</span><span class="sxs-lookup"><span data-stu-id="9980c-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="9980c-246">Le righe ordine vengono caricate nella pagina delle transazioni e il saldo esigibile è 0 (zero).</span><span class="sxs-lookup"><span data-stu-id="9980c-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="9980c-247">Selezionare la scheda **Pagamenti** per visualizzare la riga del metodo di pagamento acquisita dall'ordine online.</span><span class="sxs-lookup"><span data-stu-id="9980c-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="9980c-248">Selezionare qualsiasi metodo di pagamento per completare la transazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="9980c-249">Acquista nel punto vendita A, preleva nel punto vendita B</span><span class="sxs-lookup"><span data-stu-id="9980c-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="9980c-250">Avviare il POS per il punto vendita di Houston.</span><span class="sxs-lookup"><span data-stu-id="9980c-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="9980c-251">Nella pagina **Transazione**, aggiungere Karen Berg alla transazione mediante il tastierino numerico per immettere **2001**.</span><span class="sxs-lookup"><span data-stu-id="9980c-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="9980c-252">Aggiungere una o più righe alla transazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="9980c-253">Selezionare **Ordini** per visualizzare le opzioni relative agli ordini.</span><span class="sxs-lookup"><span data-stu-id="9980c-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="9980c-254">Selezionare **Preleva tutto**, quindi quando verrà richiesto, selezionare **Ordine cliente**.</span><span class="sxs-lookup"><span data-stu-id="9980c-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="9980c-255">Nella barra di ricerca, immettere **Seattle** quindi selezionare il punto vendita **Seattle** per il prelievo.</span><span class="sxs-lookup"><span data-stu-id="9980c-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="9980c-256">Selezionare **OK** per accettare la data corrente come data di prelievo.</span><span class="sxs-lookup"><span data-stu-id="9980c-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="9980c-257">Selezionare **Pagamento con carta** per avviare il pagamento.</span><span class="sxs-lookup"><span data-stu-id="9980c-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="9980c-258">Scegliere il pagamento con carta per l'importo dovuto per il deposito.</span><span class="sxs-lookup"><span data-stu-id="9980c-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="9980c-259">Completare il pagamento del deposito nel terminale di pagamento.</span><span class="sxs-lookup"><span data-stu-id="9980c-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="9980c-260">Dopo il pagamento del deposito, selezionare l'opzione per utilizzare la stessa carta per l'evasione e attendere il completamento dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="9980c-261">Avviare il POS per il punto vendita di Seattle.</span><span class="sxs-lookup"><span data-stu-id="9980c-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="9980c-262">Nel POS, nella pagina di benvenuto, selezionare l'operazione **Ordini da prelevare** per visualizzare gli ordini per il prelievo nel punto vendita.</span><span class="sxs-lookup"><span data-stu-id="9980c-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="9980c-263">Selezionare una o più righe dall'ordine creato nella vetrina virtuale di riferimento, quindi selezionare **Preleva**.</span><span class="sxs-lookup"><span data-stu-id="9980c-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="9980c-264">L'ordine viene recuperato dal back office.</span><span class="sxs-lookup"><span data-stu-id="9980c-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="9980c-265">Quando i dettagli della riga ordine vengono recuperati dal back office e viene rilevato un pagamento con carta che può essere utilizzato per l'omnicanale, viene segnalato che un metodo di pagamento è disponibile.</span><span class="sxs-lookup"><span data-stu-id="9980c-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="9980c-266">Selezionare **Usa metodo di pagamento disponibile** per completare la transazione utilizzando i dettagli della scheda immessi nella vetrina virtuale di riferimento.</span><span class="sxs-lookup"><span data-stu-id="9980c-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="9980c-267">Le righe ordine vengono caricate nella pagina delle transazioni e il saldo esigibile è 0 (zero).</span><span class="sxs-lookup"><span data-stu-id="9980c-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="9980c-268">Selezionare la scheda **Pagamenti** per visualizzare la riga del metodo di pagamento acquisita dall'ordine online.</span><span class="sxs-lookup"><span data-stu-id="9980c-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="9980c-269">Selezionare qualsiasi metodo di pagamento per completare la transazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="9980c-270">Acquista nel punto vendita A, spedisci a cliente</span><span class="sxs-lookup"><span data-stu-id="9980c-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="9980c-271">Avviare il POS per il punto vendita di Houston.</span><span class="sxs-lookup"><span data-stu-id="9980c-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="9980c-272">Nella pagina **Transazione**, aggiungere Karen Berg alla transazione mediante il tastierino numerico per immettere **2001**.</span><span class="sxs-lookup"><span data-stu-id="9980c-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="9980c-273">Aggiungere una o più righe alla transazione.</span><span class="sxs-lookup"><span data-stu-id="9980c-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="9980c-274">Selezionare **Ordini** per visualizzare le opzioni relative agli ordini.</span><span class="sxs-lookup"><span data-stu-id="9980c-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="9980c-275">Selezionare **Spedisci tutto**, quindi quando verrà richiesto, selezionare **Ordine cliente**.</span><span class="sxs-lookup"><span data-stu-id="9980c-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="9980c-276">Nella pagina del metodo di spedizione, seleziona **Standard durante la notte** e quindi seleziona **OK** per accettare la data odierna come data di spedizione.</span><span class="sxs-lookup"><span data-stu-id="9980c-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="9980c-277">Selezionare **OK** per accettare la data corrente come data di prelievo.</span><span class="sxs-lookup"><span data-stu-id="9980c-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="9980c-278">Selezionare **Pagamento con carta** per avviare il pagamento.</span><span class="sxs-lookup"><span data-stu-id="9980c-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="9980c-279">Scegliere il pagamento con carta per l'importo dovuto per il deposito.</span><span class="sxs-lookup"><span data-stu-id="9980c-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="9980c-280">Completare il pagamento del deposito nel terminale di pagamento.</span><span class="sxs-lookup"><span data-stu-id="9980c-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="9980c-281">Dopo il pagamento del deposito, selezionare l'opzione per utilizzare la stessa carta per l'evasione e attendere il completamento dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="9980c-282">Quando l'ordine viene prelevato, imballato e fatturato nel back office, i dettagli del pagamento specificati nel POS verranno utilizzati per acquisire i fondi per la merce spedita al cliente.</span><span class="sxs-lookup"><span data-stu-id="9980c-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="9980c-283">Dettagli dello scenario</span><span class="sxs-lookup"><span data-stu-id="9980c-283">Scenario details</span></span>

<span data-ttu-id="9980c-284">Oltre agli scenari di base appena descritti, sono stati apportati vari miglioramenti al kit SDK di pagamenti per supportare pagamenti omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="9980c-285">POS</span><span class="sxs-lookup"><span data-stu-id="9980c-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="9980c-286">Singolo passaggio di carta per ordini cliente</span><span class="sxs-lookup"><span data-stu-id="9980c-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="9980c-287">Prima dell'implementazione della funzionalità Pagamenti omnicanale, quando si creavano ordini cliente che includevano depositi nel POS, ai clienti veniva richiesto di passare la loro carta due volte: una volta per pagare il deposito e una volta per eseguire la tokenizzazione della carta per l'evasione dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="9980c-288">Quando la funzionalità di tokenizzazione omnicanale è attivata, i clienti devono passare la loro carta una sola volta per pagare il deposito e autorizzare l'importo dovuto che verrà evaso in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="9980c-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="9980c-289">Al momento dell'evasione, i fondi autorizzati vengono acquisiti.</span><span class="sxs-lookup"><span data-stu-id="9980c-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="9980c-290">Prima dell'implementazione della funzionalità di tokenizzazione omnicanale, solo un token carta di credito ricorrente veniva creato per l'evasione dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="9980c-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="9980c-291">Di conseguenza, i fondi per l'evasione in sospeso non erano autorizzati e poiché non erano mantenuti per quell'acquisto specifico, era meno probabile che potessero essere acquisiti in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="9980c-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="9980c-292">Un singolo passaggio della carta non è supportato nella versione 8.1.3 di Retail.</span><span class="sxs-lookup"><span data-stu-id="9980c-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="9980c-293">Gli ordini cliente nella versione 8.1.3 utilizzano lo stesso flusso utilizzato prima dell'implementazione della funzionalità di tokenizzazione omnicanale.</span><span class="sxs-lookup"><span data-stu-id="9980c-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="9980c-294">Carte che non possono generare token carte di credito ricorrenti</span><span class="sxs-lookup"><span data-stu-id="9980c-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="9980c-295">Alcune carte non possono essere utilizzate per i pagamenti omnicanale in quanto non supportano l'emissione di token carte di credito ricorrenti.</span><span class="sxs-lookup"><span data-stu-id="9980c-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="9980c-296">Quando un ordine viene creato nel POS, se il deposito viene pagato mediante una scheda che non supporta token carta di credito ricorrenti, viene utilizzato il flusso di tokenizzazione di carte precedente.</span><span class="sxs-lookup"><span data-stu-id="9980c-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="9980c-297">Di conseguenza, un cliente che intende fornire un pagamento che verrà utilizzato per l'evasione dell'ordine deve presentare una seconda carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="9980c-298">Se la seconda carta non supporta token carta di credito ricorrenti, l'azione di tokenizzazione verrà declinata e al cassiere viene richiesto di richiedere al cliente un'altra carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="9980c-299">Utilizzo di un'altra carta</span><span class="sxs-lookup"><span data-stu-id="9980c-299">Using a different card</span></span>

<span data-ttu-id="9980c-300">Un cliente che si reca al punto vendita per il prelievo dell'ordine ha la possibilità di utilizzare un'altra carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="9980c-301">Quando il cassiere vede la richiesta **Usa metodo di pagamento disponibile** al momento del prelievo dell'ordine, può chiedere al cliente se desidera utilizzare la stessa scheda.</span><span class="sxs-lookup"><span data-stu-id="9980c-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="9980c-302">Se il cliente ha perso la carta utilizzata per creare l'ordine e desidera pagare l'ordine utilizzando un'altra carta, il cassiere può selezionare **Usa metodo di pagamento diverso**.</span><span class="sxs-lookup"><span data-stu-id="9980c-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="9980c-303">Se il cliente ritorna in seguito per prelevare altri articoli per lo stesso ordine e l'autorizzazione della scheda originale è ancora valida, il cassiere può ancora chiedere al cliente se desidera utilizzare quella carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="9980c-304">Autorizzazioni non valide</span><span class="sxs-lookup"><span data-stu-id="9980c-304">Invalid authorizations</span></span>

<span data-ttu-id="9980c-305">Se la carta utilizzata per creare un ordine non è più valida, quando i prodotti vengono selezionati per il prelievo, la richiesta di acquisizione del pagamento non riuscirà.</span><span class="sxs-lookup"><span data-stu-id="9980c-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="9980c-306">Il connettore pagamenti POS tenterà quindi di creare una nuova autorizzazione e acquisizione utilizzando gli stessi dettagli della carta.</span><span class="sxs-lookup"><span data-stu-id="9980c-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="9980c-307">Se la nuova autorizzazione o acquisizione ha esito negativo, al cassiere verrà notificato che il pagamento non è stato elaborato.</span><span class="sxs-lookup"><span data-stu-id="9980c-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="9980c-308">Il cassiere deve quindi ottenere un nuovo pagamento dal cliente.</span><span class="sxs-lookup"><span data-stu-id="9980c-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="9980c-309">Molteplici pagamenti disponibili</span><span class="sxs-lookup"><span data-stu-id="9980c-309">Multiple available payments</span></span>

<span data-ttu-id="9980c-310">Quando viene prelevato un ordine con più metodi di pagamento e più righe, il cassiere dapprima vede la richiesta **Usa metodo di pagamento disponibile**.</span><span class="sxs-lookup"><span data-stu-id="9980c-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="9980c-311">Se sono disponibili più carte, quando il cassiere seleziona **Usa metodo di pagamento disponibile**, le righe del pagamento con carta verranno acquisite fino al raggiungimento del saldo per le merci attualmente prelevate.</span><span class="sxs-lookup"><span data-stu-id="9980c-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="9980c-312">Il cassiere non avrà l'opzione di selezionare la carta che deve essere utilizzata per le merci che vengono prelevate.</span><span class="sxs-lookup"><span data-stu-id="9980c-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="9980c-313">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="9980c-313">Related topics</span></span>

- [<span data-ttu-id="9980c-314">Domande frequenti sui pagamenti</span><span class="sxs-lookup"><span data-stu-id="9980c-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="9980c-315">Connettore pagamenti di Dynamics 365 per Adyen</span><span class="sxs-lookup"><span data-stu-id="9980c-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="9980c-316">Configurare uno scenario BOPIS in un ambiente di valutazione Dynamics 365 Commerce</span><span class="sxs-lookup"><span data-stu-id="9980c-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)

