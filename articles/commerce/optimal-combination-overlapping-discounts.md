---
title: Determinare la combinazione ottimale di sconti sovrapposti
description: Quando gli sconti si sovrappongono, è necessario determinare la combinazione di sconti sovrapposti che produrranno il totale transazione più basso o lo sconto totale più alto. Quando l'importo dello sconto dipende dal prezzo dei prodotti acquistati, come ad esempio nel comune sconto al dettaglio "Compri 1, prendi 1 con lo sconto dell'X%", questo processo diventa una questione di ottimizzazione combinatoria.
author: kfend
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailParameters, RetailPeriodicDiscount,
audience: Application User, IT Pro
ms.reviewer: josaw
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: 3c7dafe55fc7072aa12b98ff42ed7d9e4719f4cd
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 03/31/2021
ms.locfileid: "5804699"
---
# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a><span data-ttu-id="a0d75-104">Determinare la combinazione ottimale di sconti sovrapposti</span><span class="sxs-lookup"><span data-stu-id="a0d75-104">Determine the optimal combination of overlapping discounts</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="a0d75-105">Quando gli sconti si sovrappongono, è necessario determinare la combinazione di sconti sovrapposti che produrranno il totale transazione più basso o lo sconto totale più alto.</span><span class="sxs-lookup"><span data-stu-id="a0d75-105">When discounts overlap, you must determine the combination of overlapping discounts that will produce the lowest transaction total or the highest total discount.</span></span> <span data-ttu-id="a0d75-106">Quando l'importo dello sconto dipende dal prezzo dei prodotti acquistati, come ad esempio nel comune sconto al dettaglio "Compri 1, prendi 1 con lo sconto dell'X percento", questo processo diventa una questione di ottimizzazione combinatoria.</span><span class="sxs-lookup"><span data-stu-id="a0d75-106">When the discount amount varies according to the price of the products that are purchased, such as in the common "Buy 1, get 1 X percent off" (BOGO) retail discount, this process becomes an issue of combinatorial optimization.</span></span>

<span data-ttu-id="a0d75-107">Questo articolo si applica a Microsoft Dynamics AX 2012 R3 con KB 3105973 (rilasciato il 2 novembre 2015) o versioni successive e a Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="a0d75-107">This article applies to Microsoft Dynamics AX 2012 R3 with KB 3105973 (released November 2, 2015) or later, and to Dynamics 365 Commerce.</span></span> <span data-ttu-id="a0d75-108">Per determinare la combinazione di sconti sovrapposti da applicare con puntualità, abbiamo introdotto un metodo per l'applicazione degli sconti sovrapposti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-108">To determine the combination overlapping discounts to apply in a timely manner, we have introduced a method for applying overlapping discounts.</span></span> <span data-ttu-id="a0d75-109">Chiamiamo il nuovo metodo **classificazione del valore marginale**.</span><span class="sxs-lookup"><span data-stu-id="a0d75-109">We call this new method **marginal value ranking**.</span></span> <span data-ttu-id="a0d75-110">Classificazione del valore marginale viene utilizzata quando il tempo necessario per valutare le possibili combinazioni di sconti sovrapposti supera una soglia configurabile nella pagina **Parametri di commercio**.</span><span class="sxs-lookup"><span data-stu-id="a0d75-110">Marginal value ranking is used when the time that is required in order to evaluate the possible combinations of overlapping discounts exceeds a threshold that is configurable on the **Commerce parameters** page.</span></span> <span data-ttu-id="a0d75-111">Nel metodo di classificazione del valore marginale, un valore viene calcolato per ciascuno sconto sovrapposto utilizzando il valore dello sconto sui prodotti condivisi.</span><span class="sxs-lookup"><span data-stu-id="a0d75-111">In the marginal value ranking method, a value is calculated for each overlapping discount by using the discount's value on the shared products.</span></span> <span data-ttu-id="a0d75-112">Gli sconti sovrapposti vengono quindi applicati dal valore relativo più alto al valore relativo più basso.</span><span class="sxs-lookup"><span data-stu-id="a0d75-112">The overlapped discounts are then applied from the highest relative value to the lowest relative value.</span></span> <span data-ttu-id="a0d75-113">Per informazioni dettagliate sul nuovo metodo, vedere la sezione "Valore marginale", più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="a0d75-113">For details about the new method, see the "Marginal value" section, later in this article.</span></span> <span data-ttu-id="a0d75-114">La classificazione del valore marginale non viene utilizzata quando gli importi di sconto per un prodotto non sono influenzati da un altro prodotto nella transazione.</span><span class="sxs-lookup"><span data-stu-id="a0d75-114">Marginal value ranking isn't used when the discount amounts for a product aren't affected by another product in the transaction.</span></span> <span data-ttu-id="a0d75-115">Ad esempio, questo metodo non viene utilizzato per due sconti semplici, o per uno sconto semplice e uno sconto quantità di un prodotto singolo.</span><span class="sxs-lookup"><span data-stu-id="a0d75-115">For example, this method isn't used for two simple discounts, or for a simple discount and a single product quantity discount.</span></span>

## <a name="discount-examples"></a><span data-ttu-id="a0d75-116">Esempi di sconto</span><span class="sxs-lookup"><span data-stu-id="a0d75-116">Discount examples</span></span>

<span data-ttu-id="a0d75-117">È possibile creare un numero illimitato di sconti per un set comune di prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-117">You can create an unlimited number of discounts on a common set of products.</span></span> <span data-ttu-id="a0d75-118">Tuttavia, poiché non esiste un limite, problemi di prestazioni possono verificarsi quando si tenta di calcolare gli sconti da utilizzare sui vari prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-118">However, because there is no limit, performance issues can occur when you try to calculate the discounts that should be used on the various products.</span></span> <span data-ttu-id="a0d75-119">Gli esempi seguenti illustrano più dettagliatamente questo problema.</span><span class="sxs-lookup"><span data-stu-id="a0d75-119">The following examples illustrate this issue in more detail.</span></span> <span data-ttu-id="a0d75-120">Nell'esempio 1, cominciamo con due prodotti e due sconti sovrapposti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-120">In example 1, we start with two products and two overlapping discounts.</span></span> <span data-ttu-id="a0d75-121">Quindi, nell'esempio 2, mostriamo come si evolve il problema con l'aggiunta di più prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-121">Then, in example 2, we show how the issue evolves as more products are added.</span></span>

### <a name="example-1-two-products-and-two-discounts"></a><span data-ttu-id="a0d75-122">Esempio 1: Due prodotti e due sconti</span><span class="sxs-lookup"><span data-stu-id="a0d75-122">Example 1: Two products and two discounts</span></span>

<span data-ttu-id="a0d75-123">In questo esempio, due prodotti sono necessari per qualificarsi per ciascuno sconto e gli sconti non possono essere combinati.</span><span class="sxs-lookup"><span data-stu-id="a0d75-123">In this example, two products are required in order to qualify for each discount, and the discounts can't be combined.</span></span> <span data-ttu-id="a0d75-124">Gli sconti in questo esempio sono sconti **Prezzo migliore**.</span><span class="sxs-lookup"><span data-stu-id="a0d75-124">The discounts in this example are **Best price** discounts.</span></span> <span data-ttu-id="a0d75-125">Entrambi i prodotti sono idonei a entrambi gli sconti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-125">Both products qualify for both discounts.</span></span> <span data-ttu-id="a0d75-126">Di seguito vengono riportati i due sconti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-126">Here are the two discounts.</span></span>

![Esempio di due sconti su prezzi migliori](./media/overlapping-discount-combo-01.jpg)

<span data-ttu-id="a0d75-128">Per qualsiasi combinazione di due prodotti, il migliore dei due sconti dipende dai prezzi dei due prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-128">For any two products, the better of these two discounts depends on the prices of the two products.</span></span> <span data-ttu-id="a0d75-129">Se il prezzo di entrambi i prodotti è uguali o quasi uguale, lo sconto 1 è preferibile.</span><span class="sxs-lookup"><span data-stu-id="a0d75-129">When the price of both products is equal or almost equal, discount 1 is better.</span></span> <span data-ttu-id="a0d75-130">Se il prezzo di un prodotto è molto inferiore al prezzo dell'altro prodotto, lo sconto 2 è preferibile.</span><span class="sxs-lookup"><span data-stu-id="a0d75-130">When the price of one product is significantly less than the price of the other product, discount 2 is better.</span></span> <span data-ttu-id="a0d75-131">Ecco la regola matematica per la valutazione reciproca dei due sconti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-131">Here is the mathematical rule for evaluating these two discounts against each other.</span></span>

![Regola per la valutazione degli sconti](./media/overlapping-discount-combo-02.jpg)

> [!NOTE]
> <span data-ttu-id="a0d75-133">Quando il prezzo del prodotto 1 equivale a due terzi del prezzo del prodotto 2, i due sconti sono uguali.</span><span class="sxs-lookup"><span data-stu-id="a0d75-133">When the price of product 1 is equal to two-thirds of the price of product 2, the two discounts are equal.</span></span> <span data-ttu-id="a0d75-134">In questo esempio, la percentuale di sconto valida per lo sconto 1 varia da pochi punti percentuali (quando i prezzi dei due prodotti sono molto diversi) fino a un massimo del 25% (quando i due prodotti hanno lo stesso prezzo).</span><span class="sxs-lookup"><span data-stu-id="a0d75-134">In this example, the effective discount percentage for discount 1 varies from a few percent (when the prices of the two products are far apart) to a maximum of 25 percent (when the two products have the same price).</span></span> <span data-ttu-id="a0d75-135">La percentuale di sconto valida per lo sconto 2 è fissa.</span><span class="sxs-lookup"><span data-stu-id="a0d75-135">The effective discount percentage for discount 2 is fixed.</span></span> <span data-ttu-id="a0d75-136">È sempre 20%.</span><span class="sxs-lookup"><span data-stu-id="a0d75-136">It's always 20 percent.</span></span> <span data-ttu-id="a0d75-137">Poiché la percentuale di sconto valida per lo sconto 1 ha un intervallo che può essere superiore o inferiore allo sconto 2, il migliore sconto dipende dai prezzi dei due prodotti che devono essere scontati.</span><span class="sxs-lookup"><span data-stu-id="a0d75-137">Because the effective discount percentage for discount 1 has a range that can be more than or less than discount 2, the best discount depends on the prices of the two products that must be discounted.</span></span> <span data-ttu-id="a0d75-138">In questo esempio, il calcolo viene completato rapidamente, poiché solo due sconti vengono applicati a solo due prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-138">In this example, the calculation is completed quickly, because only two discounts are applied on only two products.</span></span> <span data-ttu-id="a0d75-139">Sono disponibili solo due possibili combinazioni: un'applicazione dello sconto 1 o una applicazione dello sconto 2.</span><span class="sxs-lookup"><span data-stu-id="a0d75-139">There are only two possible combinations: one application of discount 1 or one application of discount 2.</span></span> <span data-ttu-id="a0d75-140">Non esistono permutazioni da calcolare.</span><span class="sxs-lookup"><span data-stu-id="a0d75-140">There are no permutations to calculate.</span></span> <span data-ttu-id="a0d75-141">Il valore di ogni sconto viene calcolato utilizzando entrambi i prodotti e il migliore sconto viene utilizzato.</span><span class="sxs-lookup"><span data-stu-id="a0d75-141">The value of each discount is calculated by using both products, and the best discount is used.</span></span>

### <a name="example-2-four-products-and-two-discounts"></a><span data-ttu-id="a0d75-142">Esempio 2: quattro prodotti e due sconti</span><span class="sxs-lookup"><span data-stu-id="a0d75-142">Example 2: Four products and two discounts</span></span>

<span data-ttu-id="a0d75-143">A questo punto, useremo quattro prodotti e gli stessi due sconti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-143">Next, we will use four products and the same two discounts.</span></span> <span data-ttu-id="a0d75-144">Tutti e quattro i prodotti sono idonei a entrambi gli sconti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-144">All four products qualify for both discounts.</span></span> <span data-ttu-id="a0d75-145">Sono disponibili dodici combinazioni possibili.</span><span class="sxs-lookup"><span data-stu-id="a0d75-145">There are twelve possible combinations.</span></span> <span data-ttu-id="a0d75-146">Al termine, due sconti vengono applicati alla transazione in una delle seguenti tre combinazioni: due applicazioni dello sconto 1, due applicazioni dell'applicazione dello sconto, 2 o una applicazione dello sconto 1 e una applicazione dello sconto 2.</span><span class="sxs-lookup"><span data-stu-id="a0d75-146">In the end, two discounts will be applied to the transaction in one of three combinations: two applications of discount 1, two applications of discount 2, or one application of discount 1 and one application of discount 2.</span></span> <span data-ttu-id="a0d75-147">Per illustrare le combinazioni possibili, esamineremo due diversi set di quattro prodotti con prezzi diversi:</span><span class="sxs-lookup"><span data-stu-id="a0d75-147">To illustrate the possible combinations, we will look at two different sets of four products that have different prices:</span></span>

- <span data-ttu-id="a0d75-148">Tutti e quattro i prodotti hanno lo stesso prezzo, $ 15,00.</span><span class="sxs-lookup"><span data-stu-id="a0d75-148">All four products have the same price, $15.00.</span></span> <span data-ttu-id="a0d75-149">In questo caso, la migliore combinazione di sconto è due applicazioni dello sconto 1.</span><span class="sxs-lookup"><span data-stu-id="a0d75-149">In this case, the best discount combination is two applications of discount 1.</span></span> <span data-ttu-id="a0d75-150">Due prodotti saranno a prezzo pieno e due avranno lo sconto del 50%.</span><span class="sxs-lookup"><span data-stu-id="a0d75-150">Two products will be full price, and two will be 50 percent off.</span></span> <span data-ttu-id="a0d75-151">Il totale scontato per la transazione è $ 45 (15 + 15 + 7,50 + 7,50), ovvero $ 15 (25%) di sconto sul totale non scontato di $ 60.</span><span class="sxs-lookup"><span data-stu-id="a0d75-151">The discounted total for the transaction is $45 (15 + 15 + 7.50 + 7.50), which is $15 (25 percent) off the undiscounted total of $60.</span></span> <span data-ttu-id="a0d75-152">Lo sconto 2 è solo $ 12 (20%).</span><span class="sxs-lookup"><span data-stu-id="a0d75-152">Discount 2 is only $12 (20 percent).</span></span>
- <span data-ttu-id="a0d75-153">Due prodotti costano $ 20 ciascuno, un prodotto $ 15 e un prodotto $ 5.</span><span class="sxs-lookup"><span data-stu-id="a0d75-153">Two products are $20 each, one product is $15, and one product is $5.</span></span> <span data-ttu-id="a0d75-154">In questo caso, la migliore combinazione di sconto è un'applicazione dello sconto 2 a un'applicazione dello sconto 1.</span><span class="sxs-lookup"><span data-stu-id="a0d75-154">In this case, the best discount combination is one application of discount 2 and one application of discount 1.</span></span> <span data-ttu-id="a0d75-155">Nelle tabelle seguenti vengono illustrati gli sconti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-155">The following tables illustrates the discounts.</span></span>

<span data-ttu-id="a0d75-156">Per leggere le tabelle, utilizzare un prodotto da una riga e un prodotto da una colonna.</span><span class="sxs-lookup"><span data-stu-id="a0d75-156">To read the tables, use one product from a row and one product from a column.</span></span> <span data-ttu-id="a0d75-157">Ad esempio, nella tabella per lo sconto 1, quando si combinano i due prodotti da $ 20, si ottiene uno sconto di $ 10.</span><span class="sxs-lookup"><span data-stu-id="a0d75-157">For example, in the table for discount 1, when you combine the two $20 products, you get $10 off.</span></span> <span data-ttu-id="a0d75-158">Nella tabella per lo sconto 2, quando si combinano il prodotto $ 15 e il prodotto da $ 5, si ottiene uno sconto di $ 4.</span><span class="sxs-lookup"><span data-stu-id="a0d75-158">In the table for discount 2, when you combine the $15 product and the $5 product, you get $4 off.</span></span>

![Esempio che utilizza quattro prodotti per gli stessi due sconti](./media/overlapping-discount-combo-03.jpg)

<span data-ttu-id="a0d75-160">Per prima cosa individuiamo lo sconto maggiore disponibile per qualsiasi combinazione di due prodotti utilizzando l'uno o l'altro sconto.</span><span class="sxs-lookup"><span data-stu-id="a0d75-160">First, we find the largest discount that is available from any two products by using either discount.</span></span> <span data-ttu-id="a0d75-161">Le due tabelle mostrano l'importo di sconto per tutte le combinazioni dei due prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-161">The two tables show the discount amount for all combinations of the two products.</span></span> <span data-ttu-id="a0d75-162">Le parti ombreggiate delle tabelle rappresentano casi in cui un prodotto è accoppiato con se stesso, che non è fattibile, o un abbinamento invertito di due prodotti che genera lo stesso importo di sconto e può essere ignorato.</span><span class="sxs-lookup"><span data-stu-id="a0d75-162">The shaded portions of the tables represent either cases where a product is paired with itself, which we can't do, or a reverse pairing of two products that produces the same discount amount and can be ignored.</span></span> <span data-ttu-id="a0d75-163">Esaminando le tabelle, si noterà che lo sconto 1 per i due articoli da $ 20 è il più grande sconti che sia disponibile per uno sconto su tutti e quattro i prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-163">By looking at the tables, you can see that discount 1 for the two $20 items is the largest discount that is available for either discount on all four products.</span></span> <span data-ttu-id="a0d75-164">Questo sconto viene evidenziato in verde nella prima tabella. Questo lascia solo il prodotto da $ 15 e il prodotto da $ 5.</span><span class="sxs-lookup"><span data-stu-id="a0d75-164">(This discount is highlighted in green in the first table.) That leaves only the $15 product and the $5 product.</span></span> <span data-ttu-id="a0d75-165">Esaminando le due tabelle di nuovo, si noterà che, per questi due prodotti, lo sconto 1 offre uno sconto di $ 2,50, mentre lo sconto 2 offre uno sconto di $ 4.</span><span class="sxs-lookup"><span data-stu-id="a0d75-165">By looking at the two tables again, you can see that, for these two products, discount 1 gives a $2.50 discount, whereas discount 2 gives a $4 discount.</span></span> <span data-ttu-id="a0d75-166">Di conseguenza, selezioniamo lo sconto 2.</span><span class="sxs-lookup"><span data-stu-id="a0d75-166">Therefore, we select discount 2.</span></span> <span data-ttu-id="a0d75-167">Lo sconto totale è $ 14.</span><span class="sxs-lookup"><span data-stu-id="a0d75-167">The total discount is $14.</span></span> <span data-ttu-id="a0d75-168">Per semplificare la visualizzazione della discussione, ecco due tabelle aggiuntive in cui è visualizzata la percentuale di sconto valida per tutte le combinazioni possibili di due prodotti sia per lo sconto 1 che lo sconto 2.</span><span class="sxs-lookup"><span data-stu-id="a0d75-168">To make this discussion easier to visualize, here are two additional tables that show the effective discount percentage for all possible two-product combinations for both discount 1 and discount 2.</span></span> <span data-ttu-id="a0d75-169">Solo metà dell'elenco di combinazioni è inclusa, poiché, per questi due sconti, l'ordine in cui i due prodotti vengono inclusi nello sconto non è rilevante.</span><span class="sxs-lookup"><span data-stu-id="a0d75-169">Only half the list of combinations is included, because, for these two discounts, the order in which the two products are put into the discount doesn't matter.</span></span> <span data-ttu-id="a0d75-170">Il più alto sconto valido (25%) viene evideziato in verde e il più basso sconto valido (10%) viene evidenziato in rosso.</span><span class="sxs-lookup"><span data-stu-id="a0d75-170">The highest effective discount (25 percent) is highlighted in green, and the lowest effective discount (10 percent) is highlighted in red.</span></span>

![La percentuale di sconto valida per tutte le combinazioni dei due prodotti per entrambi gli sconti](./media/overlapping-discount-combo-04.jpg)

> [!NOTE]
> <span data-ttu-id="a0d75-172">Se i prezzi variano e due o più sconti sono in concorrenza, l'unico modo per garantire la migliore combinazione di sconti è di valutare entrambi gli sconti e di confrontarli.</span><span class="sxs-lookup"><span data-stu-id="a0d75-172">When prices vary, and two or more discount compete, the only way to guarantee the best combination of discounts is to evaluate both discounts and compare them.</span></span>

## <a name="total-possible-combinations"></a><span data-ttu-id="a0d75-173">Combinazioni possibili totali</span><span class="sxs-lookup"><span data-stu-id="a0d75-173">Total possible combinations</span></span>

<span data-ttu-id="a0d75-174">In questa sezione continua l'esempio della sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="a0d75-174">This section continues the example from the previous section.</span></span> <span data-ttu-id="a0d75-175">Aggiungeremo più prodotti e un altro sconto e vedremo quante combinazioni devono essere calcolate e confrontate.</span><span class="sxs-lookup"><span data-stu-id="a0d75-175">We will add more products and another discount, and see how many combinations must be calculated and compared.</span></span> <span data-ttu-id="a0d75-176">Nella seguente tabella è riportato il numero delle possibili combinazioni di sconto man mano che la quantità di prodotti aumenta.</span><span class="sxs-lookup"><span data-stu-id="a0d75-176">The following table shows the number of possible discount combinations as the product quantity increases.</span></span> <span data-ttu-id="a0d75-177">La tabella mostra cosa accade quando sono presenti due sconti sovrapposti, come nell'esempio precedente, e quando sono presenti tre sconti sovrapposti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-177">The table shows what happens both when there are two overlapping discounts, as in the previous example, and when there are three overlapping discounts.</span></span> <span data-ttu-id="a0d75-178">Il numero delle possibili combinazioni di sconto che devono essere valutate supera anche quanto un computer veloce può calcolare e confrontare abbastanza rapidamente da essere accettabile per le transazioni di vendita al dettaglio.</span><span class="sxs-lookup"><span data-stu-id="a0d75-178">The number of possible discount combinations that must be evaluated soon exceeds what even a fast computer can calculate and compare quickly enough to be acceptable for retail transactions.</span></span>

![Numero delle possibili combinazioni di sconti man mano che la quantità di prodotti aumenta](./media/overlapping-discount-combo-05.jpg)

<span data-ttu-id="a0d75-180">Quando quantità anche maggiori o più sconti sovrapposti vengono applicati, il numero totale delle possibili combinazioni di sconto raggiunge rapidamente l'ordine dei milioni e il tempo necessario per valutare rapidamente e selezionare la combinazione migliore possibile diventa significativo.</span><span class="sxs-lookup"><span data-stu-id="a0d75-180">When even larger quantities or more overlapping discounts are applied, the total number of possible discount combinations quickly goes into the millions, and the time that is required in order to evaluate and select the best possible combination quickly becomes noticeable.</span></span> <span data-ttu-id="a0d75-181">Alcune ottimizzazioni sono state effettuate nel motore del prezzo per ridurre il numero totale di combinazioni che devono essere valutate.</span><span class="sxs-lookup"><span data-stu-id="a0d75-181">Some optimizations have been done in the price engine to reduce the total number of combinations that must be evaluated.</span></span> <span data-ttu-id="a0d75-182">Tuttavia, poiché il numero di sconti sovrapposti e le quantità in una transazione non sono limitati, un numero elevato di combinazioni sempre dovrà essere valutato ogni volta che si sovrappongono gli sconti.</span><span class="sxs-lookup"><span data-stu-id="a0d75-182">However, because the number overlapping discounts and the quantities in a transaction aren't limited, a large number of combinations will always have to be evaluated whenever there are overlapping discounts.</span></span> <span data-ttu-id="a0d75-183">Questa situazione è il problema affrontato dal metodo della classificazione del valore marginale.</span><span class="sxs-lookup"><span data-stu-id="a0d75-183">This issue is the issue that the marginal value ranking method addresses.</span></span>

## <a name="marginal-value-method"></a><span data-ttu-id="a0d75-184">Metodo del valore marginale</span><span class="sxs-lookup"><span data-stu-id="a0d75-184">Marginal value method</span></span>

<span data-ttu-id="a0d75-185">Per risolvere il problema di un numero che cresce in modo esponenziale delle combinazioni che devono essere valutate, esiste un'ottimizzazione che calcola il valore per prodotto condiviso di ogni sconto nel set di prodotti a cui due o più sconti sono applicabili.</span><span class="sxs-lookup"><span data-stu-id="a0d75-185">To resolve the issue of an exponentially increasing number of combinations that must be evaluated, an optimization exists that calculates the value per shared product of each discount on the set of products that two or more discounts can be applied to.</span></span> <span data-ttu-id="a0d75-186">Si fa riferimento a questo valore come al **valore marginale** dello sconto per i prodotti condivisi.</span><span class="sxs-lookup"><span data-stu-id="a0d75-186">We refer to this value as the **marginal value** of the discount for the shared products.</span></span> <span data-ttu-id="a0d75-187">Il valore marginale è la media per incremento di prodotto nell'importo di sconto totale quando i prodotti condivisi vengono inclusi in ogni sconto.</span><span class="sxs-lookup"><span data-stu-id="a0d75-187">The marginal value is the average per product increase in the total discount amount when the shared products are included in each discount.</span></span> <span data-ttu-id="a0d75-188">Il valore marginale viene calcolato prendendo l'importo di sconto totale (DTotal), sottraendo l'importo dello sconto senza i prodotti condivisi (DMinus\\ Shared) e dividendo la differenza per il numero di prodotti condivisi (ProductsShared).</span><span class="sxs-lookup"><span data-stu-id="a0d75-188">The marginal value is calculated by taking the total discount amount (DTotal), subtracting the discount amount without the shared products (DMinus\\ Shared), and dividing that difference by the number of shared products (ProductsShared).</span></span>

![Formula per il calcolo del valore marginale](./media/overlapping-discount-combo-06.jpg)

<span data-ttu-id="a0d75-190">Dopo che il valore marginale di ciascuno sconto in un set di prodotti condivisi viene calcolato, gli sconti vengono applicati ai prodotti condivisi nell'ordine, esaustivamente, dal valore marginale più elevato al valore marginale più basso.</span><span class="sxs-lookup"><span data-stu-id="a0d75-190">After the marginal value of each discount on a shared set of products is calculated, the discounts are applied to the shared products in order, exhaustively, from highest marginal value to lowest marginal value.</span></span> <span data-ttu-id="a0d75-191">Per questo metodo, tutte le possibilità di sconto rimanenti non vengono confrontate ogni volta dopo che una singola istanza di uno sconto viene applicata.</span><span class="sxs-lookup"><span data-stu-id="a0d75-191">For this method, all remaining discount possibilities aren't compared every time after a single instance of a discount is applied.</span></span> <span data-ttu-id="a0d75-192">Invece, gli scontisovrapposti vengono confrontati una volta e quindi applicati nell'ordine.</span><span class="sxs-lookup"><span data-stu-id="a0d75-192">Instead, the overlapping discounts are compared one time and then applied in order.</span></span> <span data-ttu-id="a0d75-193">Nessun confronto aggiuntivo viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="a0d75-193">No additional comparisons are done.</span></span> <span data-ttu-id="a0d75-194">È possibile configurare la soglia per passare al metodo del valore marginale nella scheda **Sconto** della pagina **Parametri di commercio**.</span><span class="sxs-lookup"><span data-stu-id="a0d75-194">You can configure the threshold to switch to the marginal value method on the **Discount** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="a0d75-195">Il tempo accettabile di calcolo dello sconto totale varia nei settori di vendita al dettaglio.</span><span class="sxs-lookup"><span data-stu-id="a0d75-195">The acceptable time to calculate the total discount varies across retail industries.</span></span> <span data-ttu-id="a0d75-196">Tuttavia, questo tempo rientra in genere nell'intervallo compreso tra decine di millisecondi e un secondo.</span><span class="sxs-lookup"><span data-stu-id="a0d75-196">However, this time generally falls in the range of tens of milliseconds to one second.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]