---
title: Designer formula nella creazione di report elettronici (ER)
description: In questo argomento sono riportate le informazioni sull'utilizzo di designer formula nella creazione di report elettronici (ER).
author: NickSelin
manager: kfend
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: d96fe041fd0ffb292909c1e724068efebe0184b9
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 12/05/2020
ms.locfileid: "4682651"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="56b39-103">Designer formula nella creazione di report elettronici (ER)</span><span class="sxs-lookup"><span data-stu-id="56b39-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="56b39-104">In questo argomento viene illustrato come utilizzare designer formula nei report elettronici (ER).</span><span class="sxs-lookup"><span data-stu-id="56b39-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="56b39-105">Quando si progetta un formato di un documento elettronico specifico in ER, è possibile utilizzare le formule per la trasformazione dei dati in modo da soddisfare i requisiti per la compilazione e la formattazione del documento.</span><span class="sxs-lookup"><span data-stu-id="56b39-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="56b39-106">Le formule somigliano alle formule in Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="56b39-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="56b39-107">Nelle formule sono supportate funzioni di diverso tipo: funzioni di testo, data e ora, logica matematica, informazioni e conversione del tipo di dati, oltre ad altre funzioni specifiche del dominio aziendale.</span><span class="sxs-lookup"><span data-stu-id="56b39-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="56b39-108">Panoramica su Designer formula</span><span class="sxs-lookup"><span data-stu-id="56b39-108">Formula designer overview</span></span>

<span data-ttu-id="56b39-109">ER supporta il Designer formula.</span><span class="sxs-lookup"><span data-stu-id="56b39-109">ER supports the formula designer.</span></span> <span data-ttu-id="56b39-110">Di conseguenza, in fase di progettazione, è possibile configurare le espressioni che possono essere utilizzate per le seguenti attività in fase di esecuzione:</span><span class="sxs-lookup"><span data-stu-id="56b39-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="56b39-111">Trasformazione dei dati ricevuti da un database dell'applicazione e che devono essere inseriti in un modello dati ER progettato per fungere da origine dati per i formati ER.</span><span class="sxs-lookup"><span data-stu-id="56b39-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="56b39-112">Se ad esempio, le trasformazioni possono includere il filtro, raggruppamento e conversione del tipo di dati.</span><span class="sxs-lookup"><span data-stu-id="56b39-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="56b39-113">Formattare i dati che devono essere inviati a un documento elettronico di generazione in conformità al layout e agli stati di un formato specifico di ER.</span><span class="sxs-lookup"><span data-stu-id="56b39-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="56b39-114">Se ad esempio, la formattazione deve essere eseguita in conformità alla lingua o cultura richiesta o alla codifica.</span><span class="sxs-lookup"><span data-stu-id="56b39-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="56b39-115">Controllare il processo di creazione di documenti elettronici.</span><span class="sxs-lookup"><span data-stu-id="56b39-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="56b39-116">Se ad esempio, le eventuali espressioni possono abilitare o disabilitare l'output di elementi specifici del formato, in base all'elaborazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="56b39-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="56b39-117">Possono inoltre interrompere il processo di creazione del documento o inviare messaggi agli utenti.</span><span class="sxs-lookup"><span data-stu-id="56b39-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="56b39-118">La pagina **Designer formula** può essere aperta quando si esegue una delle seguenti azioni:</span><span class="sxs-lookup"><span data-stu-id="56b39-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="56b39-119">Associazione di articoli di origini dati a componenti del modello dati.</span><span class="sxs-lookup"><span data-stu-id="56b39-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="56b39-120">Associazione di articoli di origini dati a componenti del formato.</span><span class="sxs-lookup"><span data-stu-id="56b39-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="56b39-121">Gestione completa dei campi calcolati che sono parte delle origini dati.</span><span class="sxs-lookup"><span data-stu-id="56b39-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="56b39-122">Definizione delle condizioni di visibilità per i parametri di input utente.</span><span class="sxs-lookup"><span data-stu-id="56b39-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="56b39-123">Progettazione delle trasformazioni di un formato.</span><span class="sxs-lookup"><span data-stu-id="56b39-123">Design a format's transformations.</span></span>
- <span data-ttu-id="56b39-124">Definizione delle condizioni di abilitazione per i componenti del formato.</span><span class="sxs-lookup"><span data-stu-id="56b39-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="56b39-125">Definizione dei nomi di file per i componenti FILE del formato.</span><span class="sxs-lookup"><span data-stu-id="56b39-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="56b39-126">Definizione delle condizioni per le convalide di controllo dei processi.</span><span class="sxs-lookup"><span data-stu-id="56b39-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="56b39-127">Definizione del testo del messaggio per le convalide di controllo dei processi.</span><span class="sxs-lookup"><span data-stu-id="56b39-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="56b39-128">Associazione dati</span><span class="sxs-lookup"><span data-stu-id="56b39-128">Data binding</span></span>

<span data-ttu-id="56b39-129">Il Designer formula ER può essere utilizzato per definire un'espressione che trasforma i dati ricevuti da origini dati, in modo che i dati possono essere inseriti nel consumer di dati nei seguenti modi in fase di runtime:</span><span class="sxs-lookup"><span data-stu-id="56b39-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="56b39-130">Da origini dati dell'applicazione e dai parametri di runtime a un modello dati ER</span><span class="sxs-lookup"><span data-stu-id="56b39-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="56b39-131">Da un modello dati ER a un formato ER</span><span class="sxs-lookup"><span data-stu-id="56b39-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="56b39-132">Da origini dati dell'applicazione e dai parametri di runtime a un formato ER</span><span class="sxs-lookup"><span data-stu-id="56b39-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="56b39-133">La figura seguente mostra la progettazione di un'espressione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="56b39-134">In questo esempio, l'espressione arrotonda a due posizioni decimali il valore del campo **Intrastat.AmountMST** nella tabella Intrastat e quindi restituisce il valore arrotondato.</span><span class="sxs-lookup"><span data-stu-id="56b39-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="56b39-135">[![Espressione di associazione dati](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="56b39-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="56b39-136">La figura seguente mostra come è possibile utilizzare un'espressione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="56b39-137">In questo esempio, il risultato dell'espressione pianificata è immesso nel componente **Transaction.InvoicedAmount** del modello dati **Modello di dichiarazione imposte**.</span><span class="sxs-lookup"><span data-stu-id="56b39-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="56b39-138">[![Espressione di associazione dati utilizzata](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="56b39-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="56b39-139">In fase di esecuzione, la formula progettata, `ROUND (Intrastat.AmountMST, 2)`, arrotonda a due posizioni decimali il valore del campo **AmountMST** per ogni record della tabella Intrastat.</span><span class="sxs-lookup"><span data-stu-id="56b39-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="56b39-140">Quindi immette il valore arrotondato nel componente **Transaction.InvoicedAmount** del modello dati **Dichiarazione imposte**.</span><span class="sxs-lookup"><span data-stu-id="56b39-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="56b39-141">Formattazione di dati</span><span class="sxs-lookup"><span data-stu-id="56b39-141">Data formatting</span></span>

<span data-ttu-id="56b39-142">Il Designer formula ER può essere utilizzato per definire un'espressione che formatta i dati ricevuti da origini dati, in modo che i dati possono essere inviati come parte del documento elettronico generato.</span><span class="sxs-lookup"><span data-stu-id="56b39-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="56b39-143">Potrebbe essere presente una formattazione che deve essere applicata come regola standard da riutilizzare per un formato.</span><span class="sxs-lookup"><span data-stu-id="56b39-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="56b39-144">In questo caso, è possibile introdurla una volta nella configurazione del formato come trasformazione denominata con espressione di formattazione.</span><span class="sxs-lookup"><span data-stu-id="56b39-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="56b39-145">Successivamente questa trasformazione denominata può essere collegata a molti componenti di formato in cui l'output deve essere formattato in base all'espressione di formattazione creata.</span><span class="sxs-lookup"><span data-stu-id="56b39-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="56b39-146">La figura seguente mostra la progettazione di una trasformazione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="56b39-147">In questo esempio, la trasformazione **TrimmedString** tronca i dati in ingresso del tipo di dati *String* rimuovendo spazi iniziali e finali.</span><span class="sxs-lookup"><span data-stu-id="56b39-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="56b39-148">Restituisce quindi il valore stringa troncato.</span><span class="sxs-lookup"><span data-stu-id="56b39-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="56b39-149">[![Trasformazione](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="56b39-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="56b39-150">La figura seguente mostra come è possibile utilizzare una trasformazione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="56b39-151">In questo esempio, più componenti di formato inviano testo come output per la generazione del documento elettronico in fase di runtime.</span><span class="sxs-lookup"><span data-stu-id="56b39-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="56b39-152">Tutti questi componenti del formato fanno riferimento alla trasformazione **TrimmedString** per nome.</span><span class="sxs-lookup"><span data-stu-id="56b39-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="56b39-153">[![Trasformazione utilizzata](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="56b39-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="56b39-154">Quando i componenti del formato fanno riferimento alla trasformazione **TrimmedString** (ad esempio, il componente **partyName** della precedente figura), la trasformazione invia il testo come output alla generazione del documento elettronico.</span><span class="sxs-lookup"><span data-stu-id="56b39-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="56b39-155">Questo testo non include gli spazi iniziali e finali.</span><span class="sxs-lookup"><span data-stu-id="56b39-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="56b39-156">Se una formattazione deve essere applicata singolarmente, può essere introdotta come singola espressione di associazione di un determinato componente di formato.</span><span class="sxs-lookup"><span data-stu-id="56b39-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="56b39-157">La figura seguente mostra un'espressione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="56b39-158">In questo esempio, il componente di formato **partyType** è associato all'origine dati mediante un'espressione che converte i dati in ingresso dal campo **Model.Company.RegistrationType** nell'origine dati in testo maiuscolo.</span><span class="sxs-lookup"><span data-stu-id="56b39-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="56b39-159">L'espressione invia quindi il testo come output al documento elettronico.</span><span class="sxs-lookup"><span data-stu-id="56b39-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="56b39-160">[![Applicazione della formattazione a un singolo componente](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="56b39-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="56b39-161">Controllo del flusso del processo</span><span class="sxs-lookup"><span data-stu-id="56b39-161">Process flow control</span></span>

<span data-ttu-id="56b39-162">Designer formula ER può essere utilizzato per definire le espressioni che controllano il flusso del processo di generazione dei documenti elettronici.</span><span class="sxs-lookup"><span data-stu-id="56b39-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="56b39-163">È possibile effettuare le attività seguenti:</span><span class="sxs-lookup"><span data-stu-id="56b39-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="56b39-164">Definire le condizioni che determinano quando il processo di creazione di un documento deve essere arrestato.</span><span class="sxs-lookup"><span data-stu-id="56b39-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="56b39-165">Specificare le espressioni che creano messaggi per l'utente sui processi arrestati o che generano i messaggi del registro di esecuzione sul proseguimento del processo di creazione del report.</span><span class="sxs-lookup"><span data-stu-id="56b39-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="56b39-166">Specificare i nomi file dei documenti elettronici generati e controllare le condizioni della relativa creazione.</span><span class="sxs-lookup"><span data-stu-id="56b39-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="56b39-167">Ogni regola del controllo del flusso del processo è progettata come singola convalida.</span><span class="sxs-lookup"><span data-stu-id="56b39-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="56b39-168">La figura seguente mostra una convalida di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="56b39-169">Ecco una spiegazione della configurazione in questo esempio:</span><span class="sxs-lookup"><span data-stu-id="56b39-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="56b39-170">La convalida viene valutata quando il nodo **INSTAT** viene creato durante la generazione del file XML.</span><span class="sxs-lookup"><span data-stu-id="56b39-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="56b39-171">Se l'elenco delle transazioni è vuoto, la convalida interrompe il processo di esecuzione restituisce **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="56b39-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="56b39-172">La convalida restituisce un messaggio di errore che include il testo dell'etichetta SYS70894 nella lingua preferita dell'utente.</span><span class="sxs-lookup"><span data-stu-id="56b39-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="56b39-173">[![Convalida](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="56b39-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="56b39-174">Designer formula ER può essere utilizzato anche per generare un nome file per la generazione di un documento elettronico e per controllare il processo di creazione del file.</span><span class="sxs-lookup"><span data-stu-id="56b39-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="56b39-175">La figura seguente mostra la progettazione di un controllo del flusso di processo di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="56b39-176">Ecco una spiegazione della configurazione in questo esempio:</span><span class="sxs-lookup"><span data-stu-id="56b39-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="56b39-177">L'elenco dei record dell'origine dati **model.Intrastat** è suddiviso in batch.</span><span class="sxs-lookup"><span data-stu-id="56b39-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="56b39-178">Ogni batch contiene un massimo di 1.000 record.</span><span class="sxs-lookup"><span data-stu-id="56b39-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="56b39-179">L'output crea un file ZIP contenente un file in formato XML per ogni batch creato.</span><span class="sxs-lookup"><span data-stu-id="56b39-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="56b39-180">Un'espressione restituisce un nome file per la generazione dei documenti elettronici concatenando il nome file e l'estensione del nome file.</span><span class="sxs-lookup"><span data-stu-id="56b39-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="56b39-181">Per il secondo batch e tutti i batch successivi, il nome file contiene l'ID batch come suffisso.</span><span class="sxs-lookup"><span data-stu-id="56b39-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="56b39-182">Un'espressione abilita (restituendo **TRUE**) il processo di creazione file solo per i batch che contengono almeno un record.</span><span class="sxs-lookup"><span data-stu-id="56b39-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="56b39-183">[![Controllo del flusso del processo](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="56b39-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="56b39-184">Controllo del contenuto dei documenti</span><span class="sxs-lookup"><span data-stu-id="56b39-184">Document content control</span></span>

<span data-ttu-id="56b39-185">Il designer formula ER può essere utilizzato per configurare espressioni che determinano i dati che verranno inseriti nei documenti elettronici generati in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="56b39-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="56b39-186">Le espressioni possono abilitare o disabilitare l'output di elementi specifici del formato, in base ai dati di elaborazione e alla logica configurata.</span><span class="sxs-lookup"><span data-stu-id="56b39-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="56b39-187">Queste espressioni possono essere immesse per un singolo elemento di formato nel campo **Abilitato** della scheda **Mapping** della pagina **Designer operazioni**.</span><span class="sxs-lookup"><span data-stu-id="56b39-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="56b39-188">È possibile inserire le espressioni come condizione logica che restituisce un valore *Booleano*:</span><span class="sxs-lookup"><span data-stu-id="56b39-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="56b39-189">Se la condizione restituisce **True**, viene eseguito l'elemento di formato corrente.</span><span class="sxs-lookup"><span data-stu-id="56b39-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="56b39-190">Se la condizione restituisce **False**, viene ignorato l'elemento di formato corrente.</span><span class="sxs-lookup"><span data-stu-id="56b39-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="56b39-191">La figura seguente mostra espressioni di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="56b39-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="56b39-192">(La versione 11.12.11 della configurazione formato **Bonifico ISO20022 (NO)** fornita da Microsoft è usata come esempio.) Il componente formato **XMLHeader** è configurato per descrivere la struttura del messaggio di bonifico, in base agli standard di messaggio XML ISO 20022.</span><span class="sxs-lookup"><span data-stu-id="56b39-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="56b39-193">Il componente formato **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** è configurato per aggiungere l'elemento XML **Ustrd** al messaggio generato e inserire le informazioni sulla rimessa in un formato non strutturato come testo dei seguenti elementi XML:</span><span class="sxs-lookup"><span data-stu-id="56b39-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="56b39-194">Il componente **PaymentNotes** viene utilizzato per generare il testo delle note di pagamento.</span><span class="sxs-lookup"><span data-stu-id="56b39-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="56b39-195">Il componente **DelimitedSequence** genera numeri di fattura separati con virgole utilizzati per liquidare il bonifico corrente.</span><span class="sxs-lookup"><span data-stu-id="56b39-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="56b39-196">[![Componenti PaymentNotes e DelimitedSequence](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="56b39-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="56b39-197">I componenti **DelimitedSequence** e **PaymentNotes** sono etichettati utilizzando un punto interrogativo.</span><span class="sxs-lookup"><span data-stu-id="56b39-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="56b39-198">Un punto interrogativo indica che l'uso di un componente è condizionale.</span><span class="sxs-lookup"><span data-stu-id="56b39-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="56b39-199">In questo caso, l'uso dei componenti si basa sui seguenti criteri:</span><span class="sxs-lookup"><span data-stu-id="56b39-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="56b39-200">L'espressione `@.PaymentsNotes <> ""` definita per il componente **PaymentNotes** consente (restituendo **TRUE**) che l'elemento XML **Ustrd** venga riempito con il testo delle note di pagamento, se questo testo per il bonifico corrente non è vuoto.</span><span class="sxs-lookup"><span data-stu-id="56b39-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="56b39-201">[![Espressione per il componente PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="56b39-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="56b39-202">L'espressione `@.PaymentsNotes = ""` definita per il componente **DelimitedSequence** consente (restituendo **TRUE**) che l'elemento XML **Ustrd** venga riempito con un elenco separato con virgole dei numeri di fattura utilizzati per liquidare il bonifico corrente, se il testo delle note di pagamento per tale bonifico è vuoto.</span><span class="sxs-lookup"><span data-stu-id="56b39-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="56b39-203">[![Espressione per il componente DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="56b39-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="56b39-204">In base a questa impostazione, il messaggio che viene generato per ogni pagamento debitore, l'elemento XML **Ustrd**, conterrà il testo delle note di pagamento o, quando questo testo è vuoto, l'elenco separato con virgole dei numeri di fattura utilizzati per liquidare il pagamento.</span><span class="sxs-lookup"><span data-stu-id="56b39-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="56b39-205">Convalida delle formule configurate</span><span class="sxs-lookup"><span data-stu-id="56b39-205">Validation of configured formulas</span></span>

<span data-ttu-id="56b39-206">Nella pagina **Designer formula**, selezionare **Test** per convalidare il funzionamento della formula configurata.</span><span class="sxs-lookup"><span data-stu-id="56b39-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="56b39-207">[![Selezione di Test per convalidare una formula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="56b39-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="56b39-208">Quando sono richiesti i valori degli argomenti della formula, è possibile aprire la finestra di dialogo **Espressione test** dalla pagina **Designer formula**.</span><span class="sxs-lookup"><span data-stu-id="56b39-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="56b39-209">Nella maggior parte dei casi, questi argomenti devono essere definiti manualmente poiché le associazioni configurate non vengono eseguite in fase di progettazione.</span><span class="sxs-lookup"><span data-stu-id="56b39-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="56b39-210">La scheda **Risultato test** nella pagina **Designer formula** mostra il risultato dell'esecuzione della formula configurata.</span><span class="sxs-lookup"><span data-stu-id="56b39-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="56b39-211">L'esempio seguente mostra come testare la formula configurata per il dominio del commercio estero per assicurarsi che il codice voce doganale Intrastat contenga solo cifre.</span><span class="sxs-lookup"><span data-stu-id="56b39-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="56b39-212">Quando si testa questa formula, è possibile utilizzare la finestra di dialogo **Espressione test** per specificare il valore del codice voce doganale Intrastat per il test.</span><span class="sxs-lookup"><span data-stu-id="56b39-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="56b39-213">[![Specifica del codice voce doganale Intrastat per il test](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="56b39-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="56b39-214">Dopo aver specificato il codice voce doganale Intrastat e selezionato **OK**, la scheda **Risultato test** nella pagina **Designer formula** mostra il risultato dell'esecuzione della formula configurata.</span><span class="sxs-lookup"><span data-stu-id="56b39-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="56b39-215">È quindi possibile valutare se il risultato è accettabile.</span><span class="sxs-lookup"><span data-stu-id="56b39-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="56b39-216">Se il risultato non è accettabile, è possibile aggiornare la formula e testarla di nuovo.</span><span class="sxs-lookup"><span data-stu-id="56b39-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="56b39-217">[![Risultato test](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="56b39-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="56b39-218">Alcune formule non possono essere testate in fase di progettazione.</span><span class="sxs-lookup"><span data-stu-id="56b39-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="56b39-219">Ad esempio, una formula potrebbe restituire un risultato di un tipo di dati che non può essere mostrato nella scheda **Risultato test**. In questo caso, viene visualizzato un messaggio di errore che indica che la formula non può essere testata.</span><span class="sxs-lookup"><span data-stu-id="56b39-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="56b39-220">[![Messaggio di errore](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="56b39-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="56b39-221">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="56b39-221">Additional resources</span></span>

- [<span data-ttu-id="56b39-222">Panoramica sui report elettronici</span><span class="sxs-lookup"><span data-stu-id="56b39-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="56b39-223">Linguaggio della formula nella creazione di report elettronici</span><span class="sxs-lookup"><span data-stu-id="56b39-223">Electronic reporting formula language</span></span>](er-formula-language.md)
