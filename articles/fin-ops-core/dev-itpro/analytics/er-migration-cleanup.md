---
title: Pulizia della migrazione ER
description: Questo argomento spiega come è possibile utilizzare la funzione di pulizia della migrazione ER per risolvere i problemi con i modelli ER.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: 090badd48785dfacf5942426d0fe53629f3c0cda
ms.sourcegitcommit: 5de75c61c33e57c813944f1ab6100aceb020d432
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/29/2020
ms.locfileid: "3321804"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="c828d-103">Pulizia della migrazione ER</span><span class="sxs-lookup"><span data-stu-id="c828d-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="c828d-104">Quando si gestiscono le istanze di Finance, è possibile decidere di migrare l'istanza corrente in un'altra posizione.</span><span class="sxs-lookup"><span data-stu-id="c828d-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="c828d-105">Ad esempio, si potrebbe migrare l'istanza di produzione a un nuovo ambiente sandbox.</span><span class="sxs-lookup"><span data-stu-id="c828d-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="c828d-106">Se il framework di creazione di report elettronici (ER) è stato configurato per archiviare modelli in Archiviazione BLOB di Microsoft Azure, la tabella **DocuValue** nel nuovo ambiente sandbox fa riferimento all'istanza di archiviazione BLOB nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c828d-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="c828d-107">Tuttavia, non è possibile accedere a questa istanza dall'ambiente sandbox, in quanto il processo di migrazione non supporta la migrazione di elementi nell'archiviazione BLOB.</span><span class="sxs-lookup"><span data-stu-id="c828d-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="c828d-108">È invece necessario che nel nuovo ambiente sandbox si faccia riferimento all'istanza di archiviazione BLOB nell'ambiente sandbox che non ottiene ancora i modelli ER.</span><span class="sxs-lookup"><span data-stu-id="c828d-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="c828d-109">Se si tenta di eseguire un formato ER che utilizza un modello per generare documenti aziendali, si verifica un'eccezione e si riceve una notifica relativa al modello mancante.</span><span class="sxs-lookup"><span data-stu-id="c828d-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="c828d-110">Vengono inoltre fornite informazioni sull'utilizzo dell'opzione di pulizia della migrazione ER per eliminare e quindi reimportare la configurazione di formato ER che contiene il modello.</span><span class="sxs-lookup"><span data-stu-id="c828d-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="c828d-111">[![Esecuzione di un formato ER](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="c828d-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="c828d-112">Verrà restituito un errore simile se si accede alla pagina **Configurazioni** (**Amministrazione organizzazione** \> **Creazione di report elettronici** \> **Configurazioni**). Nella struttura delle configurazioni provare dunque a eliminare una configurazione di formato ER che utilizza un modello.</span><span class="sxs-lookup"><span data-stu-id="c828d-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="c828d-113">[![Eliminazione di un formato ER](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="c828d-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="c828d-114">Completare i seguenti passaggi per risolvere i problemi con i modelli ER a cui non è possibile accedere.</span><span class="sxs-lookup"><span data-stu-id="c828d-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="c828d-115">Andare alla pagina **Amministrazione organizzazione** \> **Periodico** \> **Pulizia migrazione**.</span><span class="sxs-lookup"><span data-stu-id="c828d-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="c828d-116">Selezionare una configurazione di formato ER che non può essere eseguita o eliminata.</span><span class="sxs-lookup"><span data-stu-id="c828d-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="c828d-117">Selezionare **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="c828d-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="c828d-118">Confermare l'eliminazione della configurazione di formato ER selezionata.</span><span class="sxs-lookup"><span data-stu-id="c828d-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="c828d-119">[Importare](download-electronic-reporting-configuration-lcs.md) la configurazione di formato ER eliminata nell'istanza Finance corrente.</span><span class="sxs-lookup"><span data-stu-id="c828d-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="c828d-120">Applicabilità</span><span class="sxs-lookup"><span data-stu-id="c828d-120">Applicability</span></span>

> <span data-ttu-id="c828d-121">[Importante] L'opzione di **pulizia della migrazione** è destinata solo alle configurazioni di formato ER che contengono modelli ER non accessibili.</span><span class="sxs-lookup"><span data-stu-id="c828d-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="c828d-122">Quando si elimina una configurazione di formato ER utilizzando l'opzione di **pulizia della migrazione**, ER elimina i modelli correlati agli elementi di configurazione nell'unico database dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c828d-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="c828d-123">L'esistenza dei file fisici appropriati nell'archiviazione BLOB non viene convalidata.</span><span class="sxs-lookup"><span data-stu-id="c828d-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="c828d-124">Si presuppone invece che non siano presenti tali file.</span><span class="sxs-lookup"><span data-stu-id="c828d-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="c828d-125">Non utilizzare pertanto l'opzione di **pulizia della migrazione** in alternativa all'opzione di eliminazione della configurazione ER nella pagina **Configurazioni**.</span><span class="sxs-lookup"><span data-stu-id="c828d-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="c828d-126">Utilizzare l'opzione di **pulizia della migrazione** solo se l'uso dell'opzione di eliminazione della configurazione ER nella pagina **Configurazioni** ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="c828d-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="c828d-127">Se si utilizza l'opzione di **pulizia della migrazione** per eliminare una configurazione di formato ER quando il modello a cui viene fatto riferimento è disponibile nell'archiviazione BLOB, vengono eliminati solo gli elementi di configurazione correlati nel database dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c828d-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="c828d-128">Il file fisico del modello nell'archivio BLOB viene mantenuto.</span><span class="sxs-lookup"><span data-stu-id="c828d-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="c828d-129">La sovrascrittura dei file nell'archiviazione BLOB non è più consentita.</span><span class="sxs-lookup"><span data-stu-id="c828d-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="c828d-130">Per ulteriori informazioni, vedere [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="c828d-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="c828d-131">Non sarà inoltre più possibile reimportare le configurazioni eliminate utilizzando la pulizia della migrazione in questo ambiente.</span><span class="sxs-lookup"><span data-stu-id="c828d-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="c828d-132">Per risolvere questo problema, è necessario trovare il file corrispondente nell'archiviazione BLOB ed eliminarlo manualmente.</span><span class="sxs-lookup"><span data-stu-id="c828d-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="c828d-133">[![Importazione di un formato ER](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="c828d-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="c828d-134">Un problema simile può verificarsi se si esegue la migrazione dell'istanza dell'applicazione in un'altra posizione utilizzata più volte come destinazione della migrazione e per la quale l'archiviazione BLOB contiene già file modello ER.</span><span class="sxs-lookup"><span data-stu-id="c828d-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="c828d-135">Poiché è possibile disporre di più configurazioni di formato ER, questo processo può richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="c828d-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="c828d-136">È pertanto preferibile utilizzare la funzionalità [Archiviazione di backup di modelli ER](er-backup-storage-templates.md) per ripristinare automaticamente i modelli con riferimenti interrotti.</span><span class="sxs-lookup"><span data-stu-id="c828d-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>
