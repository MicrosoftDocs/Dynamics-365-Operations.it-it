---
title: Archiviazione di backup di modelli ER
description: In questo argomento viene descritto come utilizzare l'archiviazione di backup ER per il recupero di modelli.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 2e399290153c2c63ac1c02f0f9cdb956ff5031e5
ms.sourcegitcommit: 5de75c61c33e57c813944f1ab6100aceb020d432
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/29/2020
ms.locfileid: "3321668"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="42d97-103">Archiviazione di backup di modelli ER</span><span class="sxs-lookup"><span data-stu-id="42d97-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="42d97-104">La [Panoramica dello strumento di creazione di report elettronici](general-electronic-reporting.md) consente agli utenti aziendali di configurare formati per documenti in uscita in base ai requisiti legali dei vari paesi.</span><span class="sxs-lookup"><span data-stu-id="42d97-104">The [Electronic reporting (ER) overview](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="42d97-105">I formati ER configurati possono utilizzare modelli predefiniti per generare documenti in uscita in vari formati, ad esempio cartelle di lavoro Microsoft Excel, documenti Microsoft Word o documenti PDF.</span><span class="sxs-lookup"><span data-stu-id="42d97-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="42d97-106">I modelli vengono riempiti con i dati necessari al flusso di dati configurato per documenti generati.</span><span class="sxs-lookup"><span data-stu-id="42d97-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="42d97-107">Ogni formato configurato può essere pubblicato come parte di una soluzione ER.</span><span class="sxs-lookup"><span data-stu-id="42d97-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="42d97-108">Ogni soluzione ER può essere esportata da un'istanza di Finance and Operations e importata in un'altra istanza.</span><span class="sxs-lookup"><span data-stu-id="42d97-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="42d97-109">Il framework ER utilizza la [configurazione della gestione dei documenti](../../fin-ops/organization-administration/configure-document-management.md) per gestire i modelli necessari per l'istanza corrente di Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="42d97-109">The ER framework uses the [Configure document management](../../fin-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="42d97-110">A seconda delle impostazioni del framework ER, l'archiviazione Blob di Microsoft Azure o una cartella di Microsoft SharePoint può essere selezionata come percorso fisico di archiviazione principale per i modelli.</span><span class="sxs-lookup"><span data-stu-id="42d97-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="42d97-111">Per ulteriori informazioni, vedere [Configurare il framework di report elettronici](electronic-reporting-er-configure-parameters.md). La tabella DocuValue contiene un singolo record per ogni modello.</span><span class="sxs-lookup"><span data-stu-id="42d97-111">(For more information, see [Configure the Electronic reporting (ER) framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="42d97-112">In ogni record, il campo **AccessInformation** memorizza il percorso di un file di modello che si trova nel percorso di archiviazione configurato.</span><span class="sxs-lookup"><span data-stu-id="42d97-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="42d97-113">Quando si gestiscono le istanze di Finance and Operations, è possibile che si decida di migrare l'istanza corrente a un'altra posizione.</span><span class="sxs-lookup"><span data-stu-id="42d97-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="42d97-114">Ad esempio, si potrebbe migrare l'istanza di produzione a un nuovo ambiente sandbox.</span><span class="sxs-lookup"><span data-stu-id="42d97-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="42d97-115">Se il framework ER è stato configurato per archiviare modelli nell'archiviazione Blob, la tabella DocuValue nel nuovo ambiente sandbox fa riferimento all'istanza dell'archiviazione Blob nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="42d97-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="42d97-116">Tuttavia, non è possibile accedere a questa istanza dall'ambiente sandbox, in quanto il processo di migrazione non supporta la migrazione di elementi nell'archiviazione Blob.</span><span class="sxs-lookup"><span data-stu-id="42d97-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="42d97-117">Di conseguenza, se si tenta di eseguire un formato ER che utilizza un modello per generare documenti aziendali, si verifica un'eccezione e si riceve una notifica relativa al modello mancante.</span><span class="sxs-lookup"><span data-stu-id="42d97-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="42d97-118">Vengono inoltre fornite informazioni sull'utilizzo dello strumento di pulitura ER per eliminare e quindi reimportare la configurazione di formato ER che contiene il modello.</span><span class="sxs-lookup"><span data-stu-id="42d97-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="42d97-119">Poiché è possibile che vi siano varie configurazioni di formato ER, questo processo può richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="42d97-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="42d97-120">La funzionalità di archiviazione di backup di modelli ER consente di rendere i modelli sempre disponibili per generare documenti aziendali.</span><span class="sxs-lookup"><span data-stu-id="42d97-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="42d97-121">Questa funzionalità può essere utilizzata solo quando l'archiviazione Blob è stata selezionata come percorso di archiviazione fisico per i modelli ER.</span><span class="sxs-lookup"><span data-stu-id="42d97-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

## <a name="automated-recovery-and-notification"></a><span data-ttu-id="42d97-122">Ripristino e notifica automatizzati</span><span class="sxs-lookup"><span data-stu-id="42d97-122">Automated recovery and notification</span></span>

<span data-ttu-id="42d97-123">Per questa funzionalità, ogni modello di una nuova configurazione di formato ER nell'ambiente corrente viene salvato automaticamente nel percorso di archiviazione di backup per i modelli (tabella di database ERDocuDatabaseStorage) quando si verificano i seguenti eventi:</span><span class="sxs-lookup"><span data-stu-id="42d97-123">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="42d97-124">Si importa una nuova configurazione di formato ER che contiene un modello.</span><span class="sxs-lookup"><span data-stu-id="42d97-124">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="42d97-125">Si completa la versione bozza di una configurazione di formato ER che contiene un modello.</span><span class="sxs-lookup"><span data-stu-id="42d97-125">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="42d97-126">Le copie di backup dei modelli vengono migrate a una nuova istanza di Finance and Operations come parte del database dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="42d97-126">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="42d97-127">Se un modello di un formato di ER è necessario per la generazione di documenti in uscita, ad esempio per elaborare i pagamenti fornitori inclusa la generazione di report di avvisi di pagamento e di controllo, ma il modello richiesto non è presente nel percorso di archiviazione principale, si verifica l'evento seguente:</span><span class="sxs-lookup"><span data-stu-id="42d97-127">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="42d97-128">Se il modello è disponibile nel percorso di archiviazione di backup, viene automaticamente estratto da tale percorso, ripristinato nel percorso di archiviazione principale e utilizzato per l'esecuzione corrente.</span><span class="sxs-lookup"><span data-stu-id="42d97-128">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="42d97-129">A ogni utente assegnato al ruolo **Sviluppatore per la creazione di report elettronici** o **Amministratore di sistema** viene inviata una notifica relativa al modello mancante mediante il Centro azioni.</span><span class="sxs-lookup"><span data-stu-id="42d97-129">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="42d97-130">Il messaggio visualizzato dipende dal valore del parametro **Esegui automaticamente procedura di ripristino di modelli danneggiati in batch**:</span><span class="sxs-lookup"><span data-stu-id="42d97-130">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="42d97-131">Se questo parametro è impostato su **Disattivato**, il messaggio consiglia di avviare il processo batch per correggere automaticamente problemi simili per altri modelli di configurazione di formato ER.</span><span class="sxs-lookup"><span data-stu-id="42d97-131">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="42d97-132">Il messaggio include un collegamento che può essere utilizzato per avviare il processo batch.</span><span class="sxs-lookup"><span data-stu-id="42d97-132">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="42d97-133">Se questo parametro è impostato su **Attivato**, il messaggio informa che è stato rilevato un problema di modello mancante e che un nuovo processo batch, **Ripristina modelli danneggiati da backup del database interno**, è stato programmato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="42d97-133">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="42d97-134">Questo processo batch correggerà automaticamente problemi simili per altri modelli.</span><span class="sxs-lookup"><span data-stu-id="42d97-134">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="42d97-135">Per configurare il parametro **Esegui automaticamente procedura di ripristino di modelli danneggiati in batch**, completare i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="42d97-135">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="42d97-136">In Finance and Operations aprire la pagina **Amministrazione organizzazione \> Creazione di report elettronici \> Configurazioni**.</span><span class="sxs-lookup"><span data-stu-id="42d97-136">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="42d97-137">Nella pagina **Configurazioni**, nel Riquadro azioni, nella scheda **Configurazioni**, nel gruppo **Impostazioni avanzate**, selezionare **Parametri utente**.</span><span class="sxs-lookup"><span data-stu-id="42d97-137">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="42d97-138">Nella finestra di dialogo **Parametri utente**, impostare il valore necessario per il parametro **Esegui automaticamente procedura di ripristino di modelli danneggiati in batch**.</span><span class="sxs-lookup"><span data-stu-id="42d97-138">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="42d97-139">Questo parametro è definito come specifico dell'utente dell'applicazione e della società connessa.</span><span class="sxs-lookup"><span data-stu-id="42d97-139">This parameter is defined as application user and logged company specific.</span></span>

![Pagina delle configurazioni ER](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="42d97-141">Nella figura seguente è illustrato un esempio del messaggio visualizzato quando il parametro **Esegui automaticamente procedura di ripristino di modelli danneggiati in batch** è impostato su **Attivato**.</span><span class="sxs-lookup"><span data-stu-id="42d97-141">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Pagina Giornale di registrazione pagamenti fornitore](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="42d97-143">Nella figura seguente è illustrato il processo batch **Ripristina modelli danneggiati da backup del database interno** nella pagina **Processo batch**.</span><span class="sxs-lookup"><span data-stu-id="42d97-143">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Pagina Processo batch](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="42d97-145">Il registro di esecuzione del processo batch **Ripristina modelli danneggiati da backup del database interno** completato include informazioni sui modelli che sono stati ripristinati dal percorso di archiviazione di backup al percorso di archiviazione principale.</span><span class="sxs-lookup"><span data-stu-id="42d97-145">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Pagina Storico processi batch](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="42d97-147">Per impostazione predefinita, il processo di creazione automatica di copie di backup dei modelli che si trovano nelle configurazioni di formato ER è attivato.</span><span class="sxs-lookup"><span data-stu-id="42d97-147">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="42d97-148">Per interrompere la creazione di copie di backup dei modelli, impostare l'opzione **Interrompi creazione di copie di backup del modello** su **Sì** nella scheda **Allegati** della pagina **Parametri per la creazione di report elettronici**.</span><span class="sxs-lookup"><span data-stu-id="42d97-148">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="42d97-149">È possibile aprire questa pagina dall'area di lavoro **Creazione di report elettronici**.</span><span class="sxs-lookup"><span data-stu-id="42d97-149">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="42d97-150">Se si imposta **Interrompi creazione di copie di backup del modello** su **Sì** e non si desidera mantenere le copie di backup dei modelli create in precedenza, selezionare **Pulisci archiviazione di backup** nella pagina **Parametri per la creazione di report elettronici**.</span><span class="sxs-lookup"><span data-stu-id="42d97-150">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="42d97-151">Se l'ambiente è stato aggiornato a Finance and Operations versione 10.0.5 (ottobre 2019) e si desidera eseguire la migrazione a un nuovo ambiente che include configurazioni di formato ER eseguibili, selezionare **Completa archiviazione di backup** nella pagina **Parametri per la creazione di report elettronici** prima di eseguire la migrazione.</span><span class="sxs-lookup"><span data-stu-id="42d97-151">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="42d97-152">Questo pulsante avvia il processo di creazione di copie di backup di tutti i modelli disponibili, di modo che possano essere archiviati nel percorso di archiviazione di backup ER per modelli.</span><span class="sxs-lookup"><span data-stu-id="42d97-152">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Pagina Parametri per la creazione di report elettronici](./media/GER-BackupTemplates-5.png)

## <a name="manual-recovery"></a><span data-ttu-id="42d97-154">Ripristino manuale</span><span class="sxs-lookup"><span data-stu-id="42d97-154">Manual recovery</span></span>

<span data-ttu-id="42d97-155">Andare a **Amministrazione organizzazione** \> **Creazione di report elettronici** \> **Ripristina modelli danneggiati** per avviare manualmente il processo di ripristino dei modelli ER dal percorso di archiviazione di backup al percorso di archiviazione principale.</span><span class="sxs-lookup"><span data-stu-id="42d97-155">Go to **Organization administration** \> **Electronic reporting** \> **Restore broken templates** to manually initiate the process of restoring ER templates from the backup storage location to the primary storage location.</span></span> <span data-ttu-id="42d97-156">Prima di iniziare questo processo, nella pagina **Ripristina modelli danneggiati** è possibile specificare se l'operazione verrà eseguita in modo interattivo o se il processo batch verrà pianificato a tal fine.</span><span class="sxs-lookup"><span data-stu-id="42d97-156">Before you start this process, on the **Restore broken templates** page you can specify whether it will be performed interactively, or the batch process will be scheduled for this.</span></span>

## <a name="supported-deployments"></a><span data-ttu-id="42d97-157">Distribuzioni supportate</span><span class="sxs-lookup"><span data-stu-id="42d97-157">Supported deployments</span></span>

<span data-ttu-id="42d97-158">In Finance and Operations versione 10.0.5 la funzionalità di archiviazione di backup di modelli ER è disponibile solo nelle distribuzioni cloud.</span><span class="sxs-lookup"><span data-stu-id="42d97-158">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="42d97-159">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="42d97-159">Additional resources</span></span>

[<span data-ttu-id="42d97-160">Panoramica dello strumento di creazione di report elettronici</span><span class="sxs-lookup"><span data-stu-id="42d97-160">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="42d97-161">Configurare il framework di report elettronici</span><span class="sxs-lookup"><span data-stu-id="42d97-161">Configure the Electronic reporting (ER) framework</span></span>](electronic-reporting-er-configure-parameters.md)
