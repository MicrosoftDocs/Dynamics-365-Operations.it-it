---
title: Concetto di società in Dataverse
description: In questo argomento viene descritta l'integrazione dei dati aziendali tra Finance and Operations e Dataverse.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 2f0e3950f2b35dd8b8dbf50601b7d6b6d624863e
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 12/05/2020
ms.locfileid: "4683677"
---
# <a name="company-concept-in-dataverse"></a><span data-ttu-id="a4efc-103">Concetto di società in Dataverse</span><span class="sxs-lookup"><span data-stu-id="a4efc-103">Company concept in Dataverse</span></span>

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]


<span data-ttu-id="a4efc-104">In Finance and Operations, il concetto di *società* è un costrutto sia legale che commerciale.</span><span class="sxs-lookup"><span data-stu-id="a4efc-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="a4efc-105">È inoltre un limite di visibilità e di sicurezza per i dati.</span><span class="sxs-lookup"><span data-stu-id="a4efc-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="a4efc-106">Gli utenti lavorano sempre nel contesto di una singola società e la maggior parte dei dati è oggetto dello striping della società.</span><span class="sxs-lookup"><span data-stu-id="a4efc-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="a4efc-107">Dataverse non dispone di un concetto equivalente.</span><span class="sxs-lookup"><span data-stu-id="a4efc-107">Dataverse doesn't have an equivalent concept.</span></span> <span data-ttu-id="a4efc-108">Il concetto più vicino è *Business Unit*, ovvero principalmente un limite di visibilità e sicurezza per i dati utente.</span><span class="sxs-lookup"><span data-stu-id="a4efc-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="a4efc-109">Questo concetto non ha le stesse implicazioni legali o commerciali del concetto di società.</span><span class="sxs-lookup"><span data-stu-id="a4efc-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="a4efc-110">Poiché Business Unit e società non sono equivalenti concetti, non è possibile applicare un mapping di uno-a-uno (1:1) tra loro a scopo dell'integrazione con Dataverse.</span><span class="sxs-lookup"><span data-stu-id="a4efc-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Dataverse integration.</span></span> <span data-ttu-id="a4efc-111">Tuttavia, poiché gli utenti devono, per impostazione predefinita, poter visualizzare le stesse righe nell'applicazione e in Dataverse, Microsoft ha introdotto una nuova entità in Dataverse denominata cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="a4efc-111">However, because users must, by default, be able to see the same rows in the application and Dataverse, Microsoft has introduced a new entity in Dataverse that is named cdm\_Company.</span></span> <span data-ttu-id="a4efc-112">Questa entità equivale all'entità Società nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a4efc-112">This entity is equivalent to the Company entity in the application.</span></span> <span data-ttu-id="a4efc-113">Per contribuire a garantire che la visibilità delle righe sia equivalente tra l'applicazione e Dataverse predefinita, è consigliabile la seguente impostazione per i dati in Dataverse:</span><span class="sxs-lookup"><span data-stu-id="a4efc-113">To help guarantee that visibility of rows is equivalent between the application and Dataverse out of the box, we recommend the following setup for data in Dataverse:</span></span>

+ <span data-ttu-id="a4efc-114">Per ogni riga di Finance and Operations abilitata per la doppia scrittura, viene creata una una riga cdm\_Company associata.</span><span class="sxs-lookup"><span data-stu-id="a4efc-114">For each Finance and Operations Company row that is enabled for dual-write, an associated cdm\_Company row is created.</span></span>
+ <span data-ttu-id="a4efc-115">Quando una riga cdm\_Company viene creata e abilitata per la doppia scrittura, una Business Unit predefinita viene creata con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="a4efc-115">When a cdm\_Company row is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="a4efc-116">Sebbene un team predefinito venga creato automaticamente per tale Business Unit, la Business Unit non viene utilizzata.</span><span class="sxs-lookup"><span data-stu-id="a4efc-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="a4efc-117">Un team proprietario distinto viene creato con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="a4efc-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="a4efc-118">Sarà inoltre associato al Business Unit.</span><span class="sxs-lookup"><span data-stu-id="a4efc-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="a4efc-119">Per impostazione predefinita, il proprietario di una riga creata e oggetto di doppia scrittura in Dataverse è impostato sul team "DW Owner" collegato alla Business Unit associata.</span><span class="sxs-lookup"><span data-stu-id="a4efc-119">By default, the owner of any row that is created and dual-written to Dataverse is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="a4efc-120">Di seguito viene illustrato un esempio di questa impostazione dei dati in Dataverse.</span><span class="sxs-lookup"><span data-stu-id="a4efc-120">The following illustration shows an example of this data setup in Dataverse.</span></span>

![Impostazione dei dati in Dataverse](media/dual-write-company-1.png)

<span data-ttu-id="a4efc-122">Grazie a questa configurazione, qualsiasi riga correlata alla società USMF sarà di proprietà di un team collegato alla Business Unit USMF in Dataverse.</span><span class="sxs-lookup"><span data-stu-id="a4efc-122">Because of this configuration, any row that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Dataverse.</span></span> <span data-ttu-id="a4efc-123">Pertanto, qualsiasi utente con diritti di accesso a tale Business Unit tramite un ruolo di sicurezza impostato su visibilità a livello Business Unit potrà visualizzare tali righe.</span><span class="sxs-lookup"><span data-stu-id="a4efc-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those rows.</span></span> <span data-ttu-id="a4efc-124">Nel seguente esempio viene illustrato come i team possono essere utilizzati per fornire l'accesso corretto a tali righe.</span><span class="sxs-lookup"><span data-stu-id="a4efc-124">The following example shows how teams can be used to provide the correct access to those rows.</span></span>

+ <span data-ttu-id="a4efc-125">Il ruolo "Sales Manager" viene assegnato ai membri del team "USMF Sales".</span><span class="sxs-lookup"><span data-stu-id="a4efc-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="a4efc-126">Gli utenti con il ruolo "Sales Manager" possono accedere a tutte le righe relative ai conti appartenenti alla stessa Business Unit di cui sono membri.</span><span class="sxs-lookup"><span data-stu-id="a4efc-126">Users who have the "Sales Manager" role can access any account rows that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="a4efc-127">Il team "USMF Sales" è collegato alla Business Unit USMF menzionata in precedenza.</span><span class="sxs-lookup"><span data-stu-id="a4efc-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="a4efc-128">Di conseguenza, i membri del team "USMF Sales" possono visualizzare qualsiasi conto che appartiene all'utente "USMF DW", proveniente dall'entità Società USMF in Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="a4efc-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company entity in Finance and Operations.</span></span>

![Come utilizzare i team](media/dual-write-company-2.png)

<span data-ttu-id="a4efc-130">Come mostra la figura precedente, questo mapping 1:1 tra Business Unit, società e team è solo un punto di partenza.</span><span class="sxs-lookup"><span data-stu-id="a4efc-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="a4efc-131">In questo esempio, il nuovo Business Unit "Europe" è stata creata manualmente in Dataverse come padre sia per DEMF che ESMF.</span><span class="sxs-lookup"><span data-stu-id="a4efc-131">In this example, a new "Europe" business unit is manually created in Dataverse as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="a4efc-132">La nuova Business Unit principale non è correlata alla doppia scrittura.</span><span class="sxs-lookup"><span data-stu-id="a4efc-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="a4efc-133">Tuttavia, è possibile utilizzarla per dare ai membri del team "EUR Sales" accesso ai dati dei conti sia in DEMF che in ESMF impostando la visibilità dei dati su **BU padre/figlio** nel ruolo di sicurezza associato.</span><span class="sxs-lookup"><span data-stu-id="a4efc-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="a4efc-134">Argomento finale da discutere è come la doppia scrittura determina a quale team proprietario assegnare alle righe.</span><span class="sxs-lookup"><span data-stu-id="a4efc-134">A final topic to discuss is how dual-write determines which owner team it should assign rows to.</span></span> <span data-ttu-id="a4efc-135">Questo funzionamento dipende dal campo **Team proprietario predefinito** nella riga cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="a4efc-135">This behavior is controlled by the **Default owning team** field on the cdm\_Company row.</span></span> <span data-ttu-id="a4efc-136">Quando una riga cdm\_Company è abilitata per la doppia scrittura, un plugin crea automaticamente la Business Unit e il team proprietario (se non esiste già) associati e imposta il campo **Team proprietario predefinito**.</span><span class="sxs-lookup"><span data-stu-id="a4efc-136">When a cdm\_Company row is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** field.</span></span> <span data-ttu-id="a4efc-137">Il amministratore può modificare questo campo su un valore diverso.</span><span class="sxs-lookup"><span data-stu-id="a4efc-137">The admin can change this field to a different value.</span></span> <span data-ttu-id="a4efc-138">Tuttavia, l'amministratore non può cancellare il campo finché l'entità è abilitata per la doppia scrittura.</span><span class="sxs-lookup"><span data-stu-id="a4efc-138">However, the admin can't clear the field as long as the entity is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="a4efc-139">![Campo Team proprietario predefinito](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="a4efc-139">![Default owning team field](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="a4efc-140">Striping e bootstrap della società</span><span class="sxs-lookup"><span data-stu-id="a4efc-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="a4efc-141">L'integrazione con Dataverse porta la parità della società utilizzando un identificatore della società per lo striping dei dati.</span><span class="sxs-lookup"><span data-stu-id="a4efc-141">Dataverse integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="a4efc-142">Come nella seguente figura viene illustrato, tutte le tabelle specifiche della società vengono estese in modo che abbiano una relazione molti-a-uno (N:1) con l'entità cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="a4efc-142">As the following illustration shows, all company-specific tables are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company entity.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="a4efc-143">![La relazione N:1 tra un'entità specifica della società e l'entità cdm_Company](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="a4efc-143">![N:1 relationship between a company-specific entity and the cdm_Company entity](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="a4efc-144">Per le righe, dopo che una società viene aggiunta e salvata, il valore diventa di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="a4efc-144">For rows, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="a4efc-145">Di conseguenza, gli utenti devono assicurarsi di scegliere la società corretta.</span><span class="sxs-lookup"><span data-stu-id="a4efc-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="a4efc-146">Solo le righe con dati della società sono idonee alla doppia scrittura tra l'applicazione e Dataverse.</span><span class="sxs-lookup"><span data-stu-id="a4efc-146">Only rows that have company data are eligible for dual-write between the application and Dataverse.</span></span>
+ <span data-ttu-id="a4efc-147">Per i dati di Dataverse esistenti, sarà presto disponibile un'esperienza di bootstrap gestita da amministratore.</span><span class="sxs-lookup"><span data-stu-id="a4efc-147">For existing Dataverse data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="a4efc-148">Compilare automaticamente il nome dell'azienda nelle app di interazione con i clienti</span><span class="sxs-lookup"><span data-stu-id="a4efc-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="a4efc-149">Esistono diversi modi per compilare automaticamente il nome dell'azienda nelle app di interazione con i clienti.</span><span class="sxs-lookup"><span data-stu-id="a4efc-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="a4efc-150">Se si è un amministratore di sistema, è possibile impostare la società predefinita accedendo a **Impostazioni avanzate > Sistema > Sicurezza > Utenti**.</span><span class="sxs-lookup"><span data-stu-id="a4efc-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="a4efc-151">Aprire il modulo **Utente** e nella sezione **Informazioni sull'organizzazione** impostare il valore **Società predefinita nei moduli**.</span><span class="sxs-lookup"><span data-stu-id="a4efc-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Impostare l'azienda predefinita nella sezione Informazioni sull'organizzazione.":::

+ <span data-ttu-id="a4efc-153">Se si dispone dell'accesso in **scrittura** all'entità **SystemUser** per il livello **Business Unit** è possibile modificare la società predefinita in qualsiasi modulo selezionando una società dal menu a discesa **Società**.</span><span class="sxs-lookup"><span data-stu-id="a4efc-153">If you have **Write** access to the **SystemUser** entity for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="Modifica del nome della società in un nuovo account.":::

+ <span data-ttu-id="a4efc-155">Se si dispone dell'accesso in **scrittura** ai dati in più di una società, è possibile modificare la società predefinita scegliendo una riga che appartiene a una società diversa.</span><span class="sxs-lookup"><span data-stu-id="a4efc-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a row that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="Scelta di una riga per cambiare la società predefinita.":::

+ <span data-ttu-id="a4efc-157">Se si è un configuratore o un amministratore di sistema e si desidera compilare automaticamente i dati aziendali in un modulo personalizzato, è possibile utilizzare gli [eventi di modulo](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span><span class="sxs-lookup"><span data-stu-id="a4efc-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="a4efc-158">Aggiungere un riferimento JavaScript a **msdyn_/DefaultCompany.js** e utilizzare i seguenti eventi.</span><span class="sxs-lookup"><span data-stu-id="a4efc-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="a4efc-159">È possibile utilizzare qualsiasi modulo predefinito, ad esempio il modulo **Account**.</span><span class="sxs-lookup"><span data-stu-id="a4efc-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="a4efc-160">L'evento **OnLoad** per il modulo: impostare il campo **defaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="a4efc-160">**OnLoad** event for the form: Set the **defaultCompany** field.</span></span>
    + <span data-ttu-id="a4efc-161">L'evento **OnChange** per il campo **Società**: impostare il campo **updateDefaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="a4efc-161">**OnChange** event for the **Company** field: Set the **updateDefaultCompany** field.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="a4efc-162">Applicare filtri in base al contesto della società</span><span class="sxs-lookup"><span data-stu-id="a4efc-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="a4efc-163">Per applicare il filtro in base al contesto della società ai moduli personalizzati o ai campi di ricerca personalizzati aggiunti ai moduli standard, aprire il modulo e utilizzare la sezione **Filtro record correlati** per applicare il filtro della società.</span><span class="sxs-lookup"><span data-stu-id="a4efc-163">To apply filtering based on the company context on your custom forms or on custom lookup fields added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="a4efc-164">È necessario impostarlo per ogni campo di ricerca che richiede il filtro in base alla società sottostante in una data riga.</span><span class="sxs-lookup"><span data-stu-id="a4efc-164">You must set this for each lookup field that requires filtering based on the underlying company on a given row.</span></span> <span data-ttu-id="a4efc-165">L'impostazione è mostrata per **Account** nell'illustrazione seguente.</span><span class="sxs-lookup"><span data-stu-id="a4efc-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Applicare il contesto della società":::

